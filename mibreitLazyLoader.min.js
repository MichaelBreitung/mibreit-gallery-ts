var q=Object.defineProperty;var V=(r,l,d)=>l in r?q(r,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[l]=d;var s=(r,l,d)=>V(r,typeof l!="symbol"?l+"":l,d);var mibreitLazyLoader=function(r){"use strict";var l=document.createElement("style");l.textContent=`.mbll__marker{display:none!important}.mbll__transition{transition:opacity .8s ease-out}@keyframes mbll__spinner{to{transform:rotate(360deg)}}.mbll__spinner{position:relative;height:100%;width:100%;display:flex;align-items:center;justify-content:center}.mbll__spinner:before{content:"";box-sizing:border-box;position:relative;width:2rem;height:2rem;border-radius:50%;border:2px solid #ccc;border-top-color:#000;animation:mbll__spinner .6s linear infinite}
/*$vite$:1*/`,document.head.appendChild(l);function d(t){return document.createElement(t)}function u(t){t.remove()}function b(t,e){e.appendChild(t)}function R(t,e){t[0].parentNode&&(t[0].parentNode.insertBefore(e,t[0]),t.forEach(n=>{e.appendChild(n)}))}function A(t){t.parentNode&&t.childNodes.forEach(e=>{t.parentNode.insertBefore(e,t)})}function O(t){const e=t.getBoundingClientRect();return{width:e.width,height:e.height}}function m(t){const e=t.getBoundingClientRect(),n=window.innerHeight,i=window.innerWidth;return e.top+e.height>0&&e.top<n&&e.left+e.width>0&&e.left<i}function C(t){return h(t,"class")}function c(t,e){t.classList.contains(e)||t.classList.add(e)}function L(t,e){t.classList.contains(e)&&t.classList.remove(e)}function f(t,e,n){t.style.setProperty(e,n)}function D(t,e){t.style.removeProperty(e),t.style.length===0&&t.removeAttribute("style")}function N(t){t.hasAttribute("style")&&t.removeAttribute("style")}function g(t,e){e==null?N(t):t.style.cssText=e}function h(t,e){return t.hasAttribute(e)?t.getAttribute(e):null}function T(t,e,n){t.setAttribute(e,n)}function v(t,e){t.removeAttribute(e)}function k(t){document.addEventListener("scroll",t)}function z(t){return document.querySelectorAll(t)}const E="mbll__marker",w="mbll__transition",y="data-src",H="src";class P{constructor(e){s(this,"_element");s(this,"_state",0);s(this,"_wasLoadedCallbacks",new Array);s(this,"_dataSrc",null);var i;this._element=e,this._dataSrc=h(e,y);const n=(i=C(e))==null?void 0:i.split(",");this._dataSrc||n&&n.includes(E)?(this._state=0,this._setBaseStyle()):this._state=2}load(){return new Promise((e,n)=>{this._state==0?(this._element.onload=()=>{this._finishLoad(),e(!0)},this._triggerLoad(),this._state=1,this._setLoadingStyle(),this._element instanceof HTMLImageElement&&this._element.complete&&(this._element.onload=null,this._finishLoad(),e(!0))):this._state===1?n(!1):n(!0)})}wasLoaded(){return this._state===2}addWasLoadedCallback(e){this._wasLoadedCallbacks.includes(e)||this._wasLoadedCallbacks.push(e)}_triggerLoad(){this._dataSrc&&T(this._element,H,this._dataSrc),L(this._element,E)}_finishLoad(){v(this._element,y),this._state=2,this._wasLoadedCallbacks.forEach(e=>{e()}),setTimeout(()=>{this._setLoadedStyle()},50)}_setBaseStyle(){f(this._element,"opacity","0")}_setLoadingStyle(){c(this._element,w)}_setLoadedStyle(){D(this._element,"opacity"),setTimeout(()=>{L(this._element,w)},1e3)}}class B{constructor(e){s(this,"_element");s(this,"_width");s(this,"_height");s(this,"_originalElementStyle");const n=h(e,"width"),i=h(e,"height");if(n==null||i==null)throw new Error("ElementInfo#constructor - supported elements need a width and height property");const o=h(e,"class");this._element=e,this._originalElementStyle=o||"",this._width=parseInt(n),this._height=parseInt(i)}getWidth(){return this._width}getHeight(){return this._height}getStyle(){return this._originalElementStyle}isElementWithinScrollArea(){return m(this._element)}}class W extends P{constructor(n){super(n);s(this,"_elementInfo");this._elementInfo=new B(this._element)}getHtmlElement(){return this._element}getWidth(){return this._elementInfo.getWidth()}getHeight(){return this._elementInfo.getHeight()}getStyle(){return this._elementInfo.getStyle()}isElementWithinScrollArea(){return this._elementInfo.isElementWithinScrollArea()}}const x={spinner:"mbll__spinner"};class F{constructor(e,n=!1){s(this,"_surrogate");s(this,"_element");s(this,"_spinner",null);this._element=e,this._surrogate=this._createSurrogate(n),R([e.getHtmlElement()],this._surrogate),e.addWasLoadedCallback(()=>{this._spinner&&u(this._spinner),A(this._surrogate),u(this._surrogate)})}getWidth(){return this._element.getWidth()}getHeight(){return this._element.getHeight()}getStyle(){return this._element.getStyle()}isElementWithinScrollArea(){return m(this._surrogate)}_resize(e){e&&f(this._surrogate,"width",`${O(this._surrogate).height*this._element.getWidth()/this._element.getHeight()}px`)}_createSurrogate(e=!1){const n=d("div"),i=this._element.getWidth()/this._element.getHeight();return c(n,"mibreit_lazyLoader_surrogate"),this._spinner=d("div"),c(this._spinner,x.spinner),b(this._spinner,n),e?(g(n,`overflow: hidden; height: 100%; width: auto; aspect-ratio: ${i}; flex-shrink:0;`),setTimeout(()=>{this._resize(!0)},0)):g(n,`overflow: hidden; width: 100%; height: auto; aspect-ratio: ${i};`),n}}function U(t,e){let n;return function(){const o=()=>{clearTimeout(n),t()};clearTimeout(n),n=window.setTimeout(o,e)}}const Z=400;class I{constructor(e,n){s(this,"_lazyLoader");s(this,"_elementLocations",[]);this._lazyLoader=e,this._elementLocations=n}startLoader(){this._loadElementsWithinWindowRect();const e=U(()=>{this._loadElementsWithinWindowRect()},Z);k(n=>{e()})}_loadElementsWithinWindowRect(){const e=this._lazyLoader.getUnloadedElementIndices();for(let n=0;n<e.length;n++)this._elementLocations[e[n]].isElementWithinScrollArea()&&this._lazyLoader.loadElement(e[n])}}const $=1;class p{constructor(e,n=0,i=$){s(this,"_currentIndex");s(this,"_loaderWindowLeft");s(this,"_loaderWindowRight");s(this,"_unloadedElementIndices",[]);s(this,"_elementLoaders");this._currentIndex=-1,this._elementLoaders=e,this._loaderWindowLeft=n,this._loaderWindowRight=i,this._updateUnloadedElementIndices()}async loadAll(){await this._loadElements(0,this._elementLoaders.length)}async setCurrentIndex(e){this._currentIndex!=e&&(this._currentIndex=e,await this._moveWindow())}async loadElement(e){if(e>=0&&e<this._elementLoaders.length){let n=!1;if(!this._unloadedElementIndices.includes(e))n=!0;else try{if(n=await this._elementLoaders[e].load(),n){const i=this._unloadedElementIndices.indexOf(e);i>-1&&this._unloadedElementIndices.splice(i,1)}}catch(i){n=i}return n}else throw new Error(`Preloader#loadElement -> invalid Index ${e}`)}getElementLoaderInfos(){return this._elementLoaders}getUnloadedElementIndices(){return this._unloadedElementIndices}async _moveWindow(){if(this._unloadedElementIndices.length){let e=this._currentIndex-this._loaderWindowLeft,n=this._currentIndex+1+this._loaderWindowRight;await this._loadElements(this._currentIndex,n<this._elementLoaders.length?n:this._elementLoaders.length),await this._loadElements(e>=0?e:0,this._currentIndex),e<0&&(e=this._elementLoaders.length+e,await this._loadElements(e,this._elementLoaders.length)),n>=this._elementLoaders.length&&(n=n-this._elementLoaders.length,await this._loadElements(0,n))}}async _loadElements(e,n){for(let i=e<0?0:e;i<n&&i<this._elementLoaders.length;i++)await this.loadElement(i)}_updateUnloadedElementIndices(){for(let e=0;e<this._elementLoaders.length;e++)this._elementLoaders[e].wasLoaded()||this._unloadedElementIndices.push(e)}}var a=(t=>(t[t.SIMPLE_DEFER=0]="SIMPLE_DEFER",t[t.WINDOWED_EXTERNAL=1]="WINDOWED_EXTERNAL",t[t.WINDOWED_SCROLL=2]="WINDOWED_SCROLL",t[t.WINDOWED_SCROLL_HORIZONTAL=3]="WINDOWED_SCROLL_HORIZONTAL",t))(a||{});function G(t){if(typeof t.loaderWindowRight<"u"&&(typeof t.loaderWindowRight!="number"||t.loaderWindowRight<0))throw new Error("checkLazyLoaderConfig - loaderWindowRight of config must be a number");if(typeof t.loaderWindowLeft<"u"&&(typeof t.loaderWindowLeft!="number"||t.loaderWindowLeft<0))throw new Error("checkLazyLoaderConfig - loaderWindowLeft of config must be a number");if(typeof t.mode<"u"&&(typeof t.mode!="number"||t.mode<0||t.mode>3))throw new Error("checkLazyLoaderConfig - mode of config must be a number (0, 1, 2, 3) - use type ELazyMode")}function M(t){if(typeof t!="string")throw new Error("createLazyLoader - first parameter needs to be a css selector string")}async function X(t,e=a.SIMPLE_DEFER,n){if(e!=null)switch(e){case a.WINDOWED_EXTERNAL:await t.loadElement(0),t.setCurrentIndex(0);break;case a.WINDOWED_SCROLL:case a.WINDOWED_SCROLL_HORIZONTAL:new I(t,n).startLoader();break;case a.SIMPLE_DEFER:default:t.loadAll();break}else t.loadAll()}function S(t,e){G(e);let n=t;if(e!=null&&e.useSurrogate){const o=[];if(e.mode===a.WINDOWED_SCROLL||e.mode===a.WINDOWED_SCROLL_HORIZONTAL)for(let _=0;_<t.length;_++){const Y=new F(t[_],e.mode===a.WINDOWED_SCROLL_HORIZONTAL);o.push(Y)}n=o}const i=new p(t,e.loaderWindowLeft,e.loaderWindowRight);return setTimeout(()=>{X(i,e.mode,n)},0),i}function j(t,e){M(t);const n=z(t),i=[];for(let o=0;o<n.length;o++){const _=new W(n[o]);i.push(_)}return S(i,e)}return r.ELazyMode=a,r.Element=W,r.LazyLoader=p,r.ScrollLoader=I,r.createLazyLoader=j,r.createLazyLoaderFromElements=S,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r}({});
