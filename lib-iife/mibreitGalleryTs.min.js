var lt=Object.defineProperty;var ot=(c,p,u)=>p in c?lt(c,p,{enumerable:!0,configurable:!0,writable:!0,value:u}):c[p]=u;var l=(c,p,u)=>ot(c,typeof p!="symbol"?p+"":p,u);var mibreitGalleryTs=function(c){"use strict";var p=document.createElement("style");p.textContent=`mbg-gallery,mbg-slideshow,mbg-thumbs,mbg-title{position:relative;overflow:hidden;display:block}mbg-title{text-align:center}.mbg__img_stage{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:hidden}.mbg__img_stage__zoom{-webkit-transition:transform 10s linear;-moz-transition:transform 10s linear;-o-transition:transform 10s linear;transition:transform 10s linear;-webkit-transform:scale(1.125);-moz-transform:scale(1.125);-o-transform:scale(1.125);transform:scale(1.125)}.mbg__fade{-webkit-transition:opacity .75s ease-out;-moz-transition:opacity .75s ease-out;-o-transition:opacity .75s ease-out;transition:opacity .75s ease-out}.mbg__transition{-webkit-transition:all .75s ease-out;-moz-transition:all .75s ease-out;-o-transition:all .75s ease-out;transition:all .75s ease-out}.mbg__hscroller{height:100%;display:flex;flex-direction:row;align-items:center;-webkit-transition:transform .6s ease-in-out;-moz-transition:transform .6s ease-in-out;-o-transition:transform .6s ease-in-out;transition:transform .6s ease-in-out}.mbg__thumbs_viewer{height:100%;width:100%;overflow:hidden}.mbg__thumbs_viewer__centered{display:flex;justify-content:center;align-items:center}.mbg__thumb_stage{margin:.25rem;position:relative;flex-shrink:0;-webkit-box-shadow:0px 0px 5px 0px rgba(0,0,0,.5);box-shadow:0 0 5px #00000080}.mbg__thumb_stage:hover{transform:scale(1.1)}.mbg__thumbs_scroller__previous_btn,.mbg__thumbs_scroller__next_btn{margin-right:.5rem;margin-left:.5rem}.mbg__thumbs_scroller__previous_btn>svg{transform:scaleX(-1)}.mbg__thumbs_scroller__parent{display:flex;flex-direction:row;align-items:center}.mbg__thumbs_scroller__parent svg{width:3rem;height:3rem;fill:#727f88}.mbg__fullscreen{position:fixed;box-sizing:border-box;background-color:#181818;-webkit-transition:background-color .75s ease-in-out;-moz-transition:background-color .75s ease-in-out;-o-transition:background-color .75s ease-in-out;transition:background-color .75s ease-in-out;overflow:hidden;top:0;left:0;padding:1rem;width:100%;height:100%;z-index:100;display:flex;flex-direction:column}.mbg__fullscreen>div>.mbg__img_stage{overflow:visible}.mbg__fullscreen>div>.mbg__img_stage img{-webkit-box-shadow:0px 0px 15px 0px rgba(0,0,0,.5);box-shadow:0 0 15px #00000080}.mbg__fullscreen>.mbg__fullscreen__exit_btn{position:absolute;width:3rem;height:3rem;right:1rem;top:1rem;z-index:3}.mbg__fullscreen>.mbg__fullscreen__exit_btn>svg{opacity:.75}.mbg__gallery__fullscreen_btn{position:absolute;z-index:2;width:2rem;height:2rem;right:.25rem;top:.25rem;opacity:0}.mbg__gallery__previous_btn{position:absolute;z-index:2;top:50%;opacity:0}.mbg__gallery__next_btn{position:absolute;z-index:2;top:50%;right:0rem;opacity:0}.mbg__gallery__next_btn>svg{width:3rem;height:3rem;margin-top:-1.5rem;fill:#727f88}.mbg__gallery__previous_btn>svg{transform:scaleX(-1);width:3rem;height:3rem;margin-top:-1.5rem;fill:#727f88}
`,document.head.appendChild(p);var u=(s=>(s[s.NONE=0]="NONE",s[s.FIT_ASPECT=1]="FIT_ASPECT",s[s.STRETCH=2]="STRETCH",s[s.EXPAND=3]="EXPAND",s))(u||{});function Z(s){if(typeof s.numberOfVisibleThumbs<"u"&&(typeof s.numberOfVisibleThumbs!="number"||s.numberOfVisibleThumbs<0))throw new Error("checkThumbScrollerConfig - numberOfVisibleThumbs is invalid number");if(typeof s.initialIndex<"u"&&(typeof s.initialIndex!="number"||s.initialIndex<0))throw new Error("checkThumbScrollerConfig - config initialIndex should be of type number")}function H(s){if(typeof s.scaleMode<"u"&&(typeof s.scaleMode!="number"||s.scaleMode<0||s.scaleMode>3))throw new Error("checkSlideshowConfig - config scaleMode should be of type EImageScaleMode (number 0 - 3)");if(typeof s.interval<"u"&&(typeof s.interval!="number"||s.interval<1e3))throw new Error("checkSlideshowConfig - config interval should be of type number and larger than 1000");if(typeof s.zoom<"u"&&typeof s.zoom!="boolean")throw new Error("checkSlideshowConfig - config zoom should be of type boolean");if(typeof s.preloaderAfterSize<"u"&&(typeof s.preloaderAfterSize!="number"||s.preloaderAfterSize<0))throw new Error("checkSlideshowConfig - config preloaderAfterSize should be of type number");if(typeof s.preloaderBeforeSize<"u"&&(typeof s.preloaderBeforeSize!="number"||s.preloaderBeforeSize<0))throw new Error("checkSlideshowConfig - config preloaderBeforeSize should be of type number")}function ue(s){if(H(s),Z(s),typeof s.thumbContainerSelector<"u"&&typeof s.thumbContainerSelector!="string")throw new Error("checkGalleryConfig - invalid thumbContainerSelector");if(typeof s.thumbSelector<"u"&&typeof s.thumbSelector!="string")throw new Error("checkGalleryConfig - invalid thumbSelector")}function me(){return parseFloat(window.getComputedStyle(document.body).getPropertyValue("font-size"))}function d(s){return document.createElement(s)}function ce(s){return s.cloneNode()}function S(s){s.remove()}function q(s,e){e.prepend(s)}function y(s,e){e.appendChild(s)}function O(s,e){e.parentElement.insertBefore(s,e)}function de(s){for(var e=s.childNodes,t=new Array,n=0;n<e.length;++n)t.push(e[n]);return t}function v(s,e){s.innerHTML=e}function F(s,e){s[0].parentNode.insertBefore(e,s[0]),s.forEach(function(t){e.appendChild(t)})}function z(s){var e=s.getBoundingClientRect();return{width:e.width,height:e.height}}function ge(s){var e=s.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth;return e.top+e.height>0&&e.top<t&&e.left+e.width>0&&e.left<n}function be(s){var e=s.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{y:e.top+n,x:e.left+t}}function fe(s){return x(s,"class")}function _(s,e){s.classList.contains(e)||s.classList.add(e)}function C(s,e){s.classList.contains(e)&&s.classList.remove(e)}function we(s,e){return window.getComputedStyle(s).getPropertyValue(e)}function a(s,e,t){s.style.setProperty(e,t)}function g(s,e){s.style.removeProperty(e),s.style.length===0&&s.removeAttribute("style")}function pe(s){s.hasAttribute("style")&&s.removeAttribute("style")}function Ee(s,e){e==null?pe(s):s.style.cssText=e}function x(s,e){return s.hasAttribute(e)?s.getAttribute(e):null}function ye(s,e,t){s.setAttribute(e,t)}function ve(s,e){s.removeAttribute(e)}function V(s,e){s.addEventListener("click",e)}function U(s){document.addEventListener("keydown",s)}function I(s,e,t){s.addEventListener(e,t)}function Ce(s){s.addEventListener("contextmenu",function(e){e.preventDefault()})}function Ie(s){s.addEventListener("dragstart",function(e){e.preventDefault()})}function T(s){return document.querySelector(s)}function L(s){return document.querySelectorAll(s)}function X(s){return s.key}var Se=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(h){h(r)})}return new(t||(t=Promise))(function(r,h){function m(w){try{o(n.next(w))}catch($){h($)}}function B(w){try{o(n.throw(w))}catch($){h($)}}function o(w){w.done?r(w.value):i(w.value).then(m,B)}o((n=n.apply(s,e||[])).next())})},xe=function(s,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,i,r,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(o){return function(w){return B([o,w])}}function B(o){if(n)throw new TypeError("Generator is already executing.");for(;h&&(h=0,o[0]&&(t=0)),t;)try{if(n=1,i&&(r=o[0]&2?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[o[0]&2,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){t.label=o[1];break}if(o[0]===6&&t.label<r[1]){t.label=r[1],r=o;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(o);break}r[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(s,t)}catch(w){o=[6,w],i=0}finally{n=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Te=5,K=function(){function s(e,t,n){t===void 0&&(t=0),n===void 0&&(n=Te),this._unloadedElementIndices=[],this._currentIndex=-1,this._elementLoaders=e,this._preloaderBeforeSize=t,this._preloaderAfterSize=n,this._updateUnloadedElementIndices()}return s.prototype.loadAll=function(){this._loadElements(0,this._elementLoaders.length)},s.prototype.setCurrentIndex=function(e){this._currentIndex!=e&&(this._currentIndex=e,this._moveWindow())},s.prototype.loadElement=function(e){return Se(this,void 0,void 0,function(){var t,n,i;return xe(this,function(r){switch(r.label){case 0:return e>=0&&e<this._elementLoaders.length?(t=!1,this._unloadedElementIndices.includes(e)?[3,1]:(t=!0,[3,5])):[3,6];case 1:r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._elementLoaders[e].load()];case 3:return t=r.sent(),t&&(n=this._unloadedElementIndices.indexOf(e),n>-1&&this._unloadedElementIndices.splice(n,1)),[3,5];case 4:return i=r.sent(),t=i,[3,5];case 5:return[2,t];case 6:throw new Error("Preloader#loadElement -> invalid Index ".concat(e))}})})},s.prototype.getElementLoaderInfos=function(){return this._elementLoaders},s.prototype.getUnloadedElementIndices=function(){return this._unloadedElementIndices},s.prototype._moveWindow=function(){if(this._unloadedElementIndices.length){var e=this._currentIndex-this._preloaderBeforeSize,t=this._currentIndex+this._preloaderAfterSize;this._loadElements(this._currentIndex,t<this._elementLoaders.length?t:this._elementLoaders.length),this._loadElements(e>=0?e:0,this._currentIndex),e<0&&(e=this._elementLoaders.length+e,this._loadElements(e,this._elementLoaders.length)),t>=this._elementLoaders.length&&(t=t-this._elementLoaders.length,this._loadElements(0,t))}},s.prototype._loadElements=function(e,t){for(var n=e<0?0:e;n<t&&n<this._elementLoaders.length;n++)this.loadElement(n)},s.prototype._updateUnloadedElementIndices=function(){for(var e=0;e<this._elementLoaders.length;e++)this._elementLoaders[e].wasLoaded()||this._unloadedElementIndices.push(e)},s}(),Y="mibreit-LazyLoader_lazy",j="mibreit-LazyLoader_ElementLoader_animate",J="data-src",Le="src",E;(function(s){s[s.INACTIVE=0]="INACTIVE",s[s.LOADING=1]="LOADING",s[s.LOADED=2]="LOADED"})(E||(E={}));var Ae=function(){function s(e){var t;this._state=E.INACTIVE,this._wasLoadedCallbacks=new Array,this._dataSrc=null,this._element=e,this._dataSrc=x(e,J);var n=(t=fe(e))===null||t===void 0?void 0:t.split(",");this._dataSrc||n&&n.includes(Y)?(this._state=E.INACTIVE,this._setBaseStyle()):this._state=E.LOADED}return s.prototype.load=function(){var e=this;return new Promise(function(t,n){e._state==E.INACTIVE?(e._element.onload=function(){e._finishLoad(),t(!0)},e._triggerLoad(),e._state=E.LOADING,e._setLoadingStyle(),e._element instanceof HTMLImageElement&&e._element.complete&&(e._element.onload=null,e._finishLoad(),t(!0))):e._state===E.LOADING?n(!1):n(!0)})},s.prototype.wasLoaded=function(){return this._state===E.LOADED},s.prototype.addWasLoadedCallback=function(e){this._wasLoadedCallbacks.includes(e)||this._wasLoadedCallbacks.push(e)},s.prototype._triggerLoad=function(){this._dataSrc&&ye(this._element,Le,this._dataSrc),C(this._element,Y)},s.prototype._finishLoad=function(){var e=this;ve(this._element,J),this._state=E.LOADED,this._wasLoadedCallbacks.forEach(function(t){t()}),setTimeout(function(){e._setLoadedStyle()},50)},s.prototype._setBaseStyle=function(){a(this._element,"opacity","0")},s.prototype._setLoadingStyle=function(){_(this._element,j)},s.prototype._setLoadedStyle=function(){var e=this;g(this._element,"opacity"),setTimeout(function(){C(e._element,j)},1e3)},s}(),Oe=function(){function s(e){var t=x(e,"width"),n=x(e,"height");if(t==null||n==null)throw new Error("ElementInfo#constructor - supported elements need a width and height property");var i=x(e,"class");this._element=e,this._originalElementStyle=i||"",this._width=parseInt(t),this._height=parseInt(n)}return s.prototype.getWidth=function(){return this._width},s.prototype.getHeight=function(){return this._height},s.prototype.getStyle=function(){return this._originalElementStyle},s.prototype.isElementWithinScrollArea=function(){return ge(this._element)},s}(),ze=function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ve=function(s){ze(e,s);function e(t){var n=s.call(this,t)||this;return n._elementInfo=new Oe(n._element),n}return e.prototype.getHtmlElement=function(){return this._element},e.prototype.getWidth=function(){return this._elementInfo.getWidth()},e.prototype.getHeight=function(){return this._elementInfo.getHeight()},e.prototype.getStyle=function(){return this._elementInfo.getStyle()},e.prototype.isElementWithinScrollArea=function(){return this._elementInfo.isElementWithinScrollArea()},e}(Ae),Q;(function(s){s[s.SIMPLE_DEFER=0]="SIMPLE_DEFER",s[s.WINDOWED_EXTERNAL=1]="WINDOWED_EXTERNAL",s[s.WINDOWED_SCROLL=2]="WINDOWED_SCROLL",s[s.WINDOWED_SCROLL_HORIZONTAL=3]="WINDOWED_SCROLL_HORIZONTAL"})(Q||(Q={}));const R={img_stage:"mbg__img_stage",img_stage__zoom:"mbg__img_stage__zoom"},f={fade:"mbg__fade",transition:"mbg__transition"},ee=50,ke=700;var b=(s=>(s[s.NONE=0]="NONE",s[s.LEFT=1]="LEFT",s[s.RIGHT=2]="RIGHT",s))(b||{});class Pe{constructor(e,t){l(this,"_callback");l(this,"_touchStartTime",null);l(this,"_touchStartPosition",null);l(this,"_touchStart",e=>{this._touchStartTime=Date.now(),this._touchStartPosition=this._getTouchPosition(e)});l(this,"_touchEnd",e=>{if(this._touchStartTime&&this._touchStartPosition&&Date.now()-this._touchStartTime<ke){const t=this._getTouchPosition(e),n=this._detectDirection(this._touchStartPosition,t);this._callback(n,t)}this._touchStartPosition=null,this._touchStartTime=null});this._callback=t,I(e,"pointerdown",this._touchStart),I(e,"pointerup",this._touchEnd)}_getTouchPosition(e){return{x:e.pageX,y:e.pageY}}_detectDirection(e,t){const n=e.x-t.x;return n>ee?2:n<-ee?1:0}}const k=async function(){return new Promise((s,e)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{s()})})})},Ne=1e3;class P{constructor(e){l(this,"_zoomAnimation",!1);l(this,"_imageStage");l(this,"_imageHandle");this._imageHandle=e,this._imageStage=this._createStage(),new ResizeObserver(()=>{this.reinitSize()}).observe(this._imageStage)}setZoomAnimation(e){this._zoomAnimation=e}reinitSize(){const e=z(this._imageStage);this._applyScaleModeImpl(e.width,e.height),this._centerImage(e.width,e.height)}async hideImage(e=b.NONE){this._zoomAnimation&&setTimeout(()=>{this._resetZoom()},Ne),this._stopSlideAnimation(),await k(),e==b.RIGHT?(_(this._imageStage,f.transition),a(this._imageStage,"left","-100%")):e==b.LEFT&&(_(this._imageStage,f.transition),a(this._imageStage,"left","100%")),g(this._imageStage,"opacity")}async showImage(e=b.NONE){this._zoomAnimation&&this._startZoomAnimation(),this._stopSlideAnimation(),await k(),e==b.RIGHT?(C(this._imageStage,f.transition),a(this._imageStage,"left","100%"),await k(),_(this._imageStage,f.transition),g(this._imageStage,"left")):e==b.LEFT?(C(this._imageStage,f.transition),a(this._imageStage,"left","-100%"),await k(),_(this._imageStage,f.transition),g(this._imageStage,"left")):(C(this._imageStage,f.transition),g(this._imageStage,"left")),a(this._imageStage,"opacity","1")}_createStage(){const e=d("div");return _(e,R.img_stage),_(e,f.fade),F([this._imageHandle],e),e}_centerImage(e,t){const{width:n,height:i}=z(this._imageHandle),r=(n+e)/2-n,h=(i+t)/2-i;a(this._imageHandle,"margin-left",`${r}px`),a(this._imageHandle,"margin-top",`${h}px`)}_startZoomAnimation(){_(this._imageHandle,R.img_stage__zoom)}_resetZoom(){C(this._imageHandle,R.img_stage__zoom)}_stopSlideAnimation(){a(this._imageStage,"margin-left",we(this._imageStage,"margin-left"))}}class Be extends P{constructor(t,n,i){super(t);l(this,"_imageWidth");l(this,"_imageHeight");this._imageWidth=n,this._imageHeight=i}_applyScaleModeImpl(t,n){const i=this._imageWidth/this._imageHeight;let r="auto",h="auto";t/n>i?n<=this._imageHeight&&(h="100%"):t<=this._imageWidth&&(r="100%"),a(this._imageHandle,"width",r),a(this._imageHandle,"height",h)}}class te extends P{constructor(t,n,i){super(t);l(this,"_imageWidth");l(this,"_imageHeight");this._imageWidth=n,this._imageHeight=i}_applyScaleModeImpl(t,n){const i=this._imageWidth/this._imageHeight,r=t/n;r>i?(a(this._imageHandle,"width","100%"),a(this._imageHandle,"height",`${100/i*r}%`)):(a(this._imageHandle,"width",`${i*100/r}%`),a(this._imageHandle,"height","100%"))}}class He extends P{constructor(e){super(e)}_applyScaleModeImpl(e,t){a(this._imageHandle,"width","100%"),a(this._imageHandle,"height","100%")}}class Fe extends P{constructor(e){super(e)}_applyScaleModeImpl(e,t){g(this._imageHandle,"width"),g(this._imageHandle,"height")}}class Re{constructor(e,t=u.FIT_ASPECT){l(this,"_currentIndex",-1);l(this,"_delayedNewIndex",-1);l(this,"_imageStages",[]);l(this,"_images");l(this,"_imageChangedCallbacks",new Array);this._images=e,this._prepareImageStages(e,t)}showImage(e){return this._showImage(e)}showNextImage(e){const t=this._currentIndex<this._imageStages.length-1?this._currentIndex+1:0;return this._showImage(t,e)}showPreviousImage(e){const t=this._currentIndex>0?this._currentIndex-1:this._imageStages.length-1;return this._showImage(t,e)}getNumberOfImages(){return this._imageStages.length}setZoomAnimation(e){this._imageStages.forEach(t=>{t.setZoomAnimation(e)})}addImageChangedCallback(e){this._imageChangedCallbacks.includes(e)||this._imageChangedCallbacks.push(e)}getImageIndex(){return this._currentIndex}getImageInfo(e){return this._isValidIndex(e)?this._images[e]:null}getImageElement(e){return this._isValidIndex(e)?this._images[e].getHtmlElement():null}_showImage(e,t=b.NONE){return this._isValidIndex(e)?(e!=this._currentIndex&&(this._images[e].wasLoaded()?(this._hideImage(this._currentIndex,t),this._changeCurrentImage(e,t)):(this._delayedNewIndex=e,this._images[e].addWasLoadedCallback(()=>{e===this._delayedNewIndex&&(this._hideImage(this._currentIndex,t),this._changeCurrentImage(this._delayedNewIndex,t))}))),!0):!1}_hideImage(e,t=b.NONE){this._isValidIndex(e)&&this._imageStages[this._currentIndex].hideImage(t)}_prepareImageStages(e,t){e.forEach(n=>{const i=this._createImageStage(n.getHtmlElement(),n.getWidth(),n.getHeight(),t);n.addWasLoadedCallback(()=>{i.reinitSize()}),this._imageStages.push(i)})}_createImageStage(e,t,n,i=u.FIT_ASPECT){switch(i){case u.EXPAND:return new te(e,t,n);case u.FIT_ASPECT:return new Be(e,t,n);case u.STRETCH:return new He(e);case u.NONE:default:return new Fe(e)}}_isValidIndex(e){return e>=0&&e<this._imageStages.length}_changeCurrentImage(e,t=b.NONE){this._currentIndex=e,this._imageStages[this._currentIndex].showImage(t),this._imageChangedCallbacks.forEach(n=>{n(this._currentIndex,this._images[this._currentIndex])})}}class We{constructor(e,t){l(this,"_imageViewer");l(this,"_loader");this._imageViewer=e,this._loader=t}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}}const se="title",ne="data-title",De=7,Me=3,Ge=7,$e=.5;class ie extends Ve{constructor(t){super(t);l(this,"_title","");this._prepareTitle(t),this._limitMaxSizeTo(t,this.getWidth(),this.getHeight()),Ce(t),Ie(t)}getTitle(){return this._title}getUrl(){return this._element.hasAttribute("data-src")?this._element.getAttribute("data-src"):this._element.getAttribute("src")}_limitMaxSizeTo(t,n,i){Ee(t,`max-width: ${n}px; max-height: ${i}px`)}_prepareTitle(t){let n=t.getAttribute(se);n?(t.setAttribute(ne,n),t.removeAttribute(se)):n=t.getAttribute(ne),this._title=n||""}}class W{constructor(e,t){l(this,"_imageViewer");l(this,"_lazyLoader");const n=this._createImagesArray(e);this._lazyLoader=this._createLoader(n,t==null?void 0:t.preloaderBeforeSize,t==null?void 0:t.preloaderAfterSize),this._lazyLoader.setCurrentIndex(0),this._imageViewer=this._createImageViewer(n,t==null?void 0:t.scaleMode,t==null?void 0:t.zoom),t!=null&&t.interval&&setInterval(()=>{this._imageViewer.showNextImage()},t.interval),this._imageViewer.showImage(0)}build(){return new We(this._imageViewer,this._lazyLoader)}_createImagesArray(e){const t=new Array;for(let n=0;n<e.length;n++){const i=new ie(e[n]);t.push(i)}return t}_createLoader(e,t=Me,n=De){const i=new K(e,t,n);return setTimeout(()=>{i.loadElement(0),i.setCurrentIndex(0)},0),i}_createImageViewer(e,t,n){const i=new Re(e,t);return n!==void 0&&i.setZoomAnimation(n),i.addImageChangedCallback((r,h)=>{this._lazyLoader.setCurrentIndex(r)}),i}}function Ze(s,e){if(typeof s!="string")throw new Error("createSlideshow - second parameter must be imageSelector string");const t=L(s);if((t==null?void 0:t.length)>0)return e&&H(e),new W(t,e).build();throw new Error("createSlideshow - no images selected")}const qe={hscroller:"mbg__hscroller"};class Ue{constructor(e){l(this,"_scroller");this._scroller=this._createScroller(e)}scrollTo(e,t=!1){let n;return t?n=`${e}rem`:n=`${e}px`,a(this._scroller,"transform",`translate(${n})`),!0}_createScroller(e){const t=d("div");return _(t,qe.hscroller),F(e,t),t}}const re={thumbs_viewer:"mbg__thumbs_viewer",thumbs_viewer__centered:"mbg__thumbs_viewer__centered"};class Xe{constructor(e,t){l(this,"_scroller",null);l(this,"_wrapperElement");l(this,"_thumbElements");l(this,"_thumbSizeRem");l(this,"_numberOfVisibleThumbs");l(this,"_scrollIndexChangedCallbacks",new Array);l(this,"_currentScrollIndex",0);this._numberOfVisibleThumbs=t,this._thumbElements=Array.from(e.children),this._wrapperElement=this._wrapThumbs(de(e)),this._thumbSizeRem=this._calculateThumbsize(),this._resizeThumbs(),this._numberOfVisibleThumbs<this._thumbElements.length&&(this._scroller=new Ue(this._thumbElements)),new ResizeObserver(()=>{this.reinitSize()}).observe(this._wrapperElement)}reinitSize(){this._thumbSizeRem=this._calculateThumbsize(),this._resizeThumbs(),this.setCenterThumb(this._currentScrollIndex,!1)}setCenterThumb(e,t=!0){if(this._scroller){let n=e;t&&(n-=Math.floor(this._numberOfVisibleThumbs/2));const i=this._normalizeIndex(n);this._currentScrollIndex=i;const r=-i*this._thumbSizeRem;this._scroller.scrollTo(r,!0),this._scrollIndexChangedCallbacks.forEach(h=>{h(this._currentScrollIndex)})}}scrollNext(){let e=this._currentScrollIndex+this._numberOfVisibleThumbs;const t=this._thumbElements.length-this._numberOfVisibleThumbs;this._currentScrollIndex===t?e=0:e>=t&&(e=t),this.setCenterThumb(e,!1)}scrollPrevious(){let e=this._currentScrollIndex-this._numberOfVisibleThumbs;const t=this._thumbElements.length-this._numberOfVisibleThumbs;this._currentScrollIndex===0?e=t:e<0&&(e=0),this.setCenterThumb(e,!1)}addScrollIndexChangedCallback(e){this._scrollIndexChangedCallbacks.includes(e)||this._scrollIndexChangedCallbacks.push(e)}_normalizeIndex(e){const t=this._thumbElements.length-this._numberOfVisibleThumbs;return e>=t?t:e<0?0:e}_wrapThumbs(e){const t=d("div");return _(t,re.thumbs_viewer),this._numberOfVisibleThumbs>=this._thumbElements.length&&_(t,re.thumbs_viewer__centered),F(e,t),t}_calculateThumbsize(){const e=me();return z(this._wrapperElement).width/e/this._numberOfVisibleThumbs}_resizeThumbs(){const e=this._thumbSizeRem*.9,t=this._thumbSizeRem*.05;for(let n=0;n<this._thumbElements.length;++n)a(this._thumbElements[n],"width",`${e}rem`),a(this._thumbElements[n],"height",`${e}rem`),a(this._thumbElements[n],"margin",`${t}rem`)}}const Ke={thumb_stage:"mbg__thumb_stage"};class Ye extends te{constructor(e,t,n){super(e,t,n),_(this._imageStage,Ke.thumb_stage)}addStageClickedCallback(e){V(this._imageStage,e)}}const D={thumbs_scroller__previous_btn:"mbg__thumbs_scroller__previous_btn",thumbs_scroller__next_btn:"mbg__thumbs_scroller__next_btn",thumbs_scroller__parent:"mbg__thumbs_scroller__parent"},le='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1152 896q0 26-19 45l-448 448q-19 19-45 19t-45-19-19-45v-896q0-26 19-45t45-19 45 19l448 448q19 19 19 45z"/></svg>';class oe{constructor(e,t,n,i){l(this,"_thumbContainerElement");l(this,"_previousButtonElement");l(this,"_nextButtonElement");l(this,"_lazyLoader");l(this,"_numberOfVisibleThumbs");l(this,"_numberOfThumbs");l(this,"_initialIndex");l(this,"_thumbsViewer");this._thumbContainerElement=e,_(this._thumbContainerElement,D.thumbs_scroller__parent),this._numberOfVisibleThumbs=n!=null&&n.numberOfVisibleThumbs?n.numberOfVisibleThumbs:Ge,this._initialIndex=n==null?void 0:n.initialIndex;const r=this._createThumbsArray(t);this._numberOfThumbs=r.length,this._createThumbStages(r,i),this._lazyLoader=new K(r,this._numberOfVisibleThumbs,this._numberOfVisibleThumbs),this._thumbsViewer=this._createThumbsViewer(this._initialIndex)}addPreviousNextButtons(){return this._numberOfVisibleThumbs<this._numberOfThumbs&&([this._previousButtonElement,this._nextButtonElement]=this._createPreviousNextButtons()),this}build(){return this._thumbsViewer.reinitSize(),this._previousButtonElement&&this._nextButtonElement&&this._addThumbsViewerInteraction(this._previousButtonElement,this._nextButtonElement),this._numberOfVisibleThumbs>=this._numberOfThumbs&&setTimeout(()=>{this._lazyLoader.loadElement(0),this._lazyLoader.setCurrentIndex(0),this._thumbsViewer.setCenterThumb(0)},0),this._thumbsViewer}_createThumbsArray(e){const t=new Array;for(let n=0;n<e.length;n++){const i=new ie(e[n]);t.push(i)}return t}_createThumbStages(e,t){e.forEach((n,i)=>{const r=new Ye(n.getHtmlElement(),n.getWidth(),n.getHeight());n.addWasLoadedCallback(()=>{r.reinitSize()}),r.showImage(),t&&r.addStageClickedCallback(()=>{t(i)})})}_createThumbsViewer(e=0){const t=new Xe(this._thumbContainerElement,this._numberOfVisibleThumbs);return t.addScrollIndexChangedCallback(n=>{this._lazyLoader.setCurrentIndex(n)}),t.setCenterThumb(e),t}_createPreviousNextButtons(){const e=d("div");v(e,le),_(e,D.thumbs_scroller__previous_btn),q(e,this._thumbContainerElement);const t=d("div");return v(t,le),_(t,D.thumbs_scroller__next_btn),y(t,this._thumbContainerElement),[e,t]}_addThumbsViewerInteraction(e,t){V(t,()=>{this._thumbsViewer.scrollNext()}),V(e,()=>{this._thumbsViewer.scrollPrevious()})}}function je(s,e,t,n){if(typeof s!="string")throw new Error("createThumbsViewer - first parameter must be containerSelector string");if(typeof e!="string")throw new Error("createThumbsViewer - second parameter must be imageSelector string");t&&Z(t);const i=L(e),r=T(s);if(r&&(i==null?void 0:i.length)>0)return new oe(r,i,t,n).addPreviousNextButtons().build();throw new Error("createThumbsViewer - no images selected")}class Je{constructor(e,t,n,i){l(this,"_imageViewer");l(this,"_loader");l(this,"_fullscreenContainer",null);l(this,"_thumbsViewer",null);this._imageViewer=e,this._loader=t,this._thumbsViewer=n,this._fullscreenContainer=i}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}getThumbsViewer(){return this._thumbsViewer}getFullscreen(){return this._fullscreenContainer}}const ae={fullscreen:"mbg__fullscreen",img_stage:"mbg__img_stage",fullscreen__exit_btn:"mbg__fullscreen__exit_btn"},Qe='<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';class et{constructor(e,t=null,n=!0){l(this,"_changedCallbacks",[]);l(this,"_active");l(this,"_slideshowContainerElement");l(this,"_thumbsContainerElement",null);l(this,"_fullScreenContainerElement");l(this,"_slideshowContainerPlaceholderElement");l(this,"_thumbsContainerPlaceholderElement",null);l(this,"_closeButtonElement");l(this,"_usePlaceholder");this._active=!1,this._slideshowContainerElement=e,this._thumbsContainerElement=t,this._usePlaceholder=n,this._fullScreenContainerElement=this._createFullscreenContainer(),this._closeButtonElement=this._createFullscreenCloseButton(this._fullScreenContainerElement),this._slideshowContainerPlaceholderElement=this._createSlideshowContainerPlaceholder(),t&&(this._thumbsContainerPlaceholderElement=this._createThumbsContainerPlaceholder())}activate(){this._active||(this._moveGalleryToFullscreen(),this._moveThumbsToFullscreen(),this._addFullscreen(),this._setupCloseButtonHandler(),this._active=!0,this._changedCallbacks.forEach(e=>{e(!0)}))}deActivate(){this._active&&(this._removeGalleryFromFullscreen(),this._removeThumbsFromFullscreen(),this._removeFullscreen(),this._active=!1,this._changedCallbacks.forEach(e=>{e(!1)}))}addChangedCallback(e){this._changedCallbacks.includes(e)||this._changedCallbacks.push(e)}isActive(){return this._active}setBackgroundColor(e){a(this._fullScreenContainerElement,"background-color",e)}_createFullscreenContainer(){const e=d("div");return _(e,ae.fullscreen),e}_createFullscreenCloseButton(e){const t=d("div");return v(t,Qe),_(t,ae.fullscreen__exit_btn),y(t,e),t}_createSlideshowContainerPlaceholder(){return d("div")}_createThumbsContainerPlaceholder(){return d("div")}_addFullscreen(){const e=T("body");e!=null&&y(this._fullScreenContainerElement,e)}_removeFullscreen(){S(this._fullScreenContainerElement)}_moveGalleryToFullscreen(){this._usePlaceholder&&O(this._slideshowContainerPlaceholderElement,this._slideshowContainerElement),y(this._slideshowContainerElement,this._fullScreenContainerElement),a(this._slideshowContainerElement,"width","100%"),a(this._slideshowContainerElement,"flex-grow","1")}_removeGalleryFromFullscreen(){S(this._slideshowContainerElement),this._usePlaceholder&&(O(this._slideshowContainerElement,this._slideshowContainerPlaceholderElement),S(this._slideshowContainerPlaceholderElement)),g(this._slideshowContainerElement,"width"),g(this._slideshowContainerElement,"flex-grow")}_moveThumbsToFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(this._usePlaceholder&&O(this._thumbsContainerPlaceholderElement,this._thumbsContainerElement),y(this._thumbsContainerElement,this._fullScreenContainerElement),a(this._thumbsContainerElement,"flex-grow","0"))}_removeThumbsFromFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(S(this._thumbsContainerElement),this._usePlaceholder&&(O(this._thumbsContainerElement,this._thumbsContainerPlaceholderElement),S(this._thumbsContainerPlaceholderElement)),g(this._thumbsContainerElement,"flex-grow"))}_setupCloseButtonHandler(){V(this._closeButtonElement,e=>{e==null||e.stopPropagation(),this._active&&this.deActivate()})}}const he='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"/></svg>',tt='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2,9 L0,9 L0,14 L5,14 L5,12 L2,12 L2,9 L2,9 Z M0,5 L2,5 L2,2 L5,2 L5,0 L0,0 L0,5 L0,5 Z M12,12 L9,12 L9,14 L14,14 L14,9 L12,9 L12,12 L12,12 Z M9,0 L9,2 L12,2 L12,5 L14,5 L14,0 L9,0 L9,0 Z"/></svg>',M={gallery__fullscreen_btn:"mbg__gallery__fullscreen_btn",gallery__previous_btn:"mbg__gallery__previous_btn",gallery__next_btn:"mbg__gallery__next_btn"};class A{constructor(e,t,n=!1){l(this,"_slideshowContainerElement");l(this,"_fullScreenOnly");l(this,"_slideshow");l(this,"_thumbsViewer",null);l(this,"_fullscreen",null);this._slideshowContainerElement=e,this._slideshow=t,this._fullScreenOnly=n}static fromContainerAndImages(e,t,n){const i=new W(t,n).build();return new A(e,i)}static fromImages(e,t){const n=d("div");a(n,"display","none"),e.forEach(m=>{y(ce(m),n)});const i=T("body");y(n,i);const r=n.children,h=new W(r,t).build();return new A(n,h,!0)}addPreviousNextButtons(){if(this._slideshow.getImageViewer().getNumberOfImages()>1){const{previousButton:e,nextButton:t}=this._createPreviousNextButtons();this._setupHoverEvents([e,t])}return this}addFullscreen(){this._fullscreen=new et(this._slideshowContainerElement);const e=this._createFullscreenButton();return this._setupHoverEvents([e]),this._setupFullscreenKeyEvents(this._fullscreen),this._setupFullscreenClickEvent(this._fullscreen,e),this._setupFullscreenChangedHandler(this._fullscreen,e),this._fullScreenOnly&&this._fullscreen.addChangedCallback(t=>{t?g(this._slideshowContainerElement,"display"):a(this._slideshowContainerElement,"display","none")}),this}addThumbScroller(e,t,n){return this._thumbsViewer=new oe(e,t,n,i=>{this._slideshow.getLoader().setCurrentIndex(i),this._slideshow.getImageViewer().showImage(i)}).addPreviousNextButtons().build(),this._slideshow.getImageViewer().addImageChangedCallback((i,r)=>{this._thumbsViewer.setCenterThumb(i,!0)}),this}build(){return this._setupSwipeHandler(this._slideshow.getImageViewer()),this._setupKeyEvents(this._slideshow.getImageViewer()),new Je(this._slideshow.getImageViewer(),this._slideshow.getLoader(),this._thumbsViewer,this._fullscreen)}_createPreviousNextButtons(){const e=d("div");v(e,he),_(e,M.gallery__previous_btn),_(e,f.fade),q(e,this._slideshowContainerElement);const t=d("div");return v(t,he),_(t,M.gallery__next_btn),_(t,f.fade),y(t,this._slideshowContainerElement),{previousButton:e,nextButton:t}}_setupSwipeHandler(e){a(this._slideshowContainerElement,"touch-action","pinch-zoom pan-y"),new Pe(this._slideshowContainerElement,(t,n)=>{const i=z(this._slideshowContainerElement).width,r=be(this._slideshowContainerElement).x;t===b.LEFT?e.showPreviousImage(t):t===b.RIGHT?e.showNextImage(t):n.x-r>i/2?e.showNextImage():e.showPreviousImage()})}_setupHoverEvents(e){I(this._slideshowContainerElement,"mouseenter",()=>{e.forEach(t=>{a(t,"opacity",`${$e}`)})}),I(this._slideshowContainerElement,"mouseleave",()=>{e.forEach(t=>{a(t,"opacity","0")})})}_setupKeyEvents(e){U(t=>{switch(X(t)){case"ArrowRight":e.showNextImage();break;case"ArrowLeft":e.showPreviousImage();break}})}_setupFullscreenKeyEvents(e){U(t=>{switch(X(t)){case"Escape":e.deActivate();break;case"f":e.isActive()?e.deActivate():e.activate();break}})}_createFullscreenButton(){const e=d("div");return v(e,tt),_(e,M.gallery__fullscreen_btn),_(e,f.fade),y(e,this._slideshowContainerElement),e}_setupFullscreenClickEvent(e,t){I(t,"pointerdown",n=>{n.stopPropagation()}),I(t,"pointerup",n=>{n.stopPropagation(),e.isActive()||(e.activate(),a(t,"display","none"))})}_setupFullscreenChangedHandler(e,t){e.addChangedCallback(n=>{n?a(t,"display","none"):g(t,"display")})}}function _e(s,e,t){if(typeof s!="string")throw new Error("createGallery - first parameter must be containerSelector string");if(typeof e!="string")throw new Error("createGallery - second parameter must be imageSelector string");t&&ue(t);const n=L(e),i=T(s);if(i&&n.length>0){const r=A.fromContainerAndImages(i,n,t).addPreviousNextButtons().addFullscreen();if(t!=null&&t.thumbSelector&&(t!=null&&t.thumbContainerSelector)){const h=T(t.thumbContainerSelector),m=L(t.thumbSelector);h&&m&&(m.length>1?r.addThumbScroller(h,m,t):a(h,"display","none"))}return r.build()}else throw new Error("createGallery - no images selected")}function st(s,e){if(typeof s!="string")throw new Error("createFullscreenOnlyGallery - first parameter must be imageSelector string");H(e);const t=L(s);if((t==null?void 0:t.length)>0)return A.fromImages(t,e).addPreviousNextButtons().addFullscreen().build();throw new Error("createFullscreenOnlyGallery - no images selected")}const N=class N extends HTMLElement{connectedCallback(){const e=`mbg__custom-gallery-${N.classCounter++}`;this.classList.add(e);const t=this.getAttribute("numberOfVisibleThumbs"),n=this.getAttribute("preloaderBeforeSize"),i=this.getAttribute("preloaderAfterSize"),r=_e(`.${e} mbg-slideshow`,`.${e} mbg-slideshow img`,{scaleMode:u.FIT_ASPECT,thumbContainerSelector:`.${e} mbg-thumbs`,thumbSelector:`.${e} mbg-thumbs img`,numberOfVisibleThumbs:t?+t:void 0,preloaderBeforeSize:n?+n:void 0,preloaderAfterSize:i?+i:void 0}),h=document.querySelector("mbg-title");if(h){const m=r.getImageViewer().getImageInfo(r.getImageViewer().getImageIndex());m&&(h.innerHTML=m.getTitle()),r.getImageViewer().addImageChangedCallback((B,o)=>{h.innerHTML=o.getTitle()})}}};l(N,"classCounter",0);let G=N;class nt extends HTMLElement{}class it extends HTMLElement{}class rt extends HTMLElement{}return customElements.define("mbg-gallery",G),customElements.define("mbg-slideshow",nt),customElements.define("mbg-thumbs",it),customElements.define("mbg-title",rt),c.EImageScaleMode=u,c.createFullscreenOnlyGallery=st,c.createGallery=_e,c.createSlideshow=Ze,c.createThumbsScroller=je,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c}({});
