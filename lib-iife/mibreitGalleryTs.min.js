var lt=Object.defineProperty;var at=(_,w,m)=>w in _?lt(_,w,{enumerable:!0,configurable:!0,writable:!0,value:m}):_[w]=m;var o=(_,w,m)=>at(_,typeof w!="symbol"?w+"":w,m);var mibreitGalleryTs=function(_){"use strict";var w=document.createElement("style");w.textContent=`.mbg__img_stage{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:hidden}.mbg__img_stage__zoom{-webkit-transition:transform 10s linear;-moz-transition:transform 10s linear;-o-transition:transform 10s linear;transition:transform 10s linear;-webkit-transform:scale(1.125);-moz-transform:scale(1.125);-o-transform:scale(1.125);transform:scale(1.125)}.mbg__fade{-webkit-transition:opacity .75s ease-out;-moz-transition:opacity .75s ease-out;-o-transition:opacity .75s ease-out;transition:opacity .75s ease-out}.mbg__transition{-webkit-transition:all .75s ease-out;-moz-transition:all .75s ease-out;-o-transition:all .75s ease-out;transition:all .75s ease-out}.mbg__thumb_stage{margin:.25rem;position:relative;flex-shrink:0;-webkit-box-shadow:0px 0px 5px 0px rgba(0,0,0,.5);box-shadow:0 0 5px #00000080}.mbg__thumb_stage:hover{transform:scale(1.1)}.mbg__thumbs_wrapper__parent{display:flex;flex-direction:row;align-items:center}.mbg__thumbs_wrapper__parent svg{width:3rem;height:3rem;fill:#727f88}.mbg__thumbs_wrapper{height:100%;width:100%;overflow:hidden}.mbg__thumbs_wrapper__centered{height:100%;width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center}.mbg__hscroller{height:100%;display:flex;flex-direction:row;align-items:center;-webkit-transition:transform .6s ease-in-out;-moz-transition:transform .6s ease-in-out;-o-transition:transform .6s ease-in-out;transition:transform .6s ease-in-out}.mbg__thumbs_scroller__previous_btn,.mbg__thumbs_scroller__next_btn{margin-right:.5rem;margin-left:.5rem}.mbg__thumbs_scroller__previous_btn>svg{transform:scaleX(-1)}.mbg__fullscreen{position:fixed;box-sizing:border-box;background-color:#181818;-webkit-transition:background-color .75s ease-in-out;-moz-transition:background-color .75s ease-in-out;-o-transition:background-color .75s ease-in-out;transition:background-color .75s ease-in-out;overflow:hidden;top:0;left:0;padding:1rem;width:100%;height:100%;z-index:100;display:flex;flex-direction:column}.mbg__fullscreen>div>.mbg__img_stage{overflow:visible}.mbg__fullscreen>div>.mbg__img_stage img{-webkit-box-shadow:0px 0px 15px 0px rgba(0,0,0,.5);box-shadow:0 0 15px #00000080}.mbg__fullscreen>.mbg__fullscreen__exit_btn{position:absolute;width:3rem;height:3rem;right:1rem;top:1rem;z-index:3}.mbg__fullscreen>.mbg__fullscreen__exit_btn>svg{opacity:.75}.mbg__gallery__fullscreen_btn{position:absolute;z-index:2;width:2rem;height:2rem;right:.25rem;top:.25rem;opacity:0}.mbg__gallery__previous_btn{position:absolute;z-index:2;top:50%;opacity:0}.mbg__gallery__next_btn{position:absolute;z-index:2;top:50%;right:0rem;opacity:0}.mbg__gallery__next_btn>svg{width:3rem;height:3rem;margin-top:-1.5rem;fill:#727f88}.mbg__gallery__previous_btn>svg{transform:scaleX(-1);width:3rem;height:3rem;margin-top:-1.5rem;fill:#727f88}
`,document.head.appendChild(w);var m=(s=>(s[s.NONE=0]="NONE",s[s.FIT_ASPECT=1]="FIT_ASPECT",s[s.STRETCH=2]="STRETCH",s[s.EXPAND=3]="EXPAND",s))(m||{});function M(s){if(typeof s.numberOfVisibleThumbs<"u"&&(typeof s.numberOfVisibleThumbs!="number"||s.numberOfVisibleThumbs<0))throw new Error("checkThumbScrollerConfig - numberOfVisibleThumbs is invalid number");if(typeof s.initialIndex<"u"&&(typeof s.initialIndex!="number"||s.initialIndex<0))throw new Error("checkThumbScrollerConfig - config initialIndex should be of type number")}function V(s){if(typeof s.scaleMode<"u"&&(typeof s.scaleMode!="number"||s.scaleMode<0||s.scaleMode>3))throw new Error("checkSlideshowConfig - config scaleMode should be of type EImageScaleMode (number 0 - 3)");if(typeof s.interval<"u"&&(typeof s.interval!="number"||s.interval<1e3))throw new Error("checkSlideshowConfig - config interval should be of type number and larger than 1000");if(typeof s.zoom<"u"&&typeof s.zoom!="boolean")throw new Error("checkSlideshowConfig - config zoom should be of type boolean");if(typeof s.preloaderAfterSize<"u"&&(typeof s.preloaderAfterSize!="number"||s.preloaderAfterSize<0))throw new Error("checkSlideshowConfig - config preloaderAfterSize should be of type number");if(typeof s.preloaderBeforeSize<"u"&&(typeof s.preloaderBeforeSize!="number"||s.preloaderBeforeSize<0))throw new Error("checkSlideshowConfig - config preloaderBeforeSize should be of type number")}function he(s){if(V(s),M(s),typeof s.thumbContainerSelector<"u"&&typeof s.thumbContainerSelector!="string")throw new Error("checkGalleryConfig - invalid thumbContainerSelector");if(typeof s.thumbSelector<"u"&&typeof s.thumbSelector!="string")throw new Error("checkGalleryConfig - invalid thumbSelector")}function ue(){return parseFloat(window.getComputedStyle(document.body).getPropertyValue("font-size"))}function c(s){return document.createElement(s)}function _e(s){return s.cloneNode()}function C(s){s.remove()}function $(s,e){e.prepend(s)}function E(s,e){e.appendChild(s)}function N(s,e){e.parentElement.insertBefore(s,e)}function Z(s){for(var e=s.childNodes,t=new Array,r=0;r<e.length;++r)t.push(e[r]);return t}function v(s,e){s.innerHTML=e}function B(s,e){s[0].parentNode.insertBefore(e,s[0]),s.forEach(function(t){e.appendChild(t)})}function z(s){var e=s.getBoundingClientRect();return{width:e.width,height:e.height}}function me(s){var e=s.getBoundingClientRect(),t=window.innerHeight,r=window.innerWidth;return e.top+e.height>0&&e.top<t&&e.left+e.width>0&&e.left<r}function ce(s){var e=s.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{y:e.top+r,x:e.left+t}}function de(s){return x(s,"class")}function u(s,e){s.classList.contains(e)||s.classList.add(e)}function S(s,e){s.classList.contains(e)&&s.classList.remove(e)}function ge(s,e){return window.getComputedStyle(s).getPropertyValue(e)}function l(s,e,t){s.style.setProperty(e,t)}function d(s,e){s.style.removeProperty(e),s.style.length===0&&s.removeAttribute("style")}function be(s){s.hasAttribute("style")&&s.removeAttribute("style")}function fe(s,e){e==null?be(s):s.style.cssText=e}function x(s,e){return s.hasAttribute(e)?s.getAttribute(e):null}function pe(s,e,t){s.setAttribute(e,t)}function we(s,e){s.removeAttribute(e)}function O(s,e){s.addEventListener("click",e)}function U(s){document.addEventListener("keydown",s)}function ye(s){window.addEventListener("resize",s)}function I(s,e,t){s.addEventListener(e,t)}function Ee(s){s.addEventListener("contextmenu",function(e){e.preventDefault()})}function ve(s){s.addEventListener("dragstart",function(e){e.preventDefault()})}function T(s){return document.querySelector(s)}function L(s){return document.querySelectorAll(s)}function q(s){return s.key}var Se=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(h){h(i)})}return new(t||(t=Promise))(function(i,h){function b(p){try{a(r.next(p))}catch(G){h(G)}}function D(p){try{a(r.throw(p))}catch(G){h(G)}}function a(p){p.done?i(p.value):n(p.value).then(b,D)}a((r=r.apply(s,e||[])).next())})},Ie=function(s,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,h;return h={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function b(a){return function(p){return D([a,p])}}function D(a){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(t=0)),t;)try{if(r=1,n&&(i=a[0]&2?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,n=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=e.call(s,t)}catch(p){a=[6,p],n=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ce=5,X=function(){function s(e,t,r){t===void 0&&(t=0),r===void 0&&(r=Ce),this._unloadedElementIndices=[],this._currentIndex=-1,this._elementLoaders=e,this._preloaderBeforeSize=t,this._preloaderAfterSize=r,this._updateUnloadedElementIndices()}return s.prototype.loadAll=function(){this._loadElements(0,this._elementLoaders.length)},s.prototype.setCurrentIndex=function(e){this._currentIndex!=e&&(this._currentIndex=e,this._moveWindow())},s.prototype.loadElement=function(e){return Se(this,void 0,void 0,function(){var t,r,n;return Ie(this,function(i){switch(i.label){case 0:return e>=0&&e<this._elementLoaders.length?(t=!1,this._unloadedElementIndices.includes(e)?[3,1]:(t=!0,[3,5])):[3,6];case 1:i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._elementLoaders[e].load()];case 3:return t=i.sent(),t&&(r=this._unloadedElementIndices.indexOf(e),r>-1&&this._unloadedElementIndices.splice(r,1)),[3,5];case 4:return n=i.sent(),t=n,[3,5];case 5:return[2,t];case 6:throw new Error("Preloader#loadElement -> invalid Index ".concat(e))}})})},s.prototype.getElementLoaderInfos=function(){return this._elementLoaders},s.prototype.getUnloadedElementIndices=function(){return this._unloadedElementIndices},s.prototype._moveWindow=function(){if(this._unloadedElementIndices.length){var e=this._currentIndex-this._preloaderBeforeSize,t=this._currentIndex+this._preloaderAfterSize;this._loadElements(this._currentIndex,t<this._elementLoaders.length?t:this._elementLoaders.length),this._loadElements(e>=0?e:0,this._currentIndex),e<0&&(e=this._elementLoaders.length+e,this._loadElements(e,this._elementLoaders.length)),t>=this._elementLoaders.length&&(t=t-this._elementLoaders.length,this._loadElements(0,t))}},s.prototype._loadElements=function(e,t){for(var r=e<0?0:e;r<t&&r<this._elementLoaders.length;r++)this.loadElement(r)},s.prototype._updateUnloadedElementIndices=function(){for(var e=0;e<this._elementLoaders.length;e++)this._elementLoaders[e].wasLoaded()||this._unloadedElementIndices.push(e)},s}(),K="mibreit-LazyLoader_lazy",Y="mibreit-LazyLoader_ElementLoader_animate",j="data-src",xe="src",y;(function(s){s[s.INACTIVE=0]="INACTIVE",s[s.LOADING=1]="LOADING",s[s.LOADED=2]="LOADED"})(y||(y={}));var Te=function(){function s(e){var t;this._state=y.INACTIVE,this._wasLoadedCallbacks=new Array,this._dataSrc=null,this._element=e,this._dataSrc=x(e,j);var r=(t=de(e))===null||t===void 0?void 0:t.split(",");this._dataSrc||r&&r.includes(K)?(this._state=y.INACTIVE,this._setBaseStyle()):this._state=y.LOADED}return s.prototype.load=function(){var e=this;return new Promise(function(t,r){e._state==y.INACTIVE?(e._element.onload=function(){e._finishLoad(),t(!0)},e._triggerLoad(),e._state=y.LOADING,e._setLoadingStyle(),e._element instanceof HTMLImageElement&&e._element.complete&&(e._element.onload=null,e._finishLoad(),t(!0))):e._state===y.LOADING?r(!1):r(!0)})},s.prototype.wasLoaded=function(){return this._state===y.LOADED},s.prototype.addWasLoadedCallback=function(e){this._wasLoadedCallbacks.includes(e)||this._wasLoadedCallbacks.push(e)},s.prototype._triggerLoad=function(){this._dataSrc&&pe(this._element,xe,this._dataSrc),S(this._element,K)},s.prototype._finishLoad=function(){var e=this;we(this._element,j),this._state=y.LOADED,this._wasLoadedCallbacks.forEach(function(t){t()}),setTimeout(function(){e._setLoadedStyle()},50)},s.prototype._setBaseStyle=function(){l(this._element,"opacity","0")},s.prototype._setLoadingStyle=function(){u(this._element,Y)},s.prototype._setLoadedStyle=function(){var e=this;d(this._element,"opacity"),setTimeout(function(){S(e._element,Y)},1e3)},s}(),Le=function(){function s(e){var t=x(e,"width"),r=x(e,"height");if(t==null||r==null)throw new Error("ElementInfo#constructor - supported elements need a width and height property");var n=x(e,"class");this._element=e,this._originalElementStyle=n||"",this._width=parseInt(t),this._height=parseInt(r)}return s.prototype.getWidth=function(){return this._width},s.prototype.getHeight=function(){return this._height},s.prototype.getStyle=function(){return this._originalElementStyle},s.prototype.isElementWithinScrollArea=function(){return me(this._element)},s}(),Ae=function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ne=function(s){Ae(e,s);function e(t){var r=s.call(this,t)||this;return r._elementInfo=new Le(r._element),r}return e.prototype.getHtmlElement=function(){return this._element},e.prototype.getWidth=function(){return this._elementInfo.getWidth()},e.prototype.getHeight=function(){return this._elementInfo.getHeight()},e.prototype.getStyle=function(){return this._elementInfo.getStyle()},e.prototype.isElementWithinScrollArea=function(){return this._elementInfo.isElementWithinScrollArea()},e}(Te),J;(function(s){s[s.SIMPLE_DEFER=0]="SIMPLE_DEFER",s[s.WINDOWED_EXTERNAL=1]="WINDOWED_EXTERNAL",s[s.WINDOWED_SCROLL=2]="WINDOWED_SCROLL",s[s.WINDOWED_SCROLL_HORIZONTAL=3]="WINDOWED_SCROLL_HORIZONTAL"})(J||(J={}));const W={img_stage:"mbg__img_stage",img_stage__zoom:"mbg__img_stage__zoom"},f={fade:"mbg__fade",transition:"mbg__transition"},Q=50,ze=700;var g=(s=>(s[s.NONE=0]="NONE",s[s.LEFT=1]="LEFT",s[s.RIGHT=2]="RIGHT",s))(g||{});class Oe{constructor(e,t){o(this,"_callback");o(this,"_touchStartTime",null);o(this,"_touchStartPosition",null);o(this,"_touchStart",e=>{this._touchStartTime=Date.now(),this._touchStartPosition=this._getTouchPosition(e)});o(this,"_touchEnd",e=>{if(this._touchStartTime&&this._touchStartPosition&&Date.now()-this._touchStartTime<ze){const t=this._getTouchPosition(e),r=this._detectDirection(this._touchStartPosition,t);this._callback(r,t)}this._touchStartPosition=null,this._touchStartTime=null});this._callback=t,I(e,"pointerdown",this._touchStart),I(e,"pointerup",this._touchEnd)}_getTouchPosition(e){return{x:e.pageX,y:e.pageY}}_detectDirection(e,t){const r=e.x-t.x;return r>Q?2:r<-Q?1:0}}const P=async function(){return new Promise((s,e)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{s()})})})},Pe=1e3;class k{constructor(e,t,r){o(this,"_zoomAnimation",!1);o(this,"_imageStage");o(this,"_imageHandle");o(this,"_imageWidth");o(this,"_imageHeight");this._imageHandle=e,this._imageWidth=t,this._imageHeight=r,this._imageStage=this._createStage(),new ResizeObserver(()=>{this.reinitSize()}).observe(this._imageStage)}setZoomAnimation(e){this._zoomAnimation=e}reinitSize(){const e=z(this._imageStage);this._applyScaleModeImpl(e.width,e.height),this._centerImage(e.width,e.height)}async hideImage(e=g.NONE){this._zoomAnimation&&setTimeout(()=>{this._resetZoom()},Pe),this._stopSlideAnimation(),await P(),e==g.RIGHT?(u(this._imageStage,f.transition),l(this._imageStage,"left","-100%")):e==g.LEFT&&(u(this._imageStage,f.transition),l(this._imageStage,"left","100%")),d(this._imageStage,"opacity")}async showImage(e=g.NONE){this._zoomAnimation&&this._startZoomAnimation(),this._stopSlideAnimation(),await P(),e==g.RIGHT?(S(this._imageStage,f.transition),l(this._imageStage,"left","100%"),await P(),u(this._imageStage,f.transition),d(this._imageStage,"left")):e==g.LEFT?(S(this._imageStage,f.transition),l(this._imageStage,"left","-100%"),await P(),u(this._imageStage,f.transition),d(this._imageStage,"left")):(S(this._imageStage,f.transition),d(this._imageStage,"left")),l(this._imageStage,"opacity","1")}_createStage(){const e=c("div");return u(e,W.img_stage),u(e,f.fade),B([this._imageHandle],e),e}_centerImage(e,t){const{width:r,height:n}=z(this._imageHandle),i=(r+e)/2-r,h=(n+t)/2-n;l(this._imageHandle,"margin-left",`${i}px`),l(this._imageHandle,"margin-top",`${h}px`)}_startZoomAnimation(){u(this._imageHandle,W.img_stage__zoom)}_resetZoom(){S(this._imageHandle,W.img_stage__zoom)}_stopSlideAnimation(){l(this._imageStage,"margin-left",ge(this._imageStage,"margin-left"))}}class ke extends k{constructor(e,t,r){super(e,t,r)}_applyScaleModeImpl(e,t){const r=this._imageWidth/this._imageHeight;let n="auto",i="auto";e/t>r?t<=this._imageHeight&&(i="100%"):e<=this._imageWidth&&(n="100%"),l(this._imageHandle,"width",n),l(this._imageHandle,"height",i)}}class ee extends k{constructor(e,t,r){super(e,t,r)}_applyScaleModeImpl(e,t){const r=this._imageWidth/this._imageHeight,n=e/t;n>r?(l(this._imageHandle,"width","100%"),l(this._imageHandle,"height",`${100/r*n}%`)):(l(this._imageHandle,"width",`${r*100/n}%`),l(this._imageHandle,"height","100%"))}}class Ve extends k{constructor(e,t,r){super(e,t,r)}_applyScaleModeImpl(e,t){l(this._imageHandle,"width","100%"),l(this._imageHandle,"height","100%")}}class Be extends k{constructor(e,t,r){super(e,t,r)}_applyScaleModeImpl(e,t){d(this._imageHandle,"width"),d(this._imageHandle,"height")}}function We(s,e,t,r=m.FIT_ASPECT){switch(r){case m.EXPAND:return new ee(s,e,t);case m.FIT_ASPECT:return new ke(s,e,t);case m.STRETCH:return new Ve(s,e,t);case m.NONE:default:return new Be(s,e,t)}}class Fe{constructor(e,t=m.FIT_ASPECT){o(this,"_currentIndex",-1);o(this,"_imageStages",[]);o(this,"_images");o(this,"_imageChangedCallbacks",new Array);this._images=e,this._prepareImageStages(e,t)}showImage(e){return this._showImage(e)}showNextImage(e){const t=this._currentIndex<this._imageStages.length-1?this._currentIndex+1:0;return this._showImage(t,e)}showPreviousImage(e){const t=this._currentIndex>0?this._currentIndex-1:this._imageStages.length-1;return this._showImage(t,e)}getNumberOfImages(){return this._imageStages.length}setZoomAnimation(e){this._imageStages.forEach(t=>{t.setZoomAnimation(e)})}addImageChangedCallback(e){this._imageChangedCallbacks.includes(e)||this._imageChangedCallbacks.push(e)}getImageIndex(){return this._currentIndex}getImageInfo(e){return this._isValidIndex(e)?this._images[e]:null}getImageElement(e){return this._isValidIndex(e)?this._images[e].getHtmlElement():null}_showImage(e,t=g.NONE){return this._isValidIndex(e)?(e!=this._currentIndex&&(this._images[e].wasLoaded()?(this._hideImage(this._currentIndex,t),this._changeCurrentImage(e,t)):this._images[e].addWasLoadedCallback(()=>{this._hideImage(this._currentIndex,t),this._changeCurrentImage(e,t)})),!0):!1}_hideImage(e,t=g.NONE){this._isValidIndex(e)&&this._imageStages[this._currentIndex].hideImage(t)}_prepareImageStages(e,t){e.forEach(r=>{const n=We(r.getHtmlElement(),r.getWidth(),r.getHeight(),t);r.addWasLoadedCallback(()=>{n.reinitSize()}),this._imageStages.push(n)})}_isValidIndex(e){return e>=0&&e<this._imageStages.length}_changeCurrentImage(e,t=g.NONE){this._currentIndex=e,this._imageStages[this._currentIndex].showImage(t),this._imageChangedCallbacks.forEach(r=>{r(this._currentIndex,this._images[this._currentIndex])})}}class Re{constructor(e,t){o(this,"_imageViewer");o(this,"_loader");this._imageViewer=e,this._loader=t}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}}const te="title",se="data-title",He=7,De=3,Ge=7,Me=.5;class re extends Ne{constructor(t){super(t);o(this,"_title","");this._prepareTitle(t),this._limitMaxSizeTo(t,this.getWidth(),this.getHeight()),Ee(t),ve(t)}getTitle(){return this._title}getUrl(){return this._element.hasAttribute("data-src")?this._element.getAttribute("data-src"):this._element.getAttribute("src")}_limitMaxSizeTo(t,r,n){fe(t,`max-width: ${r}px; max-height: ${n}px`)}_prepareTitle(t){let r=t.getAttribute(te);r?(t.setAttribute(se,r),t.removeAttribute(te)):r=t.getAttribute(se),this._title=r||""}}class F{constructor(e,t){o(this,"_imageViewer");o(this,"_lazyLoader");const r=this._createImagesArray(e);this._lazyLoader=this._createLoader(r,t==null?void 0:t.preloaderBeforeSize,t==null?void 0:t.preloaderAfterSize),this._imageViewer=this._createImageViewer(r,this._lazyLoader,t==null?void 0:t.scaleMode,t==null?void 0:t.zoom),t!=null&&t.interval&&setInterval(()=>{this._imageViewer.showNextImage()},t.interval),this._imageViewer.showImage(0)}build(){return new Re(this._imageViewer,this._lazyLoader)}_createImagesArray(e){const t=new Array;for(let r=0;r<e.length;r++){const n=new re(e[r]);t.push(n)}return t}_createLoader(e,t=De,r=He){const n=new X(e,t,r);return setTimeout(()=>{n.loadElement(0),n.setCurrentIndex(0)},0),n}_createImageViewer(e,t,r,n){const i=new Fe(e,r);return n!==void 0&&i.setZoomAnimation(n),t&&(i.addImageChangedCallback((h,b)=>{t.setCurrentIndex(h)}),t.setCurrentIndex(0)),i}}function $e(s,e){if(typeof s!="string")throw new Error("createSlideshow - second parameter must be imageSelector string");const t=L(s);if((t==null?void 0:t.length)>0)return e&&V(e),new F(t,e).build();throw new Error("createSlideshow - no images selected")}const Ze={thumb_stage:"mbg__thumb_stage"};class Ue extends ee{constructor(e,t,r){super(e,t,r),u(this._imageStage,Ze.thumb_stage)}addStageClickedCallback(e){O(this._imageStage,e)}}const R={thumbs_wrapper__parent:"mbg__thumbs_wrapper__parent",thumbs_wrapper:"mbg__thumbs_wrapper",thumbs_wrapper__centered:"mbg__thumbs_wrapper__centered"};class qe{constructor(e,t){o(this,"_wrapper");o(this,"_thumbSizeRem");o(this,"_thumbs");o(this,"_numberOfVisibleThumbs");u(e,R.thumbs_wrapper__parent),this._numberOfVisibleThumbs=t,this._thumbs=Array.from(e.children);const r=t>=this._thumbs.length;this._wrapper=this._wrapThumbs(Z(e),r),this._thumbSizeRem=this._calculateThumbsize(this._wrapper,t),this._resizeThumbs(this._thumbSizeRem)}reinitSize(){this._thumbSizeRem=this._calculateThumbsize(this._wrapper,this._numberOfVisibleThumbs),this._resizeThumbs(this._thumbSizeRem)}getThumbSizeRem(){return this._thumbSizeRem}getNumberOfVisibleThumbs(){return this._numberOfVisibleThumbs}getNumberOfThumbs(){return this._thumbs.length}getElements(){return Z(this._wrapper)}_wrapThumbs(e,t){const r=c("div");return t?u(r,R.thumbs_wrapper__centered):u(r,R.thumbs_wrapper),B(e,r),r}_calculateThumbsize(e,t){const r=ue();return z(e).width/r/t}_resizeThumbs(e){const t=e*.9,r=e*.05;for(let n=0;n<this._thumbs.length;++n)l(this._thumbs[n],"width",`${t}rem`),l(this._thumbs[n],"height",`${t}rem`),l(this._thumbs[n],"margin",`${r}rem`)}}function Xe(s,e){const t=new Array;return s.forEach((r,n)=>{const i=new Ue(r.getHtmlElement(),r.getWidth(),r.getHeight());r.addWasLoadedCallback(()=>{i.reinitSize()}),i.showImage(),e&&i.addStageClickedCallback(()=>{e(n)}),t.push(i)}),t}function Ke(s,e,t=Ge,r){return Xe(e,r),new qe(s,t)}const Ye={hscroller:"mbg__hscroller"};class je{constructor(e){o(this,"_scroller");this._scroller=this._createScroller(e)}scrollTo(e,t=!1){let r;return t?r=`${e}rem`:r=`${e}px`,l(this._scroller,"transform",`translate(${r})`),!0}_createScroller(e){const t=c("div");return u(t,Ye.hscroller),B(e,t),t}}class Je{constructor(e){o(this,"_scroller");o(this,"_thumbsWrapper");o(this,"_scrollIndexChangedCallbacks",new Array);o(this,"_currentScrollIndex",0);this._thumbsWrapper=e,this._scroller=new je(e.getElements())}reinitSize(){this._thumbsWrapper.reinitSize(),this.setCenterThumb(this._currentScrollIndex,!1)}setCenterThumb(e,t=!0){let r=e;t&&(r-=Math.floor(this._thumbsWrapper.getNumberOfVisibleThumbs()/2));const n=this._normalizeIndex(r);this._currentScrollIndex=n;const i=-n*this._thumbsWrapper.getThumbSizeRem();this._scroller.scrollTo(i,!0),this._scrollIndexChangedCallbacks.forEach(h=>{h(this._currentScrollIndex)})}scrollNext(){let e=this._currentScrollIndex+this._thumbsWrapper.getNumberOfVisibleThumbs();const t=this._thumbsWrapper.getNumberOfThumbs()-this._thumbsWrapper.getNumberOfVisibleThumbs();this._currentScrollIndex===t?e=0:e>=t&&(e=t),this.setCenterThumb(e,!1)}scrollPrevious(){let e=this._currentScrollIndex-this._thumbsWrapper.getNumberOfVisibleThumbs();const t=this._thumbsWrapper.getNumberOfThumbs()-this._thumbsWrapper.getNumberOfVisibleThumbs();this._currentScrollIndex===0?e=t:e<0&&(e=0),this.setCenterThumb(e,!1)}addScrollIndexChangedCallback(e){this._scrollIndexChangedCallbacks.includes(e)||this._scrollIndexChangedCallbacks.push(e)}_normalizeIndex(e){const t=this._thumbsWrapper.getNumberOfThumbs()-this._thumbsWrapper.getNumberOfVisibleThumbs();return e>=t?t:e<0?0:e}}const ne={thumbs_scroller__previous_btn:"mbg__thumbs_scroller__previous_btn",thumbs_scroller__next_btn:"mbg__thumbs_scroller__next_btn"},ie='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1152 896q0 26-19 45l-448 448q-19 19-45 19t-45-19-19-45v-896q0-26 19-45t45-19 45 19l448 448q19 19 19 45z"/></svg>',Qe=7;class oe{constructor(e,t,r,n){o(this,"_thumbContainerElement");o(this,"_previousButtonElement");o(this,"_nextButtonElement");o(this,"_thumbsWrapper");o(this,"_lazyLoader");o(this,"_initialIndex");this._thumbContainerElement=e;const i=r!=null&&r.numberOfVisibleThumbs?r.numberOfVisibleThumbs:Qe;this._initialIndex=r==null?void 0:r.initialIndex;const h=this._createThumbsArray(t);this._lazyLoader=new X(h,i,i),this._thumbsWrapper=Ke(e,h,i,n)}addPreviousNextButtons(){return this._thumbsWrapper.getNumberOfVisibleThumbs()<this._thumbsWrapper.getNumberOfThumbs()&&([this._previousButtonElement,this._nextButtonElement]=this._createPreviousNextButtons(this._thumbContainerElement)),this}build(){if(this._thumbsWrapper.reinitSize(),this._thumbsWrapper.getNumberOfVisibleThumbs()<this._thumbsWrapper.getNumberOfThumbs()){const e=this._createThumbsViewer(this._thumbsWrapper,this._lazyLoader,this._initialIndex);return this._previousButtonElement&&this._nextButtonElement&&this._addThumbsViewerInteraction(e,this._previousButtonElement,this._nextButtonElement),e}else return setTimeout(()=>{this._lazyLoader.loadElement(0),this._lazyLoader.setCurrentIndex(0)},0),null}_createThumbsArray(e){const t=new Array;for(let r=0;r<e.length;r++){const n=new re(e[r]);t.push(n)}return t}_createThumbsViewer(e,t,r=0){const n=new Je(e);return n.addScrollIndexChangedCallback(i=>{t.setCurrentIndex(i)}),n.setCenterThumb(r),n}_createPreviousNextButtons(e){const t=c("div");v(t,ie),u(t,ne.thumbs_scroller__previous_btn),$(t,e);const r=c("div");return v(r,ie),u(r,ne.thumbs_scroller__next_btn),E(r,e),[t,r]}_addThumbsViewerInteraction(e,t,r){O(r,()=>{e.scrollNext()}),O(t,()=>{e.scrollPrevious()})}}function et(s,e,t,r){if(typeof s!="string")throw new Error("createThumbsViewer - first parameter must be containerSelector string");if(typeof e!="string")throw new Error("createThumbsViewer - second parameter must be imageSelector string");t&&M(t);const n=L(e),i=T(s);if(i&&(n==null?void 0:n.length)>0)return new oe(i,n,t,r).addPreviousNextButtons().build();throw new Error("createThumbsViewer - no images selected")}class tt{constructor(e,t,r,n){o(this,"_imageViewer");o(this,"_loader");o(this,"_fullscreenContainer",null);o(this,"_thumbsViewer",null);this._imageViewer=e,this._loader=t,this._thumbsViewer=r,this._fullscreenContainer=n}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}getThumbsViewer(){return this._thumbsViewer}getFullscreen(){return this._fullscreenContainer}}const le={fullscreen:"mbg__fullscreen",img_stage:"mbg__img_stage",fullscreen__exit_btn:"mbg__fullscreen__exit_btn"},st='<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';class rt{constructor(e,t=null,r=!0){o(this,"_changedCallbacks",[]);o(this,"_active");o(this,"_slideshowContainerElement");o(this,"_thumbsContainerElement",null);o(this,"_fullScreenContainerElement");o(this,"_slideshowContainerPlaceholderElement");o(this,"_thumbsContainerPlaceholderElement",null);o(this,"_closeButtonElement");o(this,"_usePlaceholder");this._active=!1,this._slideshowContainerElement=e,this._thumbsContainerElement=t,this._usePlaceholder=r,this._fullScreenContainerElement=this._createFullscreenContainer(),this._closeButtonElement=this._createFullscreenCloseButton(this._fullScreenContainerElement),this._slideshowContainerPlaceholderElement=this._createSlideshowContainerPlaceholder(),t&&(this._thumbsContainerPlaceholderElement=this._createThumbsContainerPlaceholder())}activate(){this._active||(this._moveGalleryToFullscreen(),this._moveThumbsToFullscreen(),this._addFullscreen(),this._setupCloseButtonHandler(),this._active=!0,this._changedCallbacks.forEach(e=>{e(!0)}))}deActivate(){this._active&&(this._removeGalleryFromFullscreen(),this._removeThumbsFromFullscreen(),this._removeFullscreen(),this._active=!1,this._changedCallbacks.forEach(e=>{e(!1)}))}addChangedCallback(e){this._changedCallbacks.includes(e)||this._changedCallbacks.push(e)}isActive(){return this._active}setBackgroundColor(e){l(this._fullScreenContainerElement,"background-color",e)}_createFullscreenContainer(){const e=c("div");return u(e,le.fullscreen),e}_createFullscreenCloseButton(e){const t=c("div");return v(t,st),u(t,le.fullscreen__exit_btn),E(t,e),t}_createSlideshowContainerPlaceholder(){return c("div")}_createThumbsContainerPlaceholder(){return c("div")}_addFullscreen(){const e=T("body");e!=null&&E(this._fullScreenContainerElement,e)}_removeFullscreen(){C(this._fullScreenContainerElement)}_moveGalleryToFullscreen(){this._usePlaceholder&&N(this._slideshowContainerPlaceholderElement,this._slideshowContainerElement),E(this._slideshowContainerElement,this._fullScreenContainerElement),l(this._slideshowContainerElement,"width","100%"),l(this._slideshowContainerElement,"flex-grow","1")}_removeGalleryFromFullscreen(){C(this._slideshowContainerElement),this._usePlaceholder&&(N(this._slideshowContainerElement,this._slideshowContainerPlaceholderElement),C(this._slideshowContainerPlaceholderElement)),d(this._slideshowContainerElement,"width"),d(this._slideshowContainerElement,"flex-grow")}_moveThumbsToFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(this._usePlaceholder&&N(this._thumbsContainerPlaceholderElement,this._thumbsContainerElement),E(this._thumbsContainerElement,this._fullScreenContainerElement),l(this._thumbsContainerElement,"flex-grow","0"))}_removeThumbsFromFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(C(this._thumbsContainerElement),this._usePlaceholder&&(N(this._thumbsContainerElement,this._thumbsContainerPlaceholderElement),C(this._thumbsContainerPlaceholderElement)),d(this._thumbsContainerElement,"flex-grow"))}_setupCloseButtonHandler(){O(this._closeButtonElement,e=>{e==null||e.stopPropagation(),this._active&&this.deActivate()})}}const ae='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"/></svg>',nt='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2,9 L0,9 L0,14 L5,14 L5,12 L2,12 L2,9 L2,9 Z M0,5 L2,5 L2,2 L5,2 L5,0 L0,0 L0,5 L0,5 Z M12,12 L9,12 L9,14 L14,14 L14,9 L12,9 L12,12 L12,12 Z M9,0 L9,2 L12,2 L12,5 L14,5 L14,0 L9,0 L9,0 Z"/></svg>',H={gallery__fullscreen_btn:"mbg__gallery__fullscreen_btn",gallery__previous_btn:"mbg__gallery__previous_btn",gallery__next_btn:"mbg__gallery__next_btn"};class A{constructor(e,t,r=!1){o(this,"_slideshowContainerElement");o(this,"_fullScreenOnly");o(this,"_slideshow");o(this,"_thumbsViewer",null);o(this,"_fullscreen",null);this._slideshowContainerElement=e,this._slideshow=t,this._fullScreenOnly=r}static fromContainerAndImages(e,t,r){const n=new F(t,r).build();return new A(e,n)}static fromImages(e,t){const r=c("div");l(r,"display","none"),e.forEach(b=>{E(_e(b),r)});const n=T("body");E(r,n);const i=r.children,h=new F(i,t).build();return new A(r,h,!0)}addPreviousNextButtons(){const{previousButton:e,nextButton:t}=this._createPreviousNextButtons(this._slideshowContainerElement);return this._setupHoverEvents(this._slideshowContainerElement,[e,t]),this}addFullscreen(){this._fullscreen=new rt(this._slideshowContainerElement);const e=this._createFullscreenButton(this._slideshowContainerElement);return this._setupHoverEvents(this._slideshowContainerElement,[e]),this._setupFullscreenKeyEvents(this._fullscreen),this._setupFullscreenClickEvent(e,this._fullscreen),this._setupFullscreenChangedHandler(this._fullscreen,e),this._fullScreenOnly&&this._fullscreen.addChangedCallback(t=>{t?d(this._slideshowContainerElement,"display"):l(this._slideshowContainerElement,"display","none")}),this}addThumbScroller(e,t,r){return this._thumbsViewer=new oe(e,t,r,n=>{this._slideshow.getLoader().setCurrentIndex(n),this._slideshow.getImageViewer().showImage(n)}).addPreviousNextButtons().build(),this._thumbsViewer&&(this._setupThumbsViewerResizeHandler(this._thumbsViewer),this._slideshow.getImageViewer().addImageChangedCallback((n,i)=>{this._thumbsViewer.setCenterThumb(n,!0)})),this}build(){return this._setupSwipeHandler(this._slideshowContainerElement,this._slideshow.getImageViewer()),this._setupKeyEvents(this._slideshow.getImageViewer()),new tt(this._slideshow.getImageViewer(),this._slideshow.getLoader(),this._thumbsViewer,this._fullscreen)}_createPreviousNextButtons(e){const t=c("div");v(t,ae),u(t,H.gallery__previous_btn),u(t,f.fade),$(t,e);const r=c("div");return v(r,ae),u(r,H.gallery__next_btn),u(r,f.fade),E(r,e),{previousButton:t,nextButton:r}}_setupSwipeHandler(e,t){l(e,"touch-action","pinch-zoom pan-y"),new Oe(e,(r,n)=>{const i=z(e).width,h=ce(e).x;r===g.LEFT?t.showPreviousImage(r):r===g.RIGHT?t.showNextImage(r):n.x-h>i/2?t.showNextImage():t.showPreviousImage()})}_setupThumbsViewerResizeHandler(e){ye(()=>{})}_setupHoverEvents(e,t){I(e,"mouseenter",()=>{t.forEach(r=>{l(r,"opacity",`${Me}`)})}),I(e,"mouseleave",()=>{t.forEach(r=>{l(r,"opacity","0")})})}_setupKeyEvents(e){U(t=>{switch(q(t)){case"ArrowRight":e.showNextImage();break;case"ArrowLeft":e.showPreviousImage();break}})}_setupFullscreenKeyEvents(e){U(t=>{switch(q(t)){case"Escape":e.deActivate();break;case"f":e.isActive()?e.deActivate():e.activate();break}})}_createFullscreenButton(e){const t=c("div");return v(t,nt),u(t,H.gallery__fullscreen_btn),u(t,f.fade),E(t,e),t}_setupFullscreenClickEvent(e,t){I(e,"pointerdown",r=>{r.stopPropagation()}),I(e,"pointerup",r=>{r.stopPropagation(),t.isActive()||(t.activate(),l(e,"display","none"))})}_setupFullscreenChangedHandler(e,t){e.addChangedCallback(r=>{r?l(t,"display","none"):d(t,"display")})}}function it(s,e,t){if(typeof s!="string")throw new Error("createGallery - first parameter must be containerSelector string");if(typeof e!="string")throw new Error("createGallery - second parameter must be imageSelector string");t&&he(t);const r=L(e),n=T(s);if(n&&(r==null?void 0:r.length)>0){const i=A.fromContainerAndImages(n,r,t).addPreviousNextButtons().addFullscreen();if(t!=null&&t.thumbSelector&&(t!=null&&t.thumbContainerSelector)){const h=T(t.thumbContainerSelector),b=L(t.thumbSelector);h&&b&&(b.length>1?i.addThumbScroller(h,b,t):l(h,"display","none"))}return i.build()}else throw new Error("createGallery - no images selected")}function ot(s,e){if(typeof s!="string")throw new Error("createFullscreenOnlyGallery - first parameter must be imageSelector string");V(e);const t=L(s);if((t==null?void 0:t.length)>0)return A.fromImages(t,e).addPreviousNextButtons().addFullscreen().build();throw new Error("createFullscreenOnlyGallery - no images selected")}return _.EImageScaleMode=m,_.createFullscreenOnlyGallery=ot,_.createGallery=it,_.createSlideshow=$e,_.createThumbsScroller=et,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),_}({});
