var ot=Object.defineProperty;var at=(c,p,m)=>p in c?ot(c,p,{enumerable:!0,configurable:!0,writable:!0,value:m}):c[p]=m;var l=(c,p,m)=>at(c,typeof p!="symbol"?p+"":p,m);var mibreitGalleryTs=function(c){"use strict";var p=document.createElement("style");p.textContent=`mbg-gallery,mbg-slideshow,mbg-thumbs,mbg-title{position:relative;overflow:hidden;display:block}mbg-title{text-align:center}.mbg__img_stage{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:hidden}.mbg__img_stage__zoom{-webkit-transition:transform 10s linear;-moz-transition:transform 10s linear;-o-transition:transform 10s linear;transition:transform 10s linear;-webkit-transform:scale(1.125);-moz-transform:scale(1.125);-o-transform:scale(1.125);transform:scale(1.125)}.mbg__fade{-webkit-transition:opacity .75s ease-out;-moz-transition:opacity .75s ease-out;-o-transition:opacity .75s ease-out;transition:opacity .75s ease-out}.mbg__transition{-webkit-transition:all .75s ease-out;-moz-transition:all .75s ease-out;-o-transition:all .75s ease-out;transition:all .75s ease-out}.mbg__hscroller{height:100%;display:flex;flex-direction:row;align-items:center;-webkit-transition:transform .6s ease-in-out;-moz-transition:transform .6s ease-in-out;-o-transition:transform .6s ease-in-out;transition:transform .6s ease-in-out}.mbg__thumbs_viewer{height:100%;width:100%;overflow:hidden}.mbg__thumbs_viewer__centered{display:flex;justify-content:center;align-items:center}.mbg__thumb_stage{margin:.25rem;position:relative;flex-shrink:0;-webkit-box-shadow:0px 0px 5px 0px rgba(0,0,0,.5);box-shadow:0 0 5px #00000080}.mbg__thumb_stage:hover{transform:scale(1.1)}.mbg__thumbs_scroller__previous_btn,.mbg__thumbs_scroller__next_btn{margin-right:.5rem;margin-left:.5rem}.mbg__thumbs_scroller__previous_btn>svg{transform:scaleX(-1)}.mbg__thumbs_scroller__parent{display:flex;flex-direction:row;align-items:center}.mbg__thumbs_scroller__parent svg{width:3rem;height:3rem;fill:#727f88}.mbg__fullscreen{position:fixed;box-sizing:border-box;background-color:#181818;-webkit-transition:background-color .75s ease-in-out;-moz-transition:background-color .75s ease-in-out;-o-transition:background-color .75s ease-in-out;transition:background-color .75s ease-in-out;overflow:hidden;top:0;left:0;padding:1rem;width:100%;height:100%;z-index:100;display:flex;flex-direction:column}.mbg__fullscreen>div>.mbg__img_stage{overflow:visible}.mbg__fullscreen>div>.mbg__img_stage img{-webkit-box-shadow:0px 0px 15px 0px rgba(0,0,0,.5);box-shadow:0 0 15px #00000080}.mbg__fullscreen>.mbg__fullscreen__exit_btn{position:absolute;width:3rem;height:3rem;right:1rem;top:1rem;z-index:3}.mbg__fullscreen>.mbg__fullscreen__exit_btn>svg{opacity:.75}.mbg__gallery__fullscreen_btn{position:absolute;z-index:2;width:2rem;height:2rem;right:.25rem;top:.25rem;opacity:0}.mbg__gallery__previous_btn{position:absolute;z-index:2;top:50%;opacity:0}.mbg__gallery__next_btn{position:absolute;z-index:2;top:50%;right:0rem;opacity:0}.mbg__gallery__next_btn>svg{width:3rem;height:3rem;margin-top:-1.5rem;fill:#727f88}.mbg__gallery__previous_btn>svg{transform:scaleX(-1);width:3rem;height:3rem;margin-top:-1.5rem;fill:#727f88}
`,document.head.appendChild(p);var m=(n=>(n[n.NONE=0]="NONE",n[n.FIT_ASPECT=1]="FIT_ASPECT",n[n.STRETCH=2]="STRETCH",n[n.EXPAND=3]="EXPAND",n))(m||{});function Z(n){if(typeof n.numberOfVisibleThumbs<"u"&&(typeof n.numberOfVisibleThumbs!="number"||n.numberOfVisibleThumbs<0))throw new Error("checkThumbScrollerConfig - numberOfVisibleThumbs is invalid number");if(typeof n.initialIndex<"u"&&(typeof n.initialIndex!="number"||n.initialIndex<0))throw new Error("checkThumbScrollerConfig - config initialIndex should be of type number")}function F(n){if(typeof n.scaleMode<"u"&&(typeof n.scaleMode!="number"||n.scaleMode<0||n.scaleMode>3))throw new Error("checkSlideshowConfig - config scaleMode should be of type EImageScaleMode (number 0 - 3)");if(typeof n.interval<"u"&&(typeof n.interval!="number"||n.interval<1e3))throw new Error("checkSlideshowConfig - config interval should be of type number and larger than 1000");if(typeof n.zoom<"u"&&typeof n.zoom!="boolean")throw new Error("checkSlideshowConfig - config zoom should be of type boolean");if(typeof n.preloaderAfterSize<"u"&&(typeof n.preloaderAfterSize!="number"||n.preloaderAfterSize<0))throw new Error("checkSlideshowConfig - config preloaderAfterSize should be of type number");if(typeof n.preloaderBeforeSize<"u"&&(typeof n.preloaderBeforeSize!="number"||n.preloaderBeforeSize<0))throw new Error("checkSlideshowConfig - config preloaderBeforeSize should be of type number")}function ue(n){if(F(n),Z(n),typeof n.thumbContainerSelector<"u"&&typeof n.thumbContainerSelector!="string")throw new Error("checkGalleryConfig - invalid thumbContainerSelector");if(typeof n.thumbSelector<"u"&&typeof n.thumbSelector!="string")throw new Error("checkGalleryConfig - invalid thumbSelector")}function me(){return parseFloat(window.getComputedStyle(document.body).getPropertyValue("font-size"))}function d(n){return document.createElement(n)}function ce(n){return n.cloneNode()}function C(n){n.remove()}function q(n,e){e.prepend(n)}function y(n,e){e.appendChild(n)}function O(n,e){e.parentElement.insertBefore(n,e)}function de(n){for(var e=n.childNodes,t=new Array,s=0;s<e.length;++s)t.push(e[s]);return t}function v(n,e){n.innerHTML=e}function H(n,e){n[0].parentNode.insertBefore(e,n[0]),n.forEach(function(t){e.appendChild(t)})}function z(n){var e=n.getBoundingClientRect();return{width:e.width,height:e.height}}function ge(n){var e=n.getBoundingClientRect(),t=window.innerHeight,s=window.innerWidth;return e.top+e.height>0&&e.top<t&&e.left+e.width>0&&e.left<s}function be(n){var e=n.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop;return{y:e.top+s,x:e.left+t}}function fe(n){return x(n,"class")}function _(n,e){n.classList.contains(e)||n.classList.add(e)}function I(n,e){n.classList.contains(e)&&n.classList.remove(e)}function we(n,e){return window.getComputedStyle(n).getPropertyValue(e)}function a(n,e,t){n.style.setProperty(e,t)}function g(n,e){n.style.removeProperty(e),n.style.length===0&&n.removeAttribute("style")}function pe(n){n.hasAttribute("style")&&n.removeAttribute("style")}function Ee(n,e){e==null?pe(n):n.style.cssText=e}function x(n,e){return n.hasAttribute(e)?n.getAttribute(e):null}function ye(n,e,t){n.setAttribute(e,t)}function ve(n,e){n.removeAttribute(e)}function k(n,e){n.addEventListener("click",e)}function U(n){document.addEventListener("keydown",n)}function S(n,e,t){n.addEventListener(e,t)}function Ie(n){n.addEventListener("contextmenu",function(e){e.preventDefault()})}function Se(n){n.addEventListener("dragstart",function(e){e.preventDefault()})}function T(n){return document.querySelector(n)}function L(n){return document.querySelectorAll(n)}function X(n){return n.key}var Ce=function(n,e,t,s){function i(r){return r instanceof t?r:new t(function(h){h(r)})}return new(t||(t=Promise))(function(r,h){function u(w){try{o(s.next(w))}catch($){h($)}}function B(w){try{o(s.throw(w))}catch($){h($)}}function o(w){w.done?r(w.value):i(w.value).then(u,B)}o((s=s.apply(n,e||[])).next())})},xe=function(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,i,r,h;return h={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function u(o){return function(w){return B([o,w])}}function B(o){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,o[0]&&(t=0)),t;)try{if(s=1,i&&(r=o[0]&2?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[o[0]&2,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){t.label=o[1];break}if(o[0]===6&&t.label<r[1]){t.label=r[1],r=o;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(o);break}r[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(n,t)}catch(w){o=[6,w],i=0}finally{s=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Te=5,K=function(){function n(e,t,s){t===void 0&&(t=0),s===void 0&&(s=Te),this._unloadedElementIndices=[],this._currentIndex=-1,this._elementLoaders=e,this._preloaderBeforeSize=t,this._preloaderAfterSize=s,this._updateUnloadedElementIndices()}return n.prototype.loadAll=function(){this._loadElements(0,this._elementLoaders.length)},n.prototype.setCurrentIndex=function(e){this._currentIndex!=e&&(this._currentIndex=e,this._moveWindow())},n.prototype.loadElement=function(e){return Ce(this,void 0,void 0,function(){var t,s,i;return xe(this,function(r){switch(r.label){case 0:return e>=0&&e<this._elementLoaders.length?(t=!1,this._unloadedElementIndices.includes(e)?[3,1]:(t=!0,[3,5])):[3,6];case 1:r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._elementLoaders[e].load()];case 3:return t=r.sent(),t&&(s=this._unloadedElementIndices.indexOf(e),s>-1&&this._unloadedElementIndices.splice(s,1)),[3,5];case 4:return i=r.sent(),t=i,[3,5];case 5:return[2,t];case 6:throw new Error("Preloader#loadElement -> invalid Index ".concat(e))}})})},n.prototype.getElementLoaderInfos=function(){return this._elementLoaders},n.prototype.getUnloadedElementIndices=function(){return this._unloadedElementIndices},n.prototype._moveWindow=function(){if(this._unloadedElementIndices.length){var e=this._currentIndex-this._preloaderBeforeSize,t=this._currentIndex+this._preloaderAfterSize;this._loadElements(this._currentIndex,t<this._elementLoaders.length?t:this._elementLoaders.length),this._loadElements(e>=0?e:0,this._currentIndex),e<0&&(e=this._elementLoaders.length+e,this._loadElements(e,this._elementLoaders.length)),t>=this._elementLoaders.length&&(t=t-this._elementLoaders.length,this._loadElements(0,t))}},n.prototype._loadElements=function(e,t){for(var s=e<0?0:e;s<t&&s<this._elementLoaders.length;s++)this.loadElement(s)},n.prototype._updateUnloadedElementIndices=function(){for(var e=0;e<this._elementLoaders.length;e++)this._elementLoaders[e].wasLoaded()||this._unloadedElementIndices.push(e)},n}(),Y="mibreit-LazyLoader_lazy",j="mibreit-LazyLoader_ElementLoader_animate",J="data-src",Le="src",E;(function(n){n[n.INACTIVE=0]="INACTIVE",n[n.LOADING=1]="LOADING",n[n.LOADED=2]="LOADED"})(E||(E={}));var Ae=function(){function n(e){var t;this._state=E.INACTIVE,this._wasLoadedCallbacks=new Array,this._dataSrc=null,this._element=e,this._dataSrc=x(e,J);var s=(t=fe(e))===null||t===void 0?void 0:t.split(",");this._dataSrc||s&&s.includes(Y)?(this._state=E.INACTIVE,this._setBaseStyle()):this._state=E.LOADED}return n.prototype.load=function(){var e=this;return new Promise(function(t,s){e._state==E.INACTIVE?(e._element.onload=function(){e._finishLoad(),t(!0)},e._triggerLoad(),e._state=E.LOADING,e._setLoadingStyle(),e._element instanceof HTMLImageElement&&e._element.complete&&(e._element.onload=null,e._finishLoad(),t(!0))):e._state===E.LOADING?s(!1):s(!0)})},n.prototype.wasLoaded=function(){return this._state===E.LOADED},n.prototype.addWasLoadedCallback=function(e){this._wasLoadedCallbacks.includes(e)||this._wasLoadedCallbacks.push(e)},n.prototype._triggerLoad=function(){this._dataSrc&&ye(this._element,Le,this._dataSrc),I(this._element,Y)},n.prototype._finishLoad=function(){var e=this;ve(this._element,J),this._state=E.LOADED,this._wasLoadedCallbacks.forEach(function(t){t()}),setTimeout(function(){e._setLoadedStyle()},50)},n.prototype._setBaseStyle=function(){a(this._element,"opacity","0")},n.prototype._setLoadingStyle=function(){_(this._element,j)},n.prototype._setLoadedStyle=function(){var e=this;g(this._element,"opacity"),setTimeout(function(){I(e._element,j)},1e3)},n}(),Oe=function(){function n(e){var t=x(e,"width"),s=x(e,"height");if(t==null||s==null)throw new Error("ElementInfo#constructor - supported elements need a width and height property");var i=x(e,"class");this._element=e,this._originalElementStyle=i||"",this._width=parseInt(t),this._height=parseInt(s)}return n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.getStyle=function(){return this._originalElementStyle},n.prototype.isElementWithinScrollArea=function(){return ge(this._element)},n}(),ze=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(s[r]=i[r])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),ke=function(n){ze(e,n);function e(t){var s=n.call(this,t)||this;return s._elementInfo=new Oe(s._element),s}return e.prototype.getHtmlElement=function(){return this._element},e.prototype.getWidth=function(){return this._elementInfo.getWidth()},e.prototype.getHeight=function(){return this._elementInfo.getHeight()},e.prototype.getStyle=function(){return this._elementInfo.getStyle()},e.prototype.isElementWithinScrollArea=function(){return this._elementInfo.isElementWithinScrollArea()},e}(Ae),Q;(function(n){n[n.SIMPLE_DEFER=0]="SIMPLE_DEFER",n[n.WINDOWED_EXTERNAL=1]="WINDOWED_EXTERNAL",n[n.WINDOWED_SCROLL=2]="WINDOWED_SCROLL",n[n.WINDOWED_SCROLL_HORIZONTAL=3]="WINDOWED_SCROLL_HORIZONTAL"})(Q||(Q={}));const R={img_stage:"mbg__img_stage",img_stage__zoom:"mbg__img_stage__zoom"},f={fade:"mbg__fade",transition:"mbg__transition"},ee=50,Pe=700;var b=(n=>(n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n))(b||{});class Ve{constructor(e,t){l(this,"_callback");l(this,"_touchStartTime",null);l(this,"_touchStartPosition",null);l(this,"_touchStart",e=>{this._touchStartTime=Date.now(),this._touchStartPosition=this._getTouchPosition(e)});l(this,"_touchEnd",e=>{if(this._touchStartTime&&this._touchStartPosition&&Date.now()-this._touchStartTime<Pe){const t=this._getTouchPosition(e),s=this._detectDirection(this._touchStartPosition,t);this._callback(s,t)}this._touchStartPosition=null,this._touchStartTime=null});this._callback=t,S(e,"pointerdown",this._touchStart),S(e,"pointerup",this._touchEnd)}_getTouchPosition(e){return{x:e.pageX,y:e.pageY}}_detectDirection(e,t){const s=e.x-t.x;return s>ee?2:s<-ee?1:0}}const P=async function(){return new Promise((n,e)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})})},Ne=1e3;class V{constructor(e,t,s){l(this,"_zoomAnimation",!1);l(this,"_imageStage");l(this,"_imageHandle");l(this,"_imageWidth");l(this,"_imageHeight");this._imageHandle=e,this._imageWidth=t,this._imageHeight=s,this._imageStage=this._createStage(),new ResizeObserver(()=>{this.reinitSize()}).observe(this._imageStage)}setZoomAnimation(e){this._zoomAnimation=e}reinitSize(){const e=z(this._imageStage);this._applyScaleModeImpl(e.width,e.height),this._centerImage(e.width,e.height)}async hideImage(e=b.NONE){this._zoomAnimation&&setTimeout(()=>{this._resetZoom()},Ne),this._stopSlideAnimation(),await P(),e==b.RIGHT?(_(this._imageStage,f.transition),a(this._imageStage,"left","-100%")):e==b.LEFT&&(_(this._imageStage,f.transition),a(this._imageStage,"left","100%")),g(this._imageStage,"opacity")}async showImage(e=b.NONE){this._zoomAnimation&&this._startZoomAnimation(),this._stopSlideAnimation(),await P(),e==b.RIGHT?(I(this._imageStage,f.transition),a(this._imageStage,"left","100%"),await P(),_(this._imageStage,f.transition),g(this._imageStage,"left")):e==b.LEFT?(I(this._imageStage,f.transition),a(this._imageStage,"left","-100%"),await P(),_(this._imageStage,f.transition),g(this._imageStage,"left")):(I(this._imageStage,f.transition),g(this._imageStage,"left")),a(this._imageStage,"opacity","1")}_createStage(){const e=d("div");return _(e,R.img_stage),_(e,f.fade),H([this._imageHandle],e),e}_centerImage(e,t){const{width:s,height:i}=z(this._imageHandle),r=(s+e)/2-s,h=(i+t)/2-i;a(this._imageHandle,"margin-left",`${r}px`),a(this._imageHandle,"margin-top",`${h}px`)}_startZoomAnimation(){_(this._imageHandle,R.img_stage__zoom)}_resetZoom(){I(this._imageHandle,R.img_stage__zoom)}_stopSlideAnimation(){a(this._imageStage,"margin-left",we(this._imageStage,"margin-left"))}}class Be extends V{constructor(e,t,s){super(e,t,s)}_applyScaleModeImpl(e,t){const s=this._imageWidth/this._imageHeight;let i="auto",r="auto";e/t>s?t<=this._imageHeight&&(r="100%"):e<=this._imageWidth&&(i="100%"),a(this._imageHandle,"width",i),a(this._imageHandle,"height",r)}}class te extends V{constructor(e,t,s){super(e,t,s)}_applyScaleModeImpl(e,t){const s=this._imageWidth/this._imageHeight,i=e/t;i>s?(a(this._imageHandle,"width","100%"),a(this._imageHandle,"height",`${100/s*i}%`)):(a(this._imageHandle,"width",`${s*100/i}%`),a(this._imageHandle,"height","100%"))}}class Fe extends V{constructor(e,t,s){super(e,t,s)}_applyScaleModeImpl(e,t){a(this._imageHandle,"width","100%"),a(this._imageHandle,"height","100%")}}class He extends V{constructor(e,t,s){super(e,t,s)}_applyScaleModeImpl(e,t){g(this._imageHandle,"width"),g(this._imageHandle,"height")}}function Re(n,e,t,s=m.FIT_ASPECT){switch(s){case m.EXPAND:return new te(n,e,t);case m.FIT_ASPECT:return new Be(n,e,t);case m.STRETCH:return new Fe(n,e,t);case m.NONE:default:return new He(n,e,t)}}class We{constructor(e,t=m.FIT_ASPECT){l(this,"_currentIndex",-1);l(this,"_delayedNewIndex",-1);l(this,"_imageStages",[]);l(this,"_images");l(this,"_imageChangedCallbacks",new Array);this._images=e,this._prepareImageStages(e,t)}showImage(e){return this._showImage(e)}showNextImage(e){const t=this._currentIndex<this._imageStages.length-1?this._currentIndex+1:0;return this._showImage(t,e)}showPreviousImage(e){const t=this._currentIndex>0?this._currentIndex-1:this._imageStages.length-1;return this._showImage(t,e)}getNumberOfImages(){return this._imageStages.length}setZoomAnimation(e){this._imageStages.forEach(t=>{t.setZoomAnimation(e)})}addImageChangedCallback(e){this._imageChangedCallbacks.includes(e)||this._imageChangedCallbacks.push(e)}getImageIndex(){return this._currentIndex}getImageInfo(e){return this._isValidIndex(e)?this._images[e]:null}getImageElement(e){return this._isValidIndex(e)?this._images[e].getHtmlElement():null}_showImage(e,t=b.NONE){return this._isValidIndex(e)?(e!=this._currentIndex&&(this._images[e].wasLoaded()?(this._hideImage(this._currentIndex,t),this._changeCurrentImage(e,t)):(this._delayedNewIndex=e,this._images[e].addWasLoadedCallback(()=>{e===this._delayedNewIndex&&(this._hideImage(this._currentIndex,t),this._changeCurrentImage(this._delayedNewIndex,t))}))),!0):!1}_hideImage(e,t=b.NONE){this._isValidIndex(e)&&this._imageStages[this._currentIndex].hideImage(t)}_prepareImageStages(e,t){e.forEach(s=>{const i=Re(s.getHtmlElement(),s.getWidth(),s.getHeight(),t);s.addWasLoadedCallback(()=>{i.reinitSize()}),this._imageStages.push(i)})}_isValidIndex(e){return e>=0&&e<this._imageStages.length}_changeCurrentImage(e,t=b.NONE){this._currentIndex=e,this._imageStages[this._currentIndex].showImage(t),this._imageChangedCallbacks.forEach(s=>{s(this._currentIndex,this._images[this._currentIndex])})}}class De{constructor(e,t){l(this,"_imageViewer");l(this,"_loader");this._imageViewer=e,this._loader=t}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}}const ne="title",se="data-title",Me=7,Ge=3,$e=7,Ze=.5;class ie extends ke{constructor(t){super(t);l(this,"_title","");this._prepareTitle(t),this._limitMaxSizeTo(t,this.getWidth(),this.getHeight()),Ie(t),Se(t)}getTitle(){return this._title}getUrl(){return this._element.hasAttribute("data-src")?this._element.getAttribute("data-src"):this._element.getAttribute("src")}_limitMaxSizeTo(t,s,i){Ee(t,`max-width: ${s}px; max-height: ${i}px`)}_prepareTitle(t){let s=t.getAttribute(ne);s?(t.setAttribute(se,s),t.removeAttribute(ne)):s=t.getAttribute(se),this._title=s||""}}class W{constructor(e,t){l(this,"_imageViewer");l(this,"_lazyLoader");const s=this._createImagesArray(e);this._lazyLoader=this._createLoader(s,t==null?void 0:t.preloaderBeforeSize,t==null?void 0:t.preloaderAfterSize),this._imageViewer=this._createImageViewer(s,this._lazyLoader,t==null?void 0:t.scaleMode,t==null?void 0:t.zoom),t!=null&&t.interval&&setInterval(()=>{this._imageViewer.showNextImage()},t.interval),this._imageViewer.showImage(0)}build(){return new De(this._imageViewer,this._lazyLoader)}_createImagesArray(e){const t=new Array;for(let s=0;s<e.length;s++){const i=new ie(e[s]);t.push(i)}return t}_createLoader(e,t=Ge,s=Me){const i=new K(e,t,s);return setTimeout(()=>{i.loadElement(0),i.setCurrentIndex(0)},0),i}_createImageViewer(e,t,s,i){const r=new We(e,s);return i!==void 0&&r.setZoomAnimation(i),t&&(r.addImageChangedCallback((h,u)=>{t.setCurrentIndex(h)}),t.setCurrentIndex(0)),r}}function qe(n,e){if(typeof n!="string")throw new Error("createSlideshow - second parameter must be imageSelector string");const t=L(n);if((t==null?void 0:t.length)>0)return e&&F(e),new W(t,e).build();throw new Error("createSlideshow - no images selected")}const Ue={hscroller:"mbg__hscroller"};class Xe{constructor(e){l(this,"_scroller");this._scroller=this._createScroller(e)}scrollTo(e,t=!1){let s;return t?s=`${e}rem`:s=`${e}px`,a(this._scroller,"transform",`translate(${s})`),!0}_createScroller(e){const t=d("div");return _(t,Ue.hscroller),H(e,t),t}}const re={thumbs_viewer:"mbg__thumbs_viewer",thumbs_viewer__centered:"mbg__thumbs_viewer__centered"};class Ke{constructor(e,t){l(this,"_scroller",null);l(this,"_wrapperElement");l(this,"_thumbElements");l(this,"_thumbSizeRem");l(this,"_numberOfVisibleThumbs");l(this,"_scrollIndexChangedCallbacks",new Array);l(this,"_currentScrollIndex",0);this._numberOfVisibleThumbs=t,this._thumbElements=Array.from(e.children),this._wrapperElement=this._wrapThumbs(de(e),t,this._thumbElements.length),this._thumbSizeRem=this._calculateThumbsize(this._wrapperElement,t),this._resizeThumbs(this._thumbElements,this._thumbSizeRem),this._numberOfVisibleThumbs<this._thumbElements.length&&(this._scroller=new Xe(this._thumbElements)),new ResizeObserver(()=>{this.reinitSize()}).observe(this._wrapperElement)}reinitSize(){this._thumbSizeRem=this._calculateThumbsize(this._wrapperElement,this._numberOfVisibleThumbs),this._resizeThumbs(this._thumbElements,this._thumbSizeRem),this.setCenterThumb(this._currentScrollIndex,!1)}setCenterThumb(e,t=!0){if(this._scroller){let s=e;t&&(s-=Math.floor(this._numberOfVisibleThumbs/2));const i=this._normalizeIndex(s);this._currentScrollIndex=i;const r=-i*this._thumbSizeRem;this._scroller.scrollTo(r,!0),this._scrollIndexChangedCallbacks.forEach(h=>{h(this._currentScrollIndex)})}}scrollNext(){let e=this._currentScrollIndex+this._numberOfVisibleThumbs;const t=this._thumbElements.length-this._numberOfVisibleThumbs;this._currentScrollIndex===t?e=0:e>=t&&(e=t),this.setCenterThumb(e,!1)}scrollPrevious(){let e=this._currentScrollIndex-this._numberOfVisibleThumbs;const t=this._thumbElements.length-this._numberOfVisibleThumbs;this._currentScrollIndex===0?e=t:e<0&&(e=0),this.setCenterThumb(e,!1)}addScrollIndexChangedCallback(e){this._scrollIndexChangedCallbacks.includes(e)||this._scrollIndexChangedCallbacks.push(e)}_normalizeIndex(e){const t=this._thumbElements.length-this._numberOfVisibleThumbs;return e>=t?t:e<0?0:e}_wrapThumbs(e,t,s){const i=d("div");return _(i,re.thumbs_viewer),t>=s&&_(i,re.thumbs_viewer__centered),H(e,i),i}_calculateThumbsize(e,t){const s=me();return z(e).width/s/t}_resizeThumbs(e,t){const s=t*.9,i=t*.05;for(let r=0;r<e.length;++r)a(e[r],"width",`${s}rem`),a(e[r],"height",`${s}rem`),a(e[r],"margin",`${i}rem`)}}const Ye={thumb_stage:"mbg__thumb_stage"};class je extends te{constructor(e,t,s){super(e,t,s),_(this._imageStage,Ye.thumb_stage)}addStageClickedCallback(e){k(this._imageStage,e)}}const D={thumbs_scroller__previous_btn:"mbg__thumbs_scroller__previous_btn",thumbs_scroller__next_btn:"mbg__thumbs_scroller__next_btn",thumbs_scroller__parent:"mbg__thumbs_scroller__parent"},le='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1152 896q0 26-19 45l-448 448q-19 19-45 19t-45-19-19-45v-896q0-26 19-45t45-19 45 19l448 448q19 19 19 45z"/></svg>';class oe{constructor(e,t,s,i){l(this,"_thumbContainerElement");l(this,"_previousButtonElement");l(this,"_nextButtonElement");l(this,"_lazyLoader");l(this,"_numberOfVisibleThumbs");l(this,"_numberOfThumbs");l(this,"_initialIndex");l(this,"_thumbsViewer");this._thumbContainerElement=e,_(this._thumbContainerElement,D.thumbs_scroller__parent),this._numberOfVisibleThumbs=s!=null&&s.numberOfVisibleThumbs?s.numberOfVisibleThumbs:$e,this._initialIndex=s==null?void 0:s.initialIndex;const r=this._createThumbsArray(t);this._numberOfThumbs=r.length,this._createThumbStages(r,i),this._lazyLoader=new K(r,this._numberOfVisibleThumbs,this._numberOfVisibleThumbs),this._thumbsViewer=this._createThumbsViewer(this._thumbContainerElement,this._lazyLoader,this._initialIndex)}addPreviousNextButtons(){return this._numberOfVisibleThumbs<this._numberOfThumbs&&([this._previousButtonElement,this._nextButtonElement]=this._createPreviousNextButtons(this._thumbContainerElement)),this}build(){return this._thumbsViewer.reinitSize(),this._previousButtonElement&&this._nextButtonElement&&this._addThumbsViewerInteraction(this._thumbsViewer,this._previousButtonElement,this._nextButtonElement),this._numberOfVisibleThumbs>=this._numberOfThumbs&&setTimeout(()=>{this._lazyLoader.loadElement(0),this._lazyLoader.setCurrentIndex(0),this._thumbsViewer.setCenterThumb(0)},0),this._thumbsViewer}_createThumbsArray(e){const t=new Array;for(let s=0;s<e.length;s++){const i=new ie(e[s]);t.push(i)}return t}_createThumbStages(e,t){e.forEach((s,i)=>{const r=new je(s.getHtmlElement(),s.getWidth(),s.getHeight());s.addWasLoadedCallback(()=>{r.reinitSize()}),r.showImage(),t&&r.addStageClickedCallback(()=>{t(i)})})}_createThumbsViewer(e,t,s=0){const i=new Ke(e,this._numberOfVisibleThumbs);return i.addScrollIndexChangedCallback(r=>{t.setCurrentIndex(r)}),i.setCenterThumb(s),i}_createPreviousNextButtons(e){const t=d("div");v(t,le),_(t,D.thumbs_scroller__previous_btn),q(t,e);const s=d("div");return v(s,le),_(s,D.thumbs_scroller__next_btn),y(s,e),[t,s]}_addThumbsViewerInteraction(e,t,s){k(s,()=>{e.scrollNext()}),k(t,()=>{e.scrollPrevious()})}}function Je(n,e,t,s){if(typeof n!="string")throw new Error("createThumbsViewer - first parameter must be containerSelector string");if(typeof e!="string")throw new Error("createThumbsViewer - second parameter must be imageSelector string");t&&Z(t);const i=L(e),r=T(n);if(r&&(i==null?void 0:i.length)>0)return new oe(r,i,t,s).addPreviousNextButtons().build();throw new Error("createThumbsViewer - no images selected")}class Qe{constructor(e,t,s,i){l(this,"_imageViewer");l(this,"_loader");l(this,"_fullscreenContainer",null);l(this,"_thumbsViewer",null);this._imageViewer=e,this._loader=t,this._thumbsViewer=s,this._fullscreenContainer=i}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}getThumbsViewer(){return this._thumbsViewer}getFullscreen(){return this._fullscreenContainer}}const ae={fullscreen:"mbg__fullscreen",img_stage:"mbg__img_stage",fullscreen__exit_btn:"mbg__fullscreen__exit_btn"},et='<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';class tt{constructor(e,t=null,s=!0){l(this,"_changedCallbacks",[]);l(this,"_active");l(this,"_slideshowContainerElement");l(this,"_thumbsContainerElement",null);l(this,"_fullScreenContainerElement");l(this,"_slideshowContainerPlaceholderElement");l(this,"_thumbsContainerPlaceholderElement",null);l(this,"_closeButtonElement");l(this,"_usePlaceholder");this._active=!1,this._slideshowContainerElement=e,this._thumbsContainerElement=t,this._usePlaceholder=s,this._fullScreenContainerElement=this._createFullscreenContainer(),this._closeButtonElement=this._createFullscreenCloseButton(this._fullScreenContainerElement),this._slideshowContainerPlaceholderElement=this._createSlideshowContainerPlaceholder(),t&&(this._thumbsContainerPlaceholderElement=this._createThumbsContainerPlaceholder())}activate(){this._active||(this._moveGalleryToFullscreen(),this._moveThumbsToFullscreen(),this._addFullscreen(),this._setupCloseButtonHandler(),this._active=!0,this._changedCallbacks.forEach(e=>{e(!0)}))}deActivate(){this._active&&(this._removeGalleryFromFullscreen(),this._removeThumbsFromFullscreen(),this._removeFullscreen(),this._active=!1,this._changedCallbacks.forEach(e=>{e(!1)}))}addChangedCallback(e){this._changedCallbacks.includes(e)||this._changedCallbacks.push(e)}isActive(){return this._active}setBackgroundColor(e){a(this._fullScreenContainerElement,"background-color",e)}_createFullscreenContainer(){const e=d("div");return _(e,ae.fullscreen),e}_createFullscreenCloseButton(e){const t=d("div");return v(t,et),_(t,ae.fullscreen__exit_btn),y(t,e),t}_createSlideshowContainerPlaceholder(){return d("div")}_createThumbsContainerPlaceholder(){return d("div")}_addFullscreen(){const e=T("body");e!=null&&y(this._fullScreenContainerElement,e)}_removeFullscreen(){C(this._fullScreenContainerElement)}_moveGalleryToFullscreen(){this._usePlaceholder&&O(this._slideshowContainerPlaceholderElement,this._slideshowContainerElement),y(this._slideshowContainerElement,this._fullScreenContainerElement),a(this._slideshowContainerElement,"width","100%"),a(this._slideshowContainerElement,"flex-grow","1")}_removeGalleryFromFullscreen(){C(this._slideshowContainerElement),this._usePlaceholder&&(O(this._slideshowContainerElement,this._slideshowContainerPlaceholderElement),C(this._slideshowContainerPlaceholderElement)),g(this._slideshowContainerElement,"width"),g(this._slideshowContainerElement,"flex-grow")}_moveThumbsToFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(this._usePlaceholder&&O(this._thumbsContainerPlaceholderElement,this._thumbsContainerElement),y(this._thumbsContainerElement,this._fullScreenContainerElement),a(this._thumbsContainerElement,"flex-grow","0"))}_removeThumbsFromFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(C(this._thumbsContainerElement),this._usePlaceholder&&(O(this._thumbsContainerElement,this._thumbsContainerPlaceholderElement),C(this._thumbsContainerPlaceholderElement)),g(this._thumbsContainerElement,"flex-grow"))}_setupCloseButtonHandler(){k(this._closeButtonElement,e=>{e==null||e.stopPropagation(),this._active&&this.deActivate()})}}const he='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"/></svg>',nt='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2,9 L0,9 L0,14 L5,14 L5,12 L2,12 L2,9 L2,9 Z M0,5 L2,5 L2,2 L5,2 L5,0 L0,0 L0,5 L0,5 Z M12,12 L9,12 L9,14 L14,14 L14,9 L12,9 L12,12 L12,12 Z M9,0 L9,2 L12,2 L12,5 L14,5 L14,0 L9,0 L9,0 Z"/></svg>',M={gallery__fullscreen_btn:"mbg__gallery__fullscreen_btn",gallery__previous_btn:"mbg__gallery__previous_btn",gallery__next_btn:"mbg__gallery__next_btn"};class A{constructor(e,t,s=!1){l(this,"_slideshowContainerElement");l(this,"_fullScreenOnly");l(this,"_slideshow");l(this,"_thumbsViewer",null);l(this,"_fullscreen",null);this._slideshowContainerElement=e,this._slideshow=t,this._fullScreenOnly=s}static fromContainerAndImages(e,t,s){const i=new W(t,s).build();return new A(e,i)}static fromImages(e,t){const s=d("div");a(s,"display","none"),e.forEach(u=>{y(ce(u),s)});const i=T("body");y(s,i);const r=s.children,h=new W(r,t).build();return new A(s,h,!0)}addPreviousNextButtons(){const{previousButton:e,nextButton:t}=this._createPreviousNextButtons(this._slideshowContainerElement);return this._setupHoverEvents(this._slideshowContainerElement,[e,t]),this}addFullscreen(){this._fullscreen=new tt(this._slideshowContainerElement);const e=this._createFullscreenButton(this._slideshowContainerElement);return this._setupHoverEvents(this._slideshowContainerElement,[e]),this._setupFullscreenKeyEvents(this._fullscreen),this._setupFullscreenClickEvent(e,this._fullscreen),this._setupFullscreenChangedHandler(this._fullscreen,e),this._fullScreenOnly&&this._fullscreen.addChangedCallback(t=>{t?g(this._slideshowContainerElement,"display"):a(this._slideshowContainerElement,"display","none")}),this}addThumbScroller(e,t,s){return this._thumbsViewer=new oe(e,t,s,i=>{this._slideshow.getLoader().setCurrentIndex(i),this._slideshow.getImageViewer().showImage(i)}).addPreviousNextButtons().build(),this._slideshow.getImageViewer().addImageChangedCallback((i,r)=>{this._thumbsViewer.setCenterThumb(i,!0)}),this}build(){return this._setupSwipeHandler(this._slideshowContainerElement,this._slideshow.getImageViewer()),this._setupKeyEvents(this._slideshow.getImageViewer()),new Qe(this._slideshow.getImageViewer(),this._slideshow.getLoader(),this._thumbsViewer,this._fullscreen)}_createPreviousNextButtons(e){const t=d("div");v(t,he),_(t,M.gallery__previous_btn),_(t,f.fade),q(t,e);const s=d("div");return v(s,he),_(s,M.gallery__next_btn),_(s,f.fade),y(s,e),{previousButton:t,nextButton:s}}_setupSwipeHandler(e,t){a(e,"touch-action","pinch-zoom pan-y"),new Ve(e,(s,i)=>{const r=z(e).width,h=be(e).x;s===b.LEFT?t.showPreviousImage(s):s===b.RIGHT?t.showNextImage(s):i.x-h>r/2?t.showNextImage():t.showPreviousImage()})}_setupHoverEvents(e,t){S(e,"mouseenter",()=>{t.forEach(s=>{a(s,"opacity",`${Ze}`)})}),S(e,"mouseleave",()=>{t.forEach(s=>{a(s,"opacity","0")})})}_setupKeyEvents(e){U(t=>{switch(X(t)){case"ArrowRight":e.showNextImage();break;case"ArrowLeft":e.showPreviousImage();break}})}_setupFullscreenKeyEvents(e){U(t=>{switch(X(t)){case"Escape":e.deActivate();break;case"f":e.isActive()?e.deActivate():e.activate();break}})}_createFullscreenButton(e){const t=d("div");return v(t,nt),_(t,M.gallery__fullscreen_btn),_(t,f.fade),y(t,e),t}_setupFullscreenClickEvent(e,t){S(e,"pointerdown",s=>{s.stopPropagation()}),S(e,"pointerup",s=>{s.stopPropagation(),t.isActive()||(t.activate(),a(e,"display","none"))})}_setupFullscreenChangedHandler(e,t){e.addChangedCallback(s=>{s?a(t,"display","none"):g(t,"display")})}}function _e(n,e,t){if(typeof n!="string")throw new Error("createGallery - first parameter must be containerSelector string");if(typeof e!="string")throw new Error("createGallery - second parameter must be imageSelector string");t&&ue(t);const s=L(e),i=T(n);if(i&&(s==null?void 0:s.length)>0){const r=A.fromContainerAndImages(i,s,t).addPreviousNextButtons().addFullscreen();if(t!=null&&t.thumbSelector&&(t!=null&&t.thumbContainerSelector)){const h=T(t.thumbContainerSelector),u=L(t.thumbSelector);h&&u&&(u.length>1?r.addThumbScroller(h,u,t):a(h,"display","none"))}return r.build()}else throw new Error("createGallery - no images selected")}function st(n,e){if(typeof n!="string")throw new Error("createFullscreenOnlyGallery - first parameter must be imageSelector string");F(e);const t=L(n);if((t==null?void 0:t.length)>0)return A.fromImages(t,e).addPreviousNextButtons().addFullscreen().build();throw new Error("createFullscreenOnlyGallery - no images selected")}const N=class N extends HTMLElement{connectedCallback(){const e=`mbg__custom-gallery-${N.classCounter++}`;this.classList.add(e);const t=this.getAttribute("numberOfVisibleThumbs"),s=this.getAttribute("preloaderBeforeSize"),i=this.getAttribute("preloaderAfterSize"),r=_e(`.${e} mbg-slideshow`,`.${e} mbg-slideshow img`,{scaleMode:m.FIT_ASPECT,thumbContainerSelector:`.${e} mbg-thumbs`,thumbSelector:`.${e} mbg-thumbs img`,numberOfVisibleThumbs:t?+t:void 0,preloaderBeforeSize:s?+s:void 0,preloaderAfterSize:i?+i:void 0}),h=document.querySelector("mbg-title");if(h){const u=r.getImageViewer().getImageInfo(r.getImageViewer().getImageIndex());u&&(h.innerHTML=u.getTitle()),r.getImageViewer().addImageChangedCallback((B,o)=>{h.innerHTML=o.getTitle()})}}};l(N,"classCounter",0);let G=N;class it extends HTMLElement{}class rt extends HTMLElement{}class lt extends HTMLElement{}return customElements.define("mbg-gallery",G),customElements.define("mbg-slideshow",it),customElements.define("mbg-thumbs",rt),customElements.define("mbg-title",lt),c.EImageScaleMode=m,c.createFullscreenOnlyGallery=st,c.createGallery=_e,c.createSlideshow=qe,c.createThumbsScroller=Je,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),c}({});
