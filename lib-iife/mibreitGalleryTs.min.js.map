{"version":3,"file":"mibreitGalleryTs.min.js","sources":["../node_modules/mibreit-dom-tools/lib/index.js","../src/components/SwipeHandler.ts","../src/tools/AsyncSleep.ts","../src/components/ImageStage.ts","../src/components/ImageStageFitAspect.ts","../src/components/ImageStageExpand.ts","../src/components/ImageStageStretch.ts","../src/components/ImageStageNoScale.ts","../src/factories/createImageStage.ts","../node_modules/mibreit-lazy-loader/lib/components/LazyLoader.js","../node_modules/mibreit-lazy-loader/lib/components/ElementLoader.js","../node_modules/mibreit-lazy-loader/lib/components/ElementInfo.js","../node_modules/mibreit-lazy-loader/lib/components/Element.js","../node_modules/mibreit-lazy-loader/lib/components/ElementSurrogate.js","../node_modules/mibreit-lazy-loader/lib/tools/debounce.js","../node_modules/mibreit-lazy-loader/lib/components/ScrollLoader.js","../node_modules/mibreit-lazy-loader/lib/tools/createLazyLoader.js","../src/constants.ts","../src/components/Image.ts","../src/components/ImageViewer.ts","../src/containers/SlideshowContainer.ts","../src/tools/checkSlideshowConfig.ts","../src/factories/createSlideshow.ts","../src/components/ThumbStage.ts","../src/components/ThumbScrollerLayout.ts","../src/factories/createThumbScrollerLayout.ts","../src/components/HorizontalScroller.ts","../src/components/ThumbScroller.ts","../src/containers/ThumbScrollerContainer.ts","../src/tools/checkThumbScrollerConfig.ts","../src/factories/createThumbScroller.ts","../src/containers/GalleryContainer.ts","../src/containers/FullscreenContainer.ts","../src/tools/debounce.ts","../src/builders/GalleryContainerBuilder.ts","../src/factories/createGallery.ts","../src/factories/createFullscreenOnlyGallery.ts"],"sourcesContent":["/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nexport function documentReady(callback) {\n    window.addEventListener('load', callback);\n}\nexport function getRootFontSize() {\n    return parseFloat(window.getComputedStyle(document.body).getPropertyValue('font-size'));\n}\nexport function createElement(tagName) {\n    return document.createElement(tagName);\n}\nexport function createInputElement(type) {\n    var input = document.createElement('input');\n    input.type = type;\n    return input;\n}\nexport function cloneElement(element) {\n    return element.cloneNode();\n}\nexport function removeElement(element) {\n    element.remove();\n}\nexport function prependChildElement(element, parent) {\n    parent.prepend(element);\n}\nexport function appendChildElement(element, parent) {\n    parent.appendChild(element);\n}\nexport function prependBeforeChild(element, child) {\n    child.parentElement.insertBefore(element, child);\n}\nexport function appendAfterChild(element, child) {\n    child.parentElement.insertBefore(element, child.nextSibling);\n}\nexport function getChildNodes(element) {\n    var nodes = element.childNodes;\n    var nodesArray = new Array();\n    for (var i = 0; i < nodes.length; ++i) {\n        nodesArray.push(nodes[i]);\n    }\n    return nodesArray;\n}\nexport function setInnerHtml(parent, inner) {\n    parent.innerHTML = inner;\n}\nexport function wrapElements(elements, wrapper) {\n    elements[0].parentNode.insertBefore(wrapper, elements[0]);\n    elements.forEach(function (element) {\n        wrapper.appendChild(element);\n    });\n}\nexport function unwrapElements(wrapper) {\n    var elements = wrapper.childNodes;\n    elements.forEach(function (element) {\n        wrapper.parentNode.insertBefore(element, wrapper);\n    });\n}\nexport function getParentElement(element) {\n    return element.parentElement;\n}\nexport function getElementDimension(element) {\n    var elementRect = element.getBoundingClientRect();\n    return {\n        width: elementRect.width,\n        height: elementRect.height,\n    };\n}\nexport function isElementWithinWindow(element) {\n    var elementRect = element.getBoundingClientRect();\n    var windowHeight = window.innerHeight;\n    var windowWidth = window.innerWidth;\n    return (elementRect.top + elementRect.height > 0 &&\n        elementRect.top < windowHeight &&\n        elementRect.left + elementRect.width > 0 &&\n        elementRect.left < windowWidth);\n}\nexport function getElementPosition(element) {\n    var rect = element.getBoundingClientRect();\n    var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;\n    var scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n    return { y: rect.top + scrollTop, x: rect.left + scrollLeft };\n}\nexport function getCssClasses(element) {\n    return getAttribute(element, 'class');\n}\nexport function addCssClass(element, cssClass) {\n    if (!element.classList.contains(cssClass)) {\n        element.classList.add(cssClass);\n    }\n}\nexport function removeCssClass(element, cssClass) {\n    if (element.classList.contains(cssClass)) {\n        element.classList.remove(cssClass);\n    }\n}\nexport function removeAllCssClasses(element) {\n    if (element.hasAttribute('class')) {\n        element.removeAttribute('class');\n    }\n}\nexport function overwriteCssClasses(element, cssClasses) {\n    if (cssClasses == null) {\n        removeAllCssClasses(element);\n    }\n    else {\n        element.setAttribute('class', cssClasses);\n    }\n}\nexport function getCssStyle(element, styleName) {\n    return element.style.getPropertyValue(styleName);\n}\nexport function getCssStyles(element) {\n    return element.style.cssText;\n}\nexport function getComputedCssStyle(element, styleName) {\n    return window.getComputedStyle(element).getPropertyValue(styleName);\n}\nexport function addCssStyle(element, styleName, styleProperty) {\n    element.style.setProperty(styleName, styleProperty);\n}\nexport function removeCssStyle(element, styleName) {\n    element.style.removeProperty(styleName);\n    if (element.style.length === 0) {\n        element.removeAttribute('style');\n    }\n}\nexport function removeAllCssStyles(element) {\n    if (element.hasAttribute('style')) {\n        element.removeAttribute('style');\n    }\n}\nexport function overwriteCssStyles(element, styles) {\n    if (styles == null) {\n        removeAllCssStyles(element);\n    }\n    else {\n        element.style.cssText = styles;\n    }\n}\nexport function hasAttribute(element, attribute) {\n    return element.hasAttribute(attribute);\n}\nexport function getAttribute(element, attribute) {\n    if (!element.hasAttribute(attribute)) {\n        return null;\n    }\n    else {\n        return element.getAttribute(attribute);\n    }\n}\nexport function setAttribute(element, attribute, value) {\n    element.setAttribute(attribute, value);\n}\nexport function removeAttribute(element, attribute) {\n    element.removeAttribute(attribute);\n}\nexport function addClickEventListener(element, callback) {\n    element.addEventListener('click', callback);\n}\nexport function addKeyEventListener(callback) {\n    document.addEventListener('keydown', callback);\n}\nexport function addScrollEventListener(callback) {\n    document.addEventListener('scroll', callback);\n}\nexport function addResizeEventListener(callback) {\n    window.addEventListener('resize', callback);\n}\nexport function addEventListener(element, event, callback) {\n    element.addEventListener(event, callback);\n}\nexport function disableContextMenu(element) {\n    element.addEventListener('contextmenu', function (e) {\n        e.preventDefault();\n    });\n}\nexport function disableDragging(element) {\n    element.addEventListener('dragstart', function (e) {\n        e.preventDefault();\n    });\n}\nexport function getElement(selector) {\n    return document.querySelector(selector);\n}\nexport function getElements(selector) {\n    return document.querySelectorAll(selector);\n}\nexport function getKeyFromEvent(event) {\n    return event.key;\n}\nexport var DomTools = {\n    documentReady: documentReady,\n    getRootFontSize: getRootFontSize,\n    createElement: createElement,\n    createInputElement: createInputElement,\n    cloneElement: cloneElement,\n    removeElement: removeElement,\n    prependChildElement: prependChildElement,\n    appendChildElement: appendChildElement,\n    prependBeforeChild: prependBeforeChild,\n    appendAfterChild: appendAfterChild,\n    getChildNodes: getChildNodes,\n    setInnerHtml: setInnerHtml,\n    wrapElements: wrapElements,\n    unwrapElements: unwrapElements,\n    getParentElement: getParentElement,\n    getElementDimension: getElementDimension,\n    getElementPosition: getElementPosition,\n    isElementWithinWindow: isElementWithinWindow,\n    getCssClasses: getCssClasses,\n    addCssClass: addCssClass,\n    removeCssClass: removeCssClass,\n    removeAllCssClasses: removeAllCssClasses,\n    overwriteCssClasses: overwriteCssClasses,\n    getCssStyle: getCssStyle,\n    getCssStyles: getCssStyles,\n    getComputedCssStyle: getComputedCssStyle,\n    addCssStyle: addCssStyle,\n    removeCssStyle: removeCssStyle,\n    removeAllCssStyles: removeAllCssStyles,\n    overwriteCssStyles: overwriteCssStyles,\n    hasAttribute: hasAttribute,\n    getAttribute: getAttribute,\n    setAttribute: setAttribute,\n    removeAttribute: removeAttribute,\n    addClickEventListener: addClickEventListener,\n    addKeyEventListener: addKeyEventListener,\n    addScrollEventListener: addScrollEventListener,\n    addResizeEventListener: addResizeEventListener,\n    addEventListener: addEventListener,\n    disableContextMenu: disableContextMenu,\n    disableDragging: disableDragging,\n    getElement: getElement,\n    getElements: getElements,\n    getKeyFromEvent: getKeyFromEvent,\n};\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { addEventListener } from 'mibreit-dom-tools';\r\n\r\nconst TRESHHOLD = 50;\r\nconst MAXTIME = 700;\r\n\r\nexport type TPosition = {\r\n  x: number;\r\n  y: number;\r\n};\r\n\r\nexport enum ESwipeDirection {\r\n  NONE,\r\n  LEFT,\r\n  RIGHT,\r\n}\r\n\r\nexport default class SwipeHander {\r\n  private _callback: (direction: ESwipeDirection, position: TPosition) => void;\r\n  private _touchStartTime: number | null = null;\r\n  private _touchStartPosition: TPosition | null = null;\r\n\r\n  constructor(target: HTMLElement, callback: (direction: ESwipeDirection, position: TPosition) => void) {\r\n    this._callback = callback;\r\n    addEventListener(target, 'pointerdown', this._touchStart);\r\n    addEventListener(target, 'pointerup', this._touchEnd);\r\n  }\r\n\r\n  private _touchStart = (event: PointerEvent) => {\r\n    console.log('SwipeHander#touchStart');\r\n    this._touchStartTime = Date.now();\r\n    this._touchStartPosition = this._getTouchPosition(event);\r\n  };\r\n\r\n  private _touchEnd = (event: PointerEvent) => {\r\n    console.log('SwipeHander#touchEnd');\r\n    if (this._touchStartTime && this._touchStartPosition && Date.now() - this._touchStartTime < MAXTIME) {\r\n      const touchEndPosition = this._getTouchPosition(event);\r\n      const direction = this._detectDirection(this._touchStartPosition, touchEndPosition);\r\n      console.log('SwipeHander#touchEnd - direction: ', direction);\r\n      this._callback(direction, touchEndPosition);\r\n    }\r\n    this._touchStartPosition = null;\r\n    this._touchStartTime = null;\r\n  };\r\n\r\n  private _getTouchPosition(event: PointerEvent): TPosition {\r\n    return {\r\n      x: event.pageX,\r\n      y: event.pageY,\r\n    };\r\n  }\r\n\r\n  private _detectDirection(start: TPosition, end: TPosition): ESwipeDirection {\r\n    const diff: number = start.x - end.x;\r\n    if (diff > TRESHHOLD) {\r\n      return ESwipeDirection.RIGHT;\r\n    } else if (diff < -TRESHHOLD) {\r\n      return ESwipeDirection.LEFT;\r\n    } else {\r\n      return ESwipeDirection.NONE;\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nconst sleep = async function (ms: number): Promise<void> {\r\n  // @ts-ignore\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      resolve();\r\n    }, ms);\r\n  });\r\n};\r\n\r\nconst sleepTillNextRenderFinished = async function (): Promise<void> {\r\n  // @ts-ignore\r\n  return new Promise((resolve, reject) => {\r\n    requestAnimationFrame(() => {\r\n      // fires before next repaint\r\n      requestAnimationFrame(() => {\r\n        // fires before the _next_ next repaint\r\n        // ...which is effectively _after_ the next repaint\r\n        resolve();\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nexport { sleep, sleepTillNextRenderFinished };\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport {\r\n  TElementDimension,\r\n  addCssClass,\r\n  addCssStyle,\r\n  createElement,\r\n  getComputedCssStyle,\r\n  getElementDimension,\r\n  removeCssClass,\r\n  removeCssStyle,\r\n  wrapElements,\r\n} from 'mibreit-dom-tools';\r\nimport IImageStage from '../interfaces/IImageStage';\r\nimport styles from './ImageStage.module.css';\r\nimport animationStyles from '../tools/animations.module.css';\r\nimport { ESwipeDirection } from './SwipeHandler';\r\nimport { sleepTillNextRenderFinished } from '../tools/AsyncSleep';\r\n\r\n// constants\r\nconst ANIMATIONS_RESET_TIMEOUT = 1000;\r\n\r\n/**\r\n * The ImageStage is responsible for proper scaling and centering\r\n * of images on the stage\r\n */\r\nexport default abstract class ImageStage implements IImageStage {\r\n  private _zoomAnimation: boolean = false;\r\n  protected _imageStage: HTMLElement;\r\n  protected _imageHandle: HTMLElement;\r\n  protected _imageWidth: number;\r\n  protected _imageHeight: number;\r\n\r\n  constructor(imageHandle: HTMLElement, imageWidth: number, imageHeight: number) {\r\n    this._imageHandle = imageHandle;\r\n    this._imageWidth = imageWidth;\r\n    this._imageHeight = imageHeight;\r\n    this._imageStage = this._createStage();\r\n  }\r\n\r\n  setZoomAnimation(activate: boolean): void {\r\n    this._zoomAnimation = activate;\r\n  }\r\n\r\n  applyScaleMode(): void {\r\n    console.log('ImageStage#applyScaleMode');\r\n    const stageDimension: TElementDimension = getElementDimension(this._imageStage);\r\n    this._applyScaleModeImpl(stageDimension.width, stageDimension.height);\r\n    this._centerImage(stageDimension.width, stageDimension.height);\r\n  }\r\n\r\n  setSize(widthCss: string, heightCss: string) {\r\n    addCssStyle(this._imageStage, 'width', widthCss);\r\n    addCssStyle(this._imageStage, 'height', heightCss);\r\n    this.applyScaleMode();\r\n  }\r\n\r\n  setMargin(marginCss: string) {\r\n    addCssStyle(this._imageStage, 'margin', marginCss);\r\n  }\r\n\r\n  async hideImage(swipeDirection: ESwipeDirection = ESwipeDirection.NONE): Promise<void> {\r\n    if (this._zoomAnimation) {\r\n      setTimeout(() => {\r\n        this._resetZoom();\r\n      }, ANIMATIONS_RESET_TIMEOUT);\r\n    }\r\n    this._stopSlideAnimation();\r\n    await sleepTillNextRenderFinished();\r\n    if (swipeDirection == ESwipeDirection.RIGHT) {\r\n      addCssClass(this._imageStage, animationStyles.mibreit_GalleryTransition);\r\n      addCssStyle(this._imageStage, 'left', '-100%');\r\n    } else if (swipeDirection == ESwipeDirection.LEFT) {\r\n      addCssClass(this._imageStage, animationStyles.mibreit_GalleryTransition);\r\n      addCssStyle(this._imageStage, 'left', '100%');\r\n    }\r\n    removeCssStyle(this._imageStage, 'opacity');\r\n  }\r\n\r\n  async showImage(swipeDirection: ESwipeDirection = ESwipeDirection.NONE): Promise<void> {\r\n    this.applyScaleMode();\r\n    if (this._zoomAnimation) {\r\n      this._startZoomAnimation();\r\n    }\r\n    this._stopSlideAnimation();\r\n    await sleepTillNextRenderFinished();\r\n    if (swipeDirection == ESwipeDirection.RIGHT) {\r\n      removeCssClass(this._imageStage, animationStyles.mibreit_GalleryTransition);\r\n      addCssStyle(this._imageStage, 'left', '100%');\r\n      await sleepTillNextRenderFinished();\r\n      addCssClass(this._imageStage, animationStyles.mibreit_GalleryTransition);\r\n      removeCssStyle(this._imageStage, 'left');\r\n    } else if (swipeDirection == ESwipeDirection.LEFT) {\r\n      removeCssClass(this._imageStage, animationStyles.mibreit_GalleryTransition);\r\n      addCssStyle(this._imageStage, 'left', '-100%');\r\n      await sleepTillNextRenderFinished();\r\n      addCssClass(this._imageStage, animationStyles.mibreit_GalleryTransition);\r\n      removeCssStyle(this._imageStage, 'left');\r\n    } else {\r\n      removeCssClass(this._imageStage, animationStyles.mibreit_GalleryTransition);\r\n      removeCssStyle(this._imageStage, 'left');\r\n    }\r\n    addCssStyle(this._imageStage, 'opacity', '1');\r\n  }\r\n\r\n  protected abstract _applyScaleModeImpl(stageWidth: number, stageHeight: number): void;\r\n\r\n  private _createStage(): HTMLElement {\r\n    const wrapper = createElement('div');\r\n    addCssClass(wrapper, styles.mibreit_ImageStage);\r\n    addCssClass(wrapper, animationStyles.mibreit_GalleryFade);\r\n    wrapElements([this._imageHandle], wrapper);\r\n    return wrapper;\r\n  }\r\n\r\n  private _centerImage(stageWidth: number, stageHeight: number) {\r\n    const { width, height } = getElementDimension(this._imageHandle);\r\n    const x: number = (width + stageWidth) / 2.0 - width;\r\n    const y: number = (height + stageHeight) / 2.0 - height;\r\n    addCssStyle(this._imageHandle, 'margin-left', `${x}px`);\r\n    addCssStyle(this._imageHandle, 'margin-top', `${y}px`);\r\n  }\r\n\r\n  private _startZoomAnimation() {\r\n    console.log('ImageStage#startZoomAnimation');\r\n    addCssClass(this._imageHandle, 'zoom');\r\n  }\r\n\r\n  private _resetZoom() {\r\n    console.log('ImageStage#resetZoom');\r\n    removeCssClass(this._imageHandle, 'zoom');\r\n  }\r\n\r\n  private _stopSlideAnimation() {\r\n    addCssStyle(this._imageStage, 'margin-left', getComputedCssStyle(this._imageStage, 'margin-left'));\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { addCssStyle } from 'mibreit-dom-tools';\r\nimport ImageStage from './ImageStage';\r\n\r\nexport default class ImageStageFitAspect extends ImageStage {\r\n  constructor(imageHandle: HTMLElement, imageWidth: number, imageHeight: number) {\r\n    super(imageHandle, imageWidth, imageHeight);\r\n  }\r\n\r\n  protected _applyScaleModeImpl(stageWidth: number, stageHeight: number) {\r\n    const aspect = this._imageWidth / this._imageHeight;\r\n    let newWidth: string = 'auto';\r\n    let newHeight: string = 'auto';\r\n    if (stageWidth / stageHeight > aspect) {\r\n      // fit based on height\r\n      if (stageHeight <= this._imageHeight) {\r\n        newHeight = `100%`;\r\n      }\r\n    } else {\r\n      // fit based on width\r\n      if (stageWidth <= this._imageWidth) {\r\n        newWidth = `100%`;\r\n      }\r\n    }\r\n    addCssStyle(this._imageHandle, 'width', newWidth);\r\n    addCssStyle(this._imageHandle, 'height', newHeight);\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { addCssStyle } from 'mibreit-dom-tools';\r\nimport ImageStage from './ImageStage';\r\n\r\nexport default class ImageStageExpand extends ImageStage {\r\n  constructor(imageHandle: HTMLElement, imageWidth: number, imageHeight: number) {\r\n    super(imageHandle, imageWidth, imageHeight);\r\n  }\r\n\r\n  protected _applyScaleModeImpl(stageWidth: number, stageHeight: number) {\r\n    const aspect = this._imageWidth / this._imageHeight;\r\n    const stageAspect = stageWidth / stageHeight;\r\n\r\n    if (stageAspect > aspect) {\r\n      // fit based on width\r\n      addCssStyle(this._imageHandle, 'width', `100%`);\r\n      addCssStyle(this._imageHandle, 'height', `${(100 / aspect) * stageAspect}%`);\r\n    } else {\r\n      // fit based on height\r\n      addCssStyle(this._imageHandle, 'width', `${(aspect * 100) / stageAspect}%`);\r\n      addCssStyle(this._imageHandle, 'height', `100%`);\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { addCssStyle } from 'mibreit-dom-tools';\r\nimport ImageStage from './ImageStage';\r\n\r\nexport default class ImageStageStretch extends ImageStage {\r\n  constructor(imageHandle: HTMLElement, imageWidth: number, imageHeight: number) {\r\n    super(imageHandle, imageWidth, imageHeight);\r\n  }\r\n\r\n  protected _applyScaleModeImpl(_stageWidth: number, _stageHeight: number) {\r\n    addCssStyle(this._imageHandle, 'width', `100%`);\r\n    addCssStyle(this._imageHandle, 'height', `100%`);\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { removeCssStyle } from 'mibreit-dom-tools';\r\nimport ImageStage from './ImageStage';\r\n\r\nexport default class ImageStageNoScale extends ImageStage {\r\n  constructor(imageHandle: HTMLElement, imageWidth: number, imageHeight: number) {\r\n    super(imageHandle, imageWidth, imageHeight);\r\n  }\r\n\r\n  protected _applyScaleModeImpl(_stageWidth: number, _stageHeight: number) {\r\n    removeCssStyle(this._imageHandle, 'width');\r\n    removeCssStyle(this._imageHandle, 'height');\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport IImageStage from '../interfaces/IImageStage';\r\nimport ImageStageFitAspect from '../components/ImageStageFitAspect';\r\nimport ImageStageExpand from '../components/ImageStageExpand';\r\nimport ImageStageStretch from '../components/ImageStageStretch';\r\nimport ImageStageNoScale from '../components/ImageStageNoScale';\r\n\r\nexport enum EImageScaleMode {\r\n  NONE,\r\n  FIT_ASPECT,\r\n  STRETCH,\r\n  EXPAND,\r\n}\r\n\r\nexport default function (\r\n  imageHandle: HTMLElement,\r\n  imageWidth: number,\r\n  imageHeight: number,  \r\n  scaleMode: EImageScaleMode = EImageScaleMode.FIT_ASPECT\r\n): IImageStage {\r\n  switch (scaleMode) {\r\n    case EImageScaleMode.EXPAND:\r\n      return new ImageStageExpand(imageHandle, imageWidth, imageHeight);\r\n    case EImageScaleMode.FIT_ASPECT:\r\n      return new ImageStageFitAspect(imageHandle, imageWidth, imageHeight);\r\n    case EImageScaleMode.STRETCH:\r\n      return new ImageStageStretch(imageHandle, imageWidth, imageHeight);\r\n    case EImageScaleMode.NONE:\r\n    default:\r\n      return new ImageStageNoScale(imageHandle, imageWidth, imageHeight);\r\n  }\r\n};\r\n","/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar PRELOADER_WINDOW_SIZE = 5;\nvar LazyLoader = /** @class */ (function () {\n    function LazyLoader(elementLoaders, preloaderBeforeSize, preloaderAfterSize) {\n        if (preloaderBeforeSize === void 0) { preloaderBeforeSize = 0; }\n        if (preloaderAfterSize === void 0) { preloaderAfterSize = PRELOADER_WINDOW_SIZE; }\n        this._unloadedElementIndices = [];\n        this._currentIndex = -1;\n        this._elementLoaders = elementLoaders;\n        this._preloaderBeforeSize = preloaderBeforeSize;\n        this._preloaderAfterSize = preloaderAfterSize;\n        this._updateUnloadedElementIndices();\n    }\n    LazyLoader.prototype.loadAll = function () {\n        this._loadElements(0, this._elementLoaders.length);\n    };\n    LazyLoader.prototype.setCurrentIndex = function (newIndex) {\n        if (this._currentIndex != newIndex) {\n            this._currentIndex = newIndex;\n            this._moveWindow();\n        }\n    };\n    /**\n     * Will directly load an Element without changing the window of loaded Elements. This\n     * has to be handled separately by setCurrentIndex\n     *\n     * @return {Promise} Promise that will resolve with true once the Element is loaded\n     *         or will resolve right away with false, if the Element is in loading state;\n     *         It will reject an invalid index with a error message\n     */\n    LazyLoader.prototype.loadElement = function (index) {\n        return __awaiter(this, void 0, void 0, function () {\n            var loaded, location_1, wasLoaded_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(index >= 0 && index < this._elementLoaders.length)) return [3 /*break*/, 6];\n                        loaded = false;\n                        if (!!this._unloadedElementIndices.includes(index)) return [3 /*break*/, 1];\n                        loaded = true;\n                        return [3 /*break*/, 5];\n                    case 1:\n                        console.log(\"LazyLoader#loadElement - index: \", index);\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this._elementLoaders[index].load()];\n                    case 3:\n                        loaded = _a.sent();\n                        if (loaded) {\n                            location_1 = this._unloadedElementIndices.indexOf(index);\n                            if (location_1 > -1) {\n                                this._unloadedElementIndices.splice(location_1, 1);\n                            }\n                        }\n                        return [3 /*break*/, 5];\n                    case 4:\n                        wasLoaded_1 = _a.sent();\n                        loaded = wasLoaded_1;\n                        return [3 /*break*/, 5];\n                    case 5: return [2 /*return*/, loaded];\n                    case 6: throw new Error(\"Preloader#loadElement -> invalid Index \".concat(index));\n                }\n            });\n        });\n    };\n    LazyLoader.prototype.getElementLoaderInfos = function () {\n        return this._elementLoaders;\n    };\n    LazyLoader.prototype.getUnloadedElementIndices = function () {\n        return this._unloadedElementIndices;\n    };\n    LazyLoader.prototype._moveWindow = function () {\n        if (this._unloadedElementIndices.length) {\n            var start = this._currentIndex - this._preloaderBeforeSize;\n            var end = this._currentIndex + this._preloaderAfterSize;\n            // 1) load from current Element forward\n            this._loadElements(this._currentIndex, end < this._elementLoaders.length ? end : this._elementLoaders.length);\n            // 2) load from back towards current Element\n            this._loadElements(start >= 0 ? start : 0, this._currentIndex);\n            // 3) handle overflow\n            if (start < 0) {\n                start = this._elementLoaders.length + start;\n                this._loadElements(start, this._elementLoaders.length);\n            }\n            if (end >= this._elementLoaders.length) {\n                end = end - this._elementLoaders.length;\n                this._loadElements(0, end);\n            }\n        }\n    };\n    LazyLoader.prototype._loadElements = function (start, end) {\n        for (var i = start < 0 ? 0 : start; i < end && i < this._elementLoaders.length; i++) {\n            this.loadElement(i);\n        }\n    };\n    LazyLoader.prototype._updateUnloadedElementIndices = function () {\n        for (var i = 0; i < this._elementLoaders.length; i++) {\n            if (!this._elementLoaders[i].wasLoaded()) {\n                this._unloadedElementIndices.push(i);\n            }\n        }\n    };\n    return LazyLoader;\n}());\nexport default LazyLoader;\n","/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nimport { DomTools } from 'mibreit-dom-tools';\nimport styles from './ElementLoader.module.css';\nexport var DATA_SRC_ATTRIBUTE = 'data-src';\nexport var SRC_ATTRIBUTE = 'src';\nvar EImageState;\n(function (EImageState) {\n    EImageState[EImageState[\"INACTIVE\"] = 0] = \"INACTIVE\";\n    EImageState[EImageState[\"LOADING\"] = 1] = \"LOADING\";\n    EImageState[EImageState[\"LOADED\"] = 2] = \"LOADED\";\n})(EImageState || (EImageState = {}));\nvar ElementLoader = /** @class */ (function () {\n    function ElementLoader(element) {\n        this._state = EImageState.INACTIVE;\n        this._wasLoadedCallbacks = new Array();\n        this._element = element;\n        if (!DomTools.hasAttribute(element, DATA_SRC_ATTRIBUTE)) {\n            this._state = EImageState.LOADED;\n        }\n        else {\n            this._state = EImageState.INACTIVE;\n            this._setBaseStyle();\n        }\n    }\n    ElementLoader.prototype.load = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this._state == EImageState.INACTIVE) {\n                _this._element.onload = function () {\n                    DomTools.removeAttribute(_this._element, DATA_SRC_ATTRIBUTE);\n                    _this._state = EImageState.LOADED;\n                    _this._wasLoadedCallbacks.forEach(function (callback) {\n                        callback();\n                    });\n                    // A little explanation for the timeout: we need to decouple the \n                    // change of the load style and the fade it will trigger from the\n                    // change to the dom that might be triggered by the callbacks\n                    // -> this needs to happen separately and a timeout helps to provide\n                    // this separation\n                    setTimeout(function () {\n                        _this._setLoadedStyle();\n                    }, 50);\n                    resolve(true);\n                };\n                _this._state = EImageState.LOADING;\n                _this._setLoadingStyle();\n                var dataSrc = DomTools.getAttribute(_this._element, DATA_SRC_ATTRIBUTE);\n                // @ts-ignore - if state is inactive we know that an element has a data source\n                DomTools.setAttribute(_this._element, SRC_ATTRIBUTE, dataSrc);\n            }\n            else if (_this._state === EImageState.LOADING) {\n                reject(false);\n            }\n            else {\n                reject(true);\n            }\n        });\n    };\n    ElementLoader.prototype.wasLoaded = function () {\n        return this._state === EImageState.LOADED;\n    };\n    ElementLoader.prototype.addWasLoadedCallback = function (callback) {\n        if (!this._wasLoadedCallbacks.includes(callback)) {\n            this._wasLoadedCallbacks.push(callback);\n        }\n    };\n    ElementLoader.prototype._setBaseStyle = function () {\n        DomTools.addCssStyle(this._element, 'opacity', '0');\n    };\n    ElementLoader.prototype._setLoadingStyle = function () {\n        DomTools.addCssClass(this._element, styles.element_animate);\n    };\n    ElementLoader.prototype._setLoadedStyle = function () {\n        var _this = this;\n        DomTools.removeCssStyle(this._element, 'opacity');\n        setTimeout(function () {\n            DomTools.removeCssClass(_this._element, styles.element_animate);\n        }, 1000);\n    };\n    return ElementLoader;\n}());\nexport default ElementLoader;\n","/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nimport { DomTools } from 'mibreit-dom-tools';\nvar ElementInfo = /** @class */ (function () {\n    function ElementInfo(element) {\n        var width = DomTools.getAttribute(element, 'width');\n        var height = DomTools.getAttribute(element, 'height');\n        if (width == null || height == null) {\n            throw new Error('ElementInfo#constructor - supported elements need a width and height property');\n        }\n        var originalStyle = DomTools.getAttribute(element, 'class');\n        this._element = element;\n        this._originalElementStyle = originalStyle ? originalStyle : '';\n        this._width = parseInt(width);\n        this._height = parseInt(height);\n    }\n    ElementInfo.prototype.getWidth = function () {\n        return this._width;\n    };\n    ElementInfo.prototype.getHeight = function () {\n        return this._height;\n    };\n    ElementInfo.prototype.getStyle = function () {\n        return this._originalElementStyle;\n    };\n    ElementInfo.prototype.isElementWithinScrollArea = function () {\n        return DomTools.isElementWithinWindow(this._element);\n    };\n    return ElementInfo;\n}());\nexport default ElementInfo;\n","/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ElementLoader from './ElementLoader';\nimport ElementInfo from './ElementInfo';\nvar Element = /** @class */ (function (_super) {\n    __extends(Element, _super);\n    function Element(element) {\n        var _this = _super.call(this, element) || this;\n        _this._elementInfo = new ElementInfo(_this._element);\n        return _this;\n    }\n    Element.prototype.getHtmlElement = function () {\n        return this._element;\n    };\n    Element.prototype.getWidth = function () {\n        return this._elementInfo.getWidth();\n    };\n    Element.prototype.getHeight = function () {\n        return this._elementInfo.getHeight();\n    };\n    Element.prototype.getStyle = function () {\n        return this._elementInfo.getStyle();\n    };\n    Element.prototype.isElementWithinScrollArea = function () {\n        return this._elementInfo.isElementWithinScrollArea();\n    };\n    return Element;\n}(ElementLoader));\nexport default Element;\n","/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nimport { DomTools } from 'mibreit-dom-tools';\nvar ElementSurrogate = /** @class */ (function () {\n    function ElementSurrogate(element, horizontal) {\n        if (horizontal === void 0) { horizontal = false; }\n        this._element = element;\n        this._surrogate = this._createSurrogate(horizontal);\n    }\n    ElementSurrogate.prototype.wrap = function (elementHandle) {\n        DomTools.wrapElements([elementHandle], this._surrogate);\n    };\n    ElementSurrogate.prototype.unwrap = function () {\n        DomTools.unwrapElements(this._surrogate);\n        DomTools.removeElement(this._surrogate);\n    };\n    ElementSurrogate.prototype.getWidth = function () {\n        return this._element.getWidth();\n    };\n    ElementSurrogate.prototype.getHeight = function () {\n        return this._element.getHeight();\n    };\n    ElementSurrogate.prototype.getStyle = function () {\n        return this._element.getStyle();\n    };\n    ElementSurrogate.prototype.isElementWithinScrollArea = function () {\n        return DomTools.isElementWithinWindow(this._surrogate);\n    };\n    ElementSurrogate.prototype.resize = function (horizontal) {\n        if (horizontal) {\n            DomTools.addCssStyle(this._surrogate, \"width\", \"\".concat(DomTools.getElementDimension(this._surrogate).height *\n                (this._element.getWidth()) / this._element.getHeight(), \"px\"));\n        }\n        // else nothing to do for now\n    };\n    ElementSurrogate.prototype._createSurrogate = function (horizontal) {\n        if (horizontal === void 0) { horizontal = false; }\n        var surrogate = DomTools.createElement('div');\n        DomTools.addCssClass(surrogate, 'mibreit_lazyLoader_surrogate');\n        if (horizontal) {\n            DomTools.overwriteCssStyles(surrogate, \"overflow: hidden; height: 100%; width: \".concat(DomTools.getElementDimension(this._element.getHtmlElement()).height *\n                (this._element.getWidth()) / this._element.getHeight(), \"px; flex-shrink:0;\"));\n        }\n        else {\n            DomTools.overwriteCssStyles(surrogate, \"overflow: hidden; width: 100%; height: 0; padding-bottom: \".concat((this._element.getHeight() * 100) / this._element.getWidth(), \"%;\"));\n        }\n        return surrogate;\n    };\n    return ElementSurrogate;\n}());\nexport default ElementSurrogate;\n","/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nexport default function (callback, wait) {\n    var timeout;\n    return function debouncedCallback() {\n        var later = function () {\n            clearTimeout(timeout);\n            callback();\n        };\n        clearTimeout(timeout);\n        timeout = window.setTimeout(later, wait);\n    };\n}\n;\n","/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nimport { DomTools } from 'mibreit-dom-tools';\nimport debounce from '../tools/debounce';\n// avoid overloading of scroll event\nvar SCROLL_EVENT_TIMEOUT = 400;\nvar ScrollLoader = /** @class */ (function () {\n    function ScrollLoader(lazyLoader, elementLocations) {\n        this._elementLocations = [];\n        this._lazyLoader = lazyLoader;\n        this._elementLocations = elementLocations;\n    }\n    ScrollLoader.prototype.startLoader = function () {\n        var _this = this;\n        this._loadElementsWithinWindowRect();\n        var debouncedLoadEvent = debounce(function () {\n            _this._loadElementsWithinWindowRect();\n        }, SCROLL_EVENT_TIMEOUT);\n        DomTools.addScrollEventListener(function (_event) {\n            debouncedLoadEvent();\n        });\n    };\n    ScrollLoader.prototype._loadElementsWithinWindowRect = function () {\n        var unloadedElementIndices = this._lazyLoader.getUnloadedElementIndices();\n        console.log('ScrollLoader#loadElementsWithinWindowRect - unloadedElements: ', unloadedElementIndices);\n        for (var i = 0; i < unloadedElementIndices.length; i++) {\n            if (this._elementLocations[unloadedElementIndices[i]].isElementWithinScrollArea()) {\n                this._lazyLoader.loadElement(unloadedElementIndices[i]);\n            }\n        }\n        // TODO: Further optimization -> stop once we leave the window area\n    };\n    return ScrollLoader;\n}());\nexport default ScrollLoader;\n","/**\n * @author Michael Breitung\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\n */\nimport LazyLoader from '../components/LazyLoader';\nimport Element from '../components/Element';\nimport ElementSurrogate from '../components/ElementSurrogate';\nimport ScrollLoader from '../components/ScrollLoader';\nimport { DomTools } from 'mibreit-dom-tools';\nimport debounce from './debounce';\n// constants\nvar RESIZE_EVENT_TIMEOUT = 400;\nexport var ELazyMode;\n(function (ELazyMode) {\n    ELazyMode[ELazyMode[\"SIMPLE_DEFER\"] = 0] = \"SIMPLE_DEFER\";\n    ELazyMode[ELazyMode[\"WINDOWED_EXTERNAL\"] = 1] = \"WINDOWED_EXTERNAL\";\n    ELazyMode[ELazyMode[\"WINDOWED_SCROLL\"] = 2] = \"WINDOWED_SCROLL\";\n})(ELazyMode || (ELazyMode = {}));\nfunction checkElementSelectorInput(elementSelector) {\n    if (typeof elementSelector !== 'string') {\n        throw new Error('createLazyLoader - first parameter needs to be a css selector string');\n    }\n}\nfunction checkConfig(config) {\n    if (typeof config.preloaderAfterSize !== 'undefined' && typeof config.preloaderAfterSize !== 'number') {\n        throw new Error('createLazyLoader - preloaderAfterSize of config must be a number');\n    }\n    if (typeof config.preloaderBeforeSize !== 'undefined' && typeof config.preloaderBeforeSize !== 'number') {\n        throw new Error('createLazyLoader - preloaderBeforeSize of config must be a number');\n    }\n    if (typeof config.mode !== 'undefined' && typeof config.mode !== 'number') {\n        throw new Error('createLazyLoader - mode of config must be a number (0, 1, 2) - use type ELazyMode');\n    }\n    if (typeof config.useSurrogate !== 'undefined' && typeof config.useSurrogate !== 'boolean') {\n        throw new Error('createLazyLoader - useSurrogate of config must be a boolean');\n    }\n    if (typeof config.surrogateModeHorizontal !== 'undefined' && typeof config.surrogateModeHorizontal !== 'boolean') {\n        throw new Error('createLazyLoader - surrogateModeHorizontal of config must be a boolean');\n    }\n}\nfunction startLoader(loader, elements, mode) {\n    if (mode === void 0) { mode = ELazyMode.SIMPLE_DEFER; }\n    if (mode != null) {\n        switch (mode) {\n            case ELazyMode.WINDOWED_EXTERNAL:\n                loader.loadElement(0);\n                loader.setCurrentIndex(0);\n                break;\n            case ELazyMode.WINDOWED_SCROLL:\n                var scrollLoader = new ScrollLoader(loader, elements);\n                scrollLoader.startLoader();\n                break;\n            case ELazyMode.SIMPLE_DEFER:\n            default:\n                loader.loadAll();\n                break;\n        }\n    }\n}\nexport function createLazyLoaderFromElements(elements, config) {\n    checkConfig(config);\n    var surrogates = [];\n    if (config.useSurrogate) {\n        var _loop_1 = function (i) {\n            var surrogate = new ElementSurrogate(elements[i], config.surrogateModeHorizontal);\n            surrogate.wrap(elements[i].getHtmlElement());\n            elements[i].addWasLoadedCallback(function () {\n                surrogate.unwrap();\n            });\n            surrogates.push(surrogate);\n        };\n        for (var i = 0; i < elements.length; i++) {\n            _loop_1(i);\n        }\n    }\n    if (config.surrogateModeHorizontal == true) {\n        var debouncedResizeEvent_1 = debounce(function () {\n            surrogates.forEach(function (surrogate) {\n                surrogate.resize(true);\n            });\n        }, RESIZE_EVENT_TIMEOUT);\n        DomTools.addResizeEventListener(function () {\n            debouncedResizeEvent_1();\n        });\n    }\n    var lazyLoader = new LazyLoader(elements, config.preloaderBeforeSize, config.preloaderAfterSize);\n    startLoader(lazyLoader, elements, config.mode);\n    return lazyLoader;\n}\nexport default function (elementSelector, config) {\n    checkElementSelectorInput(elementSelector);\n    var htmlElements = DomTools.getElements(elementSelector);\n    var elements = [];\n    for (var i = 0; i < htmlElements.length; i++) {\n        var element = new Element(htmlElements[i]);\n        elements.push(element);\n    }\n    return createLazyLoaderFromElements(elements, config);\n}\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\n// Css properties\r\nexport const IMAGE_DATA_SRC_ATTRIBUTE = 'data-src';\r\nexport const IMAGE_SRC_ATTRIBUTE = 'src';\r\nexport const IMAGE_TITLE_ATTRIBUTE = 'title';\r\nexport const IMAGE_DATA_TITLE_ATTRIBUTE = 'data-title';\r\n\r\n// Css classes\r\nexport const CSS_IMAGE_STATE_CLASS = 'mibreit-image-stage';\r\n\r\n// Gallery Configuration\r\nexport const PRELOADER_RIGHT_SIZE = 7;\r\nexport const PRELOADER_LEFT_SIZE = 3;\r\nexport const SLIDESHOW_INTERVAL = 5000;\r\nexport const NUMBER_OF_VISIBLE_THUMBS = 7;\r\n\r\n// Opacities\r\nexport const GALLERY_BUTTONS_SHOW_OPACITY = 0.5;\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { disableContextMenu, disableDragging, overwriteCssStyles } from 'mibreit-dom-tools';\r\nimport { Element } from 'mibreit-lazy-loader';\r\n\r\n// interfaces\r\nimport IImageInfo from '../interfaces/IImageInfo';\r\n\r\n// constants\r\nimport { IMAGE_TITLE_ATTRIBUTE, IMAGE_DATA_TITLE_ATTRIBUTE } from '../constants';\r\n\r\nexport default class Image extends Element implements IImageInfo {\r\n  private _title: string = '';\r\n\r\n  constructor(imageHandle: HTMLElement) {\r\n    super(imageHandle);\r\n    this._prepareTitle(imageHandle);\r\n    this._limitMaxSizeTo(imageHandle, this.getWidth(), this.getHeight());\r\n    disableContextMenu(imageHandle);\r\n    disableDragging(imageHandle);\r\n  }\r\n\r\n  getTitle(): string {\r\n    return this._title;\r\n  }\r\n\r\n  getUrl() {\r\n    return this._element.hasAttribute('data-src')\r\n      ? this._element.getAttribute('data-src')\r\n      : this._element.getAttribute('src');\r\n  }\r\n\r\n  private _limitMaxSizeTo(imageHandle: HTMLElement, maxWidth: number, maxHeight: number): void {\r\n    overwriteCssStyles(imageHandle, `max-width: ${maxWidth}px; max-height: ${maxHeight}px`);\r\n  }\r\n\r\n  private _prepareTitle(imageHandle: HTMLElement) {\r\n    let title = imageHandle.getAttribute(IMAGE_TITLE_ATTRIBUTE);\r\n    if (title) {\r\n      imageHandle.setAttribute(IMAGE_DATA_TITLE_ATTRIBUTE, title);\r\n      imageHandle.removeAttribute(IMAGE_TITLE_ATTRIBUTE);\r\n    } else {\r\n      title = imageHandle.getAttribute(IMAGE_DATA_TITLE_ATTRIBUTE);\r\n    }\r\n    this._title = title ? title : '';\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport createImageStage, { EImageScaleMode } from '../factories/createImageStage';\r\nimport Image from './Image';\r\n\r\n// interfaces\r\nimport IImageViewer from '../interfaces/IImageViewer';\r\nimport IImageStage from '../interfaces/IImageStage';\r\nimport IImageInfo from '../interfaces/IImageInfo';\r\n\r\n// types\r\nimport { ESwipeDirection } from './SwipeHandler';\r\n\r\nexport default class ImageViewer implements IImageViewer {\r\n  private _currentIndex: number = -1;\r\n  private _imageStages: Array<IImageStage> = [];\r\n  private _images: Array<Image>;\r\n  private _imageChangedCallbacks: Array<(index: number, imageInfo: IImageInfo) => void> = new Array();\r\n\r\n  constructor(images: Array<Image>, scaleMode: EImageScaleMode = EImageScaleMode.FIT_ASPECT) {\r\n    this._images = images;\r\n    this._prepareImageStages(images, scaleMode);\r\n  }\r\n\r\n  showImage(index: number): boolean {\r\n    return this._showImage(index);\r\n  }\r\n\r\n  showNextImage(swipeDirection?: ESwipeDirection): boolean {\r\n    const newIndex = this._currentIndex < this._imageStages.length - 1 ? this._currentIndex + 1 : 0;\r\n    return this._showImage(newIndex, swipeDirection);\r\n  }\r\n\r\n  showPreviousImage(swipeDirection?: ESwipeDirection): boolean {\r\n    const newIndex = this._currentIndex > 0 ? this._currentIndex - 1 : this._imageStages.length - 1;\r\n    return this._showImage(newIndex, swipeDirection);\r\n  }\r\n\r\n  getNumberOfImages(): number {\r\n    return this._imageStages.length;\r\n  }\r\n\r\n  reinitSize(): void {\r\n    if (this._isValidIndex(this._currentIndex)) {\r\n      this._imageStages[this._currentIndex]!.applyScaleMode();\r\n    }\r\n  }\r\n\r\n  setZoomAnimation(active: boolean): void {\r\n    this._imageStages.forEach((stage) => {\r\n      stage.setZoomAnimation(active);\r\n    });\r\n  }\r\n\r\n  addImageChangedCallback(callback: (index: number, imageInfo: IImageInfo) => void) {\r\n    if (!this._imageChangedCallbacks.includes(callback)) {\r\n      this._imageChangedCallbacks.push(callback);\r\n    }\r\n  }\r\n\r\n  getImageIndex(): number {\r\n    return this._currentIndex;\r\n  }\r\n\r\n  getImageInfo(index: number): IImageInfo | null {\r\n    if (this._isValidIndex(index)) {\r\n      return this._images[index]!;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  getImageElement(index: number): HTMLElement | null {\r\n    if (this._isValidIndex(index)) {\r\n      return this._images[index]!.getHtmlElement();\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private _showImage(index: number, swipeDirection: ESwipeDirection = ESwipeDirection.NONE): boolean {\r\n    if (this._isValidIndex(index)) {\r\n      if (index != this._currentIndex) {\r\n        if (!this._images[index]!.wasLoaded()) {\r\n          this._images[index]!.addWasLoadedCallback(() => {\r\n            this._hideImage(this._currentIndex, swipeDirection);\r\n            this._changeCurrentImage(index, swipeDirection);\r\n          });\r\n        } else {\r\n          this._hideImage(this._currentIndex, swipeDirection);\r\n          this._changeCurrentImage(index, swipeDirection);\r\n        }\r\n      }\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private _hideImage(index: number, swipeDirection: ESwipeDirection = ESwipeDirection.NONE) {\r\n    if (this._isValidIndex(index)) {\r\n      this._imageStages[this._currentIndex]!.hideImage(swipeDirection);\r\n    }\r\n  }\r\n\r\n  private _prepareImageStages(images: Array<Image>, scaleMode: EImageScaleMode) {\r\n    images.forEach((image) => {\r\n      const imageStage = createImageStage(image.getHtmlElement(), image.getWidth(), image.getHeight(), scaleMode);\r\n      image.addWasLoadedCallback(() => {\r\n        imageStage.applyScaleMode();\r\n      });\r\n      this._imageStages.push(imageStage);\r\n    });\r\n  }\r\n\r\n  private _isValidIndex(index: number) {\r\n    return index >= 0 && index < this._imageStages.length;\r\n  }\r\n\r\n  private _changeCurrentImage(index: number, swipeDirection: ESwipeDirection = ESwipeDirection.NONE) {\r\n    console.log('ImageViewer#changeCurrentImage', index);\r\n    this._currentIndex = index;\r\n    this._imageStages[this._currentIndex]!.showImage(swipeDirection);\r\n    this._imageChangedCallbacks.forEach((callback) => {\r\n      callback(this._currentIndex, this._images[this._currentIndex]!);\r\n    });\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { ILazyLoader, createLazyLoader } from 'mibreit-lazy-loader';\r\n\r\n// interfaces\r\nimport IImageInfo from '../interfaces/IImageInfo';\r\nimport IImageViewer from '../interfaces/IImageViewer';\r\nimport ISlideshowContainer from '../interfaces/ISlideshowContainer';\r\n\r\n// helpers\r\nimport Image from '../components/Image';\r\nimport { EImageScaleMode } from '../factories/createImageStage';\r\n\r\n// constants\r\nimport { PRELOADER_LEFT_SIZE, PRELOADER_RIGHT_SIZE } from '../constants';\r\nimport ImageViewer from '../components/ImageViewer';\r\n\r\nexport type SlideshowConfig = {\r\n  scaleMode?: EImageScaleMode;\r\n  interval?: number;\r\n  zoom?: boolean;\r\n  preloaderBeforeSize?: number;\r\n  preloaderAfterSize?: number;\r\n};\r\n\r\nexport default class SlideshowContainer implements ISlideshowContainer {\r\n  private _imageViewer: IImageViewer;\r\n  private _loader: ILazyLoader;\r\n\r\n  constructor(elements: NodeListOf<HTMLElement>, config?: SlideshowConfig) {\r\n    const images = this._prepareImages(elements);\r\n    this._loader = this._prepareLoader(images, config?.preloaderBeforeSize, config?.preloaderAfterSize);\r\n    this._imageViewer = this._prepareImageViewer(images, this._loader, config?.scaleMode, config?.zoom);\r\n\r\n    if (config?.interval) {\r\n      setInterval(() => {\r\n        this._imageViewer.showNextImage();\r\n      }, config.interval);\r\n    }\r\n\r\n    this._imageViewer.showImage(0);\r\n  }\r\n\r\n  public getViewer(): IImageViewer {\r\n    return this._imageViewer;\r\n  }\r\n\r\n  public getLoader(): ILazyLoader {\r\n    return this._loader;\r\n  }\r\n\r\n  private _prepareImages(imagesSelector: NodeListOf<HTMLElement>): Array<Image> {\r\n    const images: Array<Image> = new Array();\r\n    for (let i = 0; i < imagesSelector.length; i++) {\r\n      const image = new Image(imagesSelector[i]!);\r\n      images.push(image);\r\n    }\r\n    return images;\r\n  }\r\n\r\n  private _prepareLoader(\r\n    images: Array<Image>,\r\n    preloaderBeforeSize: number = PRELOADER_LEFT_SIZE,\r\n    preloaderAfterSize: number = PRELOADER_RIGHT_SIZE\r\n  ): ILazyLoader {\r\n    const lazyLoader = createLazyLoader(images, {preloaderBeforeSize, preloaderAfterSize});\r\n    setTimeout(() => {\r\n      lazyLoader.loadElement(0);\r\n      lazyLoader.setCurrentIndex(0);\r\n    }, 0);\r\n    return lazyLoader;\r\n  }\r\n\r\n  private _prepareImageViewer(\r\n    images: Array<Image>,\r\n    loader: ILazyLoader,\r\n    scaleMode?: EImageScaleMode,\r\n    zoom?: boolean\r\n  ): IImageViewer {\r\n    const imageViewer = new ImageViewer(images, scaleMode);\r\n    if (zoom !== undefined) {\r\n      imageViewer.setZoomAnimation(zoom);\r\n    }\r\n    if (loader) {\r\n      imageViewer.addImageChangedCallback((index: number, _imageInfo: IImageInfo) => {\r\n        loader.setCurrentIndex(index);\r\n      });\r\n      loader.setCurrentIndex(0);\r\n    }\r\n    return imageViewer;\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { SlideshowConfig } from '../containers/SlideshowContainer';\r\n\r\nexport default function checkSlideshowConfig(config: SlideshowConfig) {\r\n  if (\r\n    typeof config.scaleMode !== 'undefined' &&\r\n    (typeof config.scaleMode !== 'number' || config.scaleMode < 0 || config.scaleMode > 3)\r\n  ) {\r\n    throw new Error('checkSlideshowConfig - config scaleMode should be of type EImageScaleMode (number 0 - 3)');\r\n  }\r\n  if (typeof config.interval !== 'undefined' && (typeof config.interval !== 'number' || config.interval < 1000)) {\r\n    throw new Error('checkSlideshowConfig - config interval should be of type number and larger than 1000');\r\n  }\r\n  if (typeof config.zoom !== 'undefined' && typeof config.zoom !== 'boolean') {\r\n    throw new Error('checkSlideshowConfig - config zoom should be of type boolean');\r\n  }\r\n  if (\r\n    typeof config.preloaderAfterSize !== 'undefined' &&\r\n    (typeof config.preloaderAfterSize !== 'number' || config.preloaderAfterSize < 0)\r\n  ) {\r\n    throw new Error('checkSlideshowConfig - config preloaderAfterSize should be of type number');\r\n  }\r\n  if (\r\n    typeof config.preloaderBeforeSize !== 'undefined' &&\r\n    (typeof config.preloaderBeforeSize !== 'number' || config.preloaderBeforeSize < 0)\r\n  ) {\r\n    throw new Error('checkSlideshowConfig - config preloaderBeforeSize should be of type number');\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { getElements } from 'mibreit-dom-tools';\r\nimport SlideshowContainer, { SlideshowConfig } from '../containers/SlideshowContainer';\r\nimport ISlideshowContainer from '../interfaces/ISlideshowContainer';\r\nimport checkSlideshowConfig from '../tools/checkSlideshowConfig';\r\n\r\nexport default function (imageSelector: string, config?: SlideshowConfig): ISlideshowContainer {\r\n  if (typeof imageSelector !== 'string') {\r\n    throw new Error('createSlideshow - second parameter must be imageSelector string');\r\n  }\r\n  const elements = getElements(imageSelector);\r\n  if (elements?.length > 0) {\r\n    if (config) {\r\n      checkSlideshowConfig(config);\r\n    }\r\n    return new SlideshowContainer(elements, config);\r\n  } else {\r\n    throw new Error('createSlideshow - no images selected');\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { addClickEventListener, addCssClass } from 'mibreit-dom-tools';\r\nimport ImageStageExpand from './ImageStageExpand';\r\nimport styles from './ThumbStage.module.css';\r\n\r\nexport default class ThumbStage extends ImageStageExpand {\r\n  constructor(imageHandle: HTMLElement, imageWidth: number, imageHeight: number) {\r\n    super(imageHandle, imageWidth, imageHeight);\r\n    addCssClass(this._imageStage, styles.mibreit_ThumbStage);\r\n  }\r\n\r\n  addStageClickedCallback(callback: () => void): void {\r\n    addClickEventListener(this._imageStage, callback);\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport {\r\n  addCssClass,\r\n  addCssStyle,\r\n  appendChildElement,\r\n  createElement,\r\n  getChildNodes,\r\n  getElementDimension,\r\n  getRootFontSize,\r\n  prependChildElement,\r\n  setInnerHtml,\r\n  wrapElements,\r\n} from 'mibreit-dom-tools';\r\nimport styles from './ThumbScrollerLayout.module.css';\r\nimport nextThumbs from '../images/nextThumbs.svg';\r\nimport IImageStage from '../interfaces/IImageStage';\r\nimport IThumbScrollerLayout from '../interfaces/IThumbScrollerLayout';\r\n\r\nexport default class ThumbScrollerLayout implements IThumbScrollerLayout {\r\n  private _scrollerContainer: HTMLElement;\r\n  private _previousButton: HTMLElement;\r\n  private _nextButton: HTMLElement;\r\n  private _thumbSizeRem: number;\r\n  private _thumbStages: Array<IImageStage>;\r\n  private _numberOfVisibleThumbs: number;\r\n\r\n  constructor(container: HTMLElement, thumbStages: Array<IImageStage>, numberOfVisibleThumbs: number) {\r\n    addCssClass(container, styles.mibreit_ThumbScrollerParentContainer);\r\n    this._numberOfVisibleThumbs = numberOfVisibleThumbs;\r\n    this._thumbStages = thumbStages;\r\n    const willThumbsFitContainer = numberOfVisibleThumbs >= thumbStages.length;\r\n    this._scrollerContainer = this._createScrollerContainer(container, willThumbsFitContainer);\r\n    const [previousButton, nextButton] = this._createScrollerButtons(container, willThumbsFitContainer);\r\n    this._previousButton = previousButton;\r\n    this._nextButton = nextButton;\r\n    this._thumbSizeRem = this._calculateThumbsize(this._scrollerContainer, numberOfVisibleThumbs);\r\n    this._resizeThumbStages(this._thumbSizeRem);\r\n  }\r\n\r\n  reinitSize() {\r\n    this._thumbSizeRem = this._calculateThumbsize(this._scrollerContainer, this._numberOfVisibleThumbs);\r\n    this._resizeThumbStages(this._thumbSizeRem);\r\n  }\r\n\r\n  getThumbSizeRem(): number {\r\n    return this._thumbSizeRem;\r\n  }\r\n\r\n  getNumberOfVisibleThumbs(): number {\r\n    return this._numberOfVisibleThumbs;\r\n  }\r\n\r\n  getNumberOfThumbs(): number {\r\n    return this._thumbStages.length;\r\n  }\r\n\r\n  getThumbScrollerButtons(): { previousButton: HTMLElement; nextButton: HTMLElement } {\r\n    return { previousButton: this._previousButton, nextButton: this._nextButton };\r\n  }\r\n\r\n  getScrollerContainer(): HTMLElement {\r\n    return this._scrollerContainer;\r\n  }\r\n\r\n  private _createScrollerContainer(container: HTMLElement, centerThumbs: boolean): HTMLElement {\r\n    const childNodes: Array<Node> = getChildNodes(container);\r\n    const scrollerContainer = createElement('div');\r\n    if (centerThumbs) {\r\n      addCssClass(scrollerContainer, styles.mibreit_ThumbScrollerContainerCentered);\r\n    } else {\r\n      addCssClass(scrollerContainer, styles.mibreit_ThumbScrollerContainer);\r\n    }\r\n    wrapElements(childNodes, scrollerContainer);\r\n    return scrollerContainer;\r\n  }\r\n\r\n  private _calculateThumbsize(container: HTMLElement, numberOfVisibleThumbs: number): number {\r\n    const oneRemSize = getRootFontSize();\r\n    const containerWidthRem = getElementDimension(container).width / oneRemSize;\r\n    const thumbsize = containerWidthRem / numberOfVisibleThumbs;\r\n    return thumbsize;\r\n  }\r\n\r\n  private _createScrollerButtons(container: HTMLElement, hidden: boolean): [HTMLElement, HTMLElement] {\r\n    const previousButton = createElement('div');\r\n    setInnerHtml(previousButton, nextThumbs);\r\n    addCssClass(previousButton, styles.mibreit_ThumbScrollerPrevious);\r\n    prependChildElement(previousButton, container);\r\n\r\n    const nextButton = createElement('div');\r\n    setInnerHtml(nextButton, nextThumbs);\r\n    addCssClass(nextButton, styles.mibreit_ThumbScrollerNext);\r\n    appendChildElement(nextButton, container);\r\n\r\n    if (hidden) {\r\n      addCssStyle(previousButton, 'opacity', '0');\r\n      addCssStyle(nextButton, 'opacity', '0');\r\n    }\r\n\r\n    return [previousButton, nextButton];\r\n  }\r\n\r\n  private _resizeThumbStages(size: number) {\r\n    const innerSize: number = size * 0.9;\r\n    const margin: number = size * 0.05;\r\n    this._thumbStages.forEach((thumbStage: IImageStage) => {\r\n      thumbStage.setSize(`${innerSize}rem`, `${innerSize}rem`);\r\n      thumbStage.setMargin(`${margin}rem`);\r\n    });\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport Image from '../components/Image';\r\nimport ThumbStage from '../components/ThumbStage';\r\nimport ThumbScrollerLayout from '../components/ThumbScrollerLayout';\r\nimport IThumbScrollerLayout from '../interfaces/IThumbScrollerLayout';\r\nimport { NUMBER_OF_VISIBLE_THUMBS } from '../constants';\r\n\r\nfunction prepareThumbStages(thumbs: Array<Image>, thumbClickedCallback?: (index: number) => void): Array<ThumbStage> {\r\n  const thumbStages: Array<ThumbStage> = new Array();\r\n  thumbs.forEach((thumb, index) => {\r\n    const thumbStage = new ThumbStage(thumb.getHtmlElement(), thumb.getWidth(), thumb.getHeight());\r\n    thumb.addWasLoadedCallback(() => {\r\n      thumbStage.applyScaleMode();\r\n    });\r\n    thumbStage.showImage();\r\n    if (thumbClickedCallback)\r\n    {\r\n      thumbStage.addStageClickedCallback(() => {\r\n        thumbClickedCallback(index);\r\n      });\r\n    }    \r\n    thumbStages.push(thumbStage);\r\n  });\r\n  return thumbStages;\r\n}\r\n\r\nexport default function (\r\n  container: HTMLElement,\r\n  thumbs: Array<Image>,\r\n  numberOfVisibleThumbs: number = NUMBER_OF_VISIBLE_THUMBS,\r\n  thumbClickedCallback?: (index: number) => void\r\n): IThumbScrollerLayout {\r\n  const thumbStages = prepareThumbStages(thumbs, thumbClickedCallback);\r\n\r\n  return new ThumbScrollerLayout(\r\n    container,\r\n    thumbStages,\r\n    numberOfVisibleThumbs\r\n  );\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { addCssClass, addCssStyle, createElement, getChildNodes, wrapElements } from 'mibreit-dom-tools';\r\nimport styles from './HorizontalScroller.module.css';\r\n\r\nexport default class HorizontalScroller {\r\n  private _scroller: HTMLElement;\r\n\r\n  constructor(container: HTMLElement) {\r\n    this._scroller = this._createScroller(container);\r\n  }\r\n\r\n  scrollTo(position: number, useRem: boolean = false): boolean {\r\n    let positionCss: string;\r\n    if (useRem) {\r\n      positionCss = `${position}rem`;\r\n    } else {\r\n      positionCss = `${position}px`;\r\n    }\r\n    addCssStyle(this._scroller, 'transform', `translate(${positionCss})`);\r\n    return true;\r\n  }\r\n\r\n  private _createScroller(container: HTMLElement): HTMLElement {\r\n    const childNodes: Array<Node> = getChildNodes(container);\r\n    const scroller = createElement('div');\r\n    addCssClass(scroller, styles.mibreit_HorizontalScroller);\r\n    wrapElements(childNodes, scroller);\r\n\r\n    return scroller;\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport IThumbScroller from '../interfaces/IThumbScroller';\r\nimport IThumbScrollerLayout from '../interfaces/IThumbScrollerLayout';\r\nimport HorizontalScroller from './HorizontalScroller';\r\n\r\nexport default class ThumbScroller implements IThumbScroller {\r\n  private _scroller: HorizontalScroller;\r\n  private _layout: IThumbScrollerLayout;\r\n  private _scrollIndexChangedCallbacks: Array<(index: number) => void> = new Array();\r\n  private _currentScrollIndex: number = 0;\r\n\r\n  constructor(layout: IThumbScrollerLayout) {\r\n    this._layout = layout;\r\n    this._scroller = new HorizontalScroller(layout.getScrollerContainer());\r\n\r\n    console.log(\r\n      'ThumbScroller#constructor - thumbSizeRem = ',\r\n      this._layout.getThumbSizeRem(),\r\n      ', numberOfThumbs = ',\r\n      this._layout.getNumberOfThumbs(),\r\n      ', numberOfVisibleThumbs = ',\r\n      this._layout.getNumberOfVisibleThumbs()\r\n    );\r\n  }\r\n\r\n  reinitSize() {\r\n    this._layout.reinitSize();\r\n    this.scrollTo(this._currentScrollIndex, false);\r\n  }\r\n\r\n  scrollTo(index: number, useCenterIndex: boolean = true): void {\r\n    let newIndex = index;\r\n    if (useCenterIndex) {\r\n      newIndex -= Math.floor(this._layout.getNumberOfVisibleThumbs() / 2);\r\n    }\r\n\r\n    const normalizedIndex = this._normalizeIndex(newIndex);\r\n\r\n    console.log('ThumbScroller#scrollTo', newIndex, normalizedIndex);\r\n\r\n    this._currentScrollIndex = normalizedIndex;\r\n    const currentScrollPosition = -normalizedIndex * this._layout.getThumbSizeRem();\r\n    this._scroller.scrollTo(currentScrollPosition, true);\r\n    this._scrollIndexChangedCallbacks.forEach((callback) => {\r\n      callback(this._currentScrollIndex);\r\n    });\r\n  }\r\n\r\n  scrollNext(): void {\r\n    let newIndex = this._currentScrollIndex + this._layout.getNumberOfVisibleThumbs();\r\n    const maxPos = this._layout.getNumberOfThumbs() - this._layout.getNumberOfVisibleThumbs();\r\n    if (this._currentScrollIndex === maxPos) {\r\n      newIndex = 0;\r\n    } else if (newIndex >= maxPos) {\r\n      newIndex = maxPos;\r\n    }\r\n    this.scrollTo(newIndex, false);\r\n  }\r\n\r\n  scrollPrevious(): void {\r\n    let newIndex = this._currentScrollIndex - this._layout.getNumberOfVisibleThumbs();\r\n    const maxPos = this._layout.getNumberOfThumbs() - this._layout.getNumberOfVisibleThumbs();\r\n    if (this._currentScrollIndex === 0) {\r\n      newIndex = maxPos;\r\n    } else if (newIndex < 0) {\r\n      newIndex = 0;\r\n    }\r\n    this.scrollTo(newIndex, false);\r\n  }\r\n\r\n  addScrollIndexChangedCallback(callback: (index: number) => void): void {\r\n    if (!this._scrollIndexChangedCallbacks.includes(callback)) {\r\n      this._scrollIndexChangedCallbacks.push(callback);\r\n    }\r\n  }\r\n\r\n  private _normalizeIndex(index: number): number {\r\n    const maxPos = this._layout.getNumberOfThumbs() - this._layout.getNumberOfVisibleThumbs();\r\n    if (index >= maxPos) {\r\n      return maxPos;\r\n    } else if (index < 0) {\r\n      return 0;\r\n    } else {\r\n      return index;\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { ILazyLoader, createLazyLoader } from 'mibreit-lazy-loader';\r\nimport { addClickEventListener } from 'mibreit-dom-tools';\r\nimport Image from '../components/Image';\r\nimport createThumbScrollerLayout from '../factories/createThumbScrollerLayout';\r\nimport IThumbScroller from '../interfaces/IThumbScroller';\r\nimport IThumbScrollerLayout from '../interfaces/IThumbScrollerLayout';\r\nimport ThumbScroller from '../components/ThumbScroller';\r\n\r\nconst DEFAULT_NUMBER_VISIBLE_THUMBS = 7;\r\n\r\nexport type ThumbScrollerConfig = {\r\n  numberOfVisibleThumbs?: number;\r\n  initialIndex?: number;\r\n};\r\n\r\nexport default class ThumbScrollerContainer {\r\n  private _thumbScroller: IThumbScroller | null = null;\r\n\r\n  constructor(\r\n    thumbContainer: HTMLElement,\r\n    thumbElements: NodeListOf<HTMLElement>,\r\n    config?: ThumbScrollerConfig,\r\n    thumbClickedCallback?: (index: number) => void\r\n  ) {\r\n    const numberVisibleThumbs = config?.numberOfVisibleThumbs\r\n      ? config.numberOfVisibleThumbs\r\n      : DEFAULT_NUMBER_VISIBLE_THUMBS;\r\n    const thumbs = this._prepareThumbs(thumbElements);\r\n    const lazyLoader = createLazyLoader(thumbs, {preloaderBeforeSize: numberVisibleThumbs, preloaderAfterSize: numberVisibleThumbs});\r\n\r\n    const layout: IThumbScrollerLayout = createThumbScrollerLayout(\r\n      thumbContainer,\r\n      thumbs,\r\n      numberVisibleThumbs,\r\n      thumbClickedCallback\r\n    );\r\n    if (numberVisibleThumbs < thumbs.length) {\r\n      this._thumbScroller = this._prepareThumbScroller(layout, lazyLoader, config?.initialIndex);\r\n      this._addThumbScrollerInteraction(this._thumbScroller, layout);\r\n    }\r\n    else {\r\n      setTimeout(() => {\r\n        lazyLoader.loadElement(0);\r\n        lazyLoader.setCurrentIndex(0);\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  getScroller(): IThumbScroller | null {\r\n    return this._thumbScroller;\r\n  }\r\n\r\n  private _prepareThumbs(thumbSelector: NodeListOf<HTMLElement>): Array<Image> {\r\n    const thumbs: Array<Image> = new Array();\r\n    for (let i = 0; i < thumbSelector.length; i++) {\r\n      const image: Image = new Image(thumbSelector[i]!);\r\n      thumbs.push(image);\r\n    }\r\n    return thumbs;\r\n  }\r\n\r\n  private _prepareThumbScroller(\r\n    layout: IThumbScrollerLayout,\r\n    loader: ILazyLoader,\r\n    initialIndex: number = 0\r\n  ): IThumbScroller {\r\n    const thumbScroller = new ThumbScroller(layout);\r\n    thumbScroller.addScrollIndexChangedCallback((index: number) => {\r\n      loader.setCurrentIndex(index);\r\n    });\r\n    thumbScroller.scrollTo(initialIndex);\r\n    return thumbScroller;\r\n  }\r\n\r\n  private _addThumbScrollerInteraction(thumbScroller: IThumbScroller, thumbScrollerLayout: IThumbScrollerLayout) {\r\n    const { previousButton, nextButton } = thumbScrollerLayout.getThumbScrollerButtons();\r\n    addClickEventListener(nextButton, () => {\r\n      thumbScroller.scrollNext();\r\n    });\r\n    addClickEventListener(previousButton, () => {\r\n      thumbScroller.scrollPrevious();\r\n    });\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { ThumbScrollerConfig } from '../containers/ThumbScrollerContainer';\r\n\r\nexport default function checkConfig(config: ThumbScrollerConfig) {\r\n  if (\r\n    typeof config.numberOfVisibleThumbs !== 'undefined' &&\r\n    (typeof config.numberOfVisibleThumbs !== 'number' || config.numberOfVisibleThumbs < 0)\r\n  ) {\r\n    throw new Error('checkThumbScrollerConfig - numberOfVisibleThumbs is invalid number');\r\n  }\r\n  if (\r\n    typeof config.initialIndex !== 'undefined' &&\r\n    (typeof config.initialIndex !== 'number' || config.initialIndex < 0)\r\n  ) {\r\n    throw new Error('checkThumbScrollerConfig - config initialIndex should be of type number');\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { getElement, getElements } from 'mibreit-dom-tools';\r\nimport ThumbScrollerContainer, { ThumbScrollerConfig } from '../containers/ThumbScrollerContainer';\r\nimport IThumbScroller from '../interfaces/IThumbScroller';\r\nimport checkConfig from '../tools/checkThumbScrollerConfig';\r\n\r\nexport default function (\r\n  containerSelector: string,\r\n  thumbSelector: string,\r\n  config?: ThumbScrollerConfig,\r\n  thumbClickedCallback?: (index: number) => void\r\n): IThumbScroller | null {\r\n  if (typeof containerSelector !== 'string') {\r\n    throw new Error('createThumbScroller - first parameter must be containerSelector string');\r\n  }\r\n  if (typeof thumbSelector !== 'string') {\r\n    throw new Error('createThumbScroller - second parameter must be imageSelector string');\r\n  }\r\n  if (config) {\r\n    checkConfig(config);\r\n  }\r\n\r\n  const elements = getElements(thumbSelector);\r\n  const container = getElement(containerSelector);\r\n\r\n  if (container && elements?.length > 0) {\r\n    return new ThumbScrollerContainer(container, elements, config, thumbClickedCallback).getScroller();\r\n  } else {\r\n    throw new Error('createThumbScroller - no images selected');\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\n// interfaces\r\nimport IGalleryContainer from '../interfaces/IGalleryContainer';\r\nimport IImageViewer from '../interfaces/IImageViewer';\r\nimport IThumbScroller from '../interfaces/IThumbScroller';\r\nimport IFullscreen from '../interfaces/IFullscreen';\r\nimport { ILazyLoader } from 'mibreit-lazy-loader';\r\nexport default class GalleryContainer implements IGalleryContainer {\r\n  private _viewer: IImageViewer;\r\n  private _loader: ILazyLoader;\r\n  private _fullscreenContainer: IFullscreen | null = null;\r\n  private _thumbScroller: IThumbScroller | null = null;\r\n\r\n  constructor(\r\n    viewer: IImageViewer,\r\n    loader: ILazyLoader,\r\n    thumbScroller: IThumbScroller | null,\r\n    fullscreenContainer: IFullscreen | null\r\n  ) {\r\n    this._viewer = viewer;\r\n    this._loader = loader;\r\n    this._thumbScroller = thumbScroller;\r\n    this._fullscreenContainer = fullscreenContainer;\r\n  }\r\n\r\n  getViewer(): IImageViewer {\r\n    return this._viewer;\r\n  }\r\n\r\n  getLoader(): ILazyLoader {\r\n    return this._loader;\r\n  }\r\n\r\n  getScroller(): IThumbScroller | null {\r\n    return this._thumbScroller;\r\n  }\r\n\r\n  getFullscreen(): IFullscreen | null {\r\n    return this._fullscreenContainer;\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport {\r\n  addClickEventListener,\r\n  addCssClass,\r\n  addCssStyle,\r\n  appendChildElement,\r\n  createElement,\r\n  getElement,\r\n  prependBeforeChild,\r\n  removeCssStyle,\r\n  removeElement,\r\n  setAttribute,\r\n  setInnerHtml,\r\n} from 'mibreit-dom-tools';\r\nimport IFullscreen from '../interfaces/IFullscreen';\r\nimport styles from './FullscreenContainer.module.css';\r\nimport fullscreenClose from '../images/close.svg';\r\n\r\nconst GALLERY_PLACEHOLDER_ID = 'slideshowContainerPlaceholder';\r\nconst THUMBS_PLACEHOLDER_ID = 'thumbContainerPlaceholder';\r\n\r\nexport type FullscreenConfig = {\r\n  slideshowContainerSelector: string;\r\n  thumbContainerSelector: string;\r\n};\r\n\r\nexport default class FullscreenContainer implements IFullscreen {\r\n  private _fullscreenChangedCallbacks: Array<(active: boolean) => void> = [];\r\n  private _fullscreenActive: boolean;\r\n  private _slideshowContainer: HTMLElement;\r\n  private _thumbContainer: HTMLElement | null = null;\r\n  private _fullScreenContainer: HTMLElement;\r\n  private _slideshowContainerPlaceholder: HTMLElement;\r\n  private _thumbContainerPlaceholder: HTMLElement | null = null;\r\n  private _fullScreenCloseButton: HTMLElement;\r\n  private _usePlaceholder: boolean;\r\n\r\n  constructor(\r\n    slideshowContainer: HTMLElement,\r\n    thumbContainer: HTMLElement | null = null,\r\n    usePlaceholder: boolean = true\r\n  ) {\r\n    this._fullscreenActive = false;\r\n    this._slideshowContainer = slideshowContainer;\r\n    this._thumbContainer = thumbContainer;\r\n    this._usePlaceholder = usePlaceholder;\r\n    this._fullScreenContainer = this._createFullscreenContainer();\r\n    this._fullScreenCloseButton = this._createFullscreenCloseButton(this._fullScreenContainer);\r\n    this._slideshowContainerPlaceholder = this._createSlideshowContainerPlaceholder();\r\n    if (thumbContainer) {\r\n      this._thumbContainerPlaceholder = this._createThumbContainerPlaceholder();\r\n    }\r\n  }\r\n\r\n  activate() {\r\n    if (!this._fullscreenActive) {\r\n      this._moveGalleryToFullscreen();\r\n      this._moveThumbsToFullscreen();\r\n      this._addFullscreen();\r\n      this._setupCloseButtonHandler();\r\n      this._fullscreenActive = true;\r\n      this._fullscreenChangedCallbacks.forEach((callback) => {\r\n        callback(true);\r\n      });\r\n    }\r\n  }\r\n\r\n  deActivate() {\r\n    if (this._fullscreenActive) {\r\n      this._removeGalleryFromFullscreen();\r\n      this._removeThumbsFromFullscreen();\r\n      this._removeFullscreen();\r\n      this._fullscreenActive = false;\r\n      this._fullscreenChangedCallbacks.forEach((callback) => {\r\n        callback(false);\r\n      });\r\n    }\r\n  }\r\n\r\n  addFullscreenChangedCallback(callback: (active: boolean) => void) {\r\n    if (!this._fullscreenChangedCallbacks.includes(callback)) {\r\n      this._fullscreenChangedCallbacks.push(callback);\r\n    }\r\n  }\r\n\r\n  isFullscreenActive(): boolean {\r\n    return this._fullscreenActive;\r\n  }\r\n\r\n  setBackgroundColor(color: string): void {\r\n    addCssStyle(this._fullScreenContainer, 'background-color', color);\r\n  }\r\n\r\n  private _createFullscreenContainer(): HTMLElement {\r\n    const fullScreenContainer = createElement('div');\r\n    addCssClass(fullScreenContainer, styles.mibreit_Fullscreen);\r\n    return fullScreenContainer;\r\n  }\r\n\r\n  private _createFullscreenCloseButton(fullScreenContainer: HTMLElement): HTMLElement {\r\n    const fullScreenCloseButton = createElement('div');\r\n    setInnerHtml(fullScreenCloseButton, fullscreenClose);\r\n    addCssClass(fullScreenCloseButton, styles.mibreit_Fullscreen_exit);\r\n    appendChildElement(fullScreenCloseButton, fullScreenContainer);\r\n    return fullScreenCloseButton;\r\n  }\r\n\r\n  private _createSlideshowContainerPlaceholder(): HTMLElement {\r\n    const slideshowContainerPlaceholder = createElement('div');\r\n    setAttribute(slideshowContainerPlaceholder, 'id', GALLERY_PLACEHOLDER_ID);\r\n    return slideshowContainerPlaceholder;\r\n  }\r\n\r\n  private _createThumbContainerPlaceholder(): HTMLElement {\r\n    const thumbContainerPlaceholder = createElement('div');\r\n    setAttribute(thumbContainerPlaceholder, 'id', THUMBS_PLACEHOLDER_ID);\r\n    return thumbContainerPlaceholder;\r\n  }\r\n\r\n  private _addFullscreen() {\r\n    const body = getElement('body');\r\n    if (body != null) {\r\n      appendChildElement(this._fullScreenContainer, body);\r\n    }\r\n  }\r\n\r\n  private _removeFullscreen() {\r\n    removeElement(this._fullScreenContainer);\r\n  }\r\n\r\n  private _moveGalleryToFullscreen() {\r\n    if (this._usePlaceholder) {\r\n      prependBeforeChild(this._slideshowContainerPlaceholder, this._slideshowContainer);\r\n    }\r\n    appendChildElement(this._slideshowContainer, this._fullScreenContainer);\r\n    addCssStyle(this._slideshowContainer, 'width', '100%');\r\n    addCssStyle(this._slideshowContainer, 'flex-grow', '1');\r\n  }\r\n\r\n  private _removeGalleryFromFullscreen() {\r\n    removeElement(this._slideshowContainer);\r\n    if (this._usePlaceholder) {\r\n      prependBeforeChild(this._slideshowContainer, this._slideshowContainerPlaceholder);\r\n      removeElement(this._slideshowContainerPlaceholder);\r\n    }\r\n    removeCssStyle(this._slideshowContainer, 'width');\r\n    removeCssStyle(this._slideshowContainer, 'flex-grow');\r\n  }\r\n\r\n  private _moveThumbsToFullscreen() {\r\n    if (this._thumbContainer && this._thumbContainerPlaceholder) {\r\n      if (this._usePlaceholder) {\r\n        prependBeforeChild(this._thumbContainerPlaceholder, this._thumbContainer);\r\n      }\r\n      appendChildElement(this._thumbContainer, this._fullScreenContainer);\r\n      addCssStyle(this._thumbContainer, 'flex-grow', '0');\r\n    }\r\n  }\r\n\r\n  private _removeThumbsFromFullscreen() {\r\n    if (this._thumbContainer && this._thumbContainerPlaceholder) {\r\n      removeElement(this._thumbContainer);\r\n      if (this._usePlaceholder) {\r\n        prependBeforeChild(this._thumbContainer, this._thumbContainerPlaceholder);\r\n        removeElement(this._thumbContainerPlaceholder);\r\n      }\r\n      removeCssStyle(this._thumbContainer, 'flex-grow');\r\n    }\r\n  }\r\n\r\n  private _setupCloseButtonHandler() {\r\n    addClickEventListener(this._fullScreenCloseButton, (event: MouseEvent | undefined) => {\r\n      event?.stopPropagation();\r\n      if (this._fullscreenActive) {\r\n        this.deActivate();\r\n      }\r\n    });\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nexport default function (callback: () => void, wait: number, smooth: boolean = true) {\r\n  let timeout: number;\r\n  let waiting: boolean = false;\r\n\r\n  if (smooth) {\r\n    return function debouncedCallback() {\r\n      if (!waiting) {\r\n        const later = () => {\r\n          waiting = false;\r\n          clearTimeout(timeout);\r\n          callback();\r\n        };\r\n        waiting = true;\r\n        timeout = window.setTimeout(later, wait);\r\n      }\r\n    };\r\n  } else {\r\n    return function debouncedCallback() {\r\n      const later = () => {\r\n        clearTimeout(timeout);\r\n        callback();\r\n      };\r\n      clearTimeout(timeout);\r\n      timeout = window.setTimeout(later, wait);\r\n    };\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport GalleryContainer from '../containers/GalleryContainer';\r\nimport SlideshowContainer, { SlideshowConfig } from '../containers/SlideshowContainer';\r\nimport IGalleryContainer from '../interfaces/IGalleryContainer';\r\nimport IImageViewer from '../interfaces/IImageViewer';\r\nimport IThumbScroller from '../interfaces/IThumbScroller';\r\nimport ThumbScrollerContainer, { ThumbScrollerConfig } from '../containers/ThumbScrollerContainer';\r\nimport IImageInfo from '../interfaces/IImageInfo';\r\nimport FullscreenContainer from '../containers/FullscreenContainer';\r\nimport {\r\n  addCssClass,\r\n  addCssStyle,\r\n  appendChildElement,\r\n  createElement,\r\n  prependChildElement,\r\n  setInnerHtml,\r\n  addEventListener,\r\n  getElementDimension,\r\n  getElementPosition,\r\n  addKeyEventListener,\r\n  getKeyFromEvent,\r\n  addResizeEventListener,\r\n  removeCssStyle,\r\n} from 'mibreit-dom-tools';\r\n\r\n// images\r\nimport nextImageSvg from '../images/nextImage.svg';\r\nimport fullscreenSvg from '../images/fullscreen.svg';\r\n\r\n// styles\r\nimport styles from './GalleryContainerBuilder.module.css';\r\nimport animationStyles from '../tools/animations.module.css';\r\n\r\n// constants\r\nimport { GALLERY_BUTTONS_SHOW_OPACITY } from '../constants';\r\nimport SwipeHander, { ESwipeDirection, TPosition } from '../components/SwipeHandler';\r\nimport IFullscreen from '../interfaces/IFullscreen';\r\nimport debounce from '../tools/debounce';\r\nimport { ILazyLoader } from 'mibreit-lazy-loader';\r\n\r\nconst RESIZE_DEBOUNCE_TIMER = 500;\r\n\r\nexport default class GalleryContainerBuilder {\r\n  private _container: HTMLElement;\r\n  private _fullscreenButton: HTMLElement | null = null;\r\n  private _viewer: IImageViewer;\r\n  private _loader: ILazyLoader;\r\n  private _thumbScroller: IThumbScroller | null = null;\r\n  private _fullscreenContainer: IFullscreen | null = null;\r\n\r\n  constructor(container: HTMLElement, images: NodeListOf<HTMLElement>, config?: SlideshowConfig) {\r\n    this._container = container;\r\n\r\n    const slideshowContainer = new SlideshowContainer(images, config);\r\n    this._viewer = slideshowContainer.getViewer();\r\n    this._loader = slideshowContainer.getLoader();\r\n    const { previousButton, nextButton } = this._createPreviousNextButtons(container);\r\n    this._setupHoverEvents(container, [previousButton, nextButton]);\r\n    this._setupSwipeHandler(container, this._viewer);\r\n  }\r\n\r\n  public addThumbScroller(\r\n    thumbContainer: HTMLElement,\r\n    thumbs: NodeListOf<HTMLElement>,\r\n    config?: ThumbScrollerConfig\r\n  ): GalleryContainerBuilder {\r\n    this._thumbScroller = new ThumbScrollerContainer(thumbContainer, thumbs, config, (index: number) => {\r\n      this._loader.setCurrentIndex(index);\r\n      this._viewer.showImage(index);\r\n    }).getScroller();\r\n\r\n    if (this._thumbScroller) {\r\n      this._viewer.addImageChangedCallback((index: number, _imageInfo: IImageInfo) => {\r\n        this._thumbScroller!.scrollTo(index, true);\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public build(): IGalleryContainer {\r\n    this._fullscreenContainer = new FullscreenContainer(this._container);\r\n    this._fullscreenButton = this._createFullscreenButton(this._container);\r\n    this._setupHoverEvents(this._container, [this._fullscreenButton]);\r\n    this._setupKeyEvents(this._viewer, this._fullscreenContainer);\r\n    this._setupFullscreenClickEvent(this._fullscreenButton, this._fullscreenContainer, this._viewer);\r\n    this._setupResizeHandler(this._viewer, this._thumbScroller);\r\n    if (this._fullscreenContainer && this._fullscreenButton) {\r\n      this._setupFullscreenChangedHandler(\r\n        this._fullscreenContainer,\r\n        this._fullscreenButton,\r\n        this._viewer,\r\n        this._thumbScroller\r\n      );\r\n    }\r\n\r\n    return new GalleryContainer(this._viewer, this._loader, this._thumbScroller, this._fullscreenContainer);\r\n  }\r\n\r\n  private _createPreviousNextButtons(container: HTMLElement): { previousButton: HTMLElement; nextButton: HTMLElement } {\r\n    const previousButton = createElement('div');\r\n    setInnerHtml(previousButton, nextImageSvg);\r\n    addCssClass(previousButton, styles.mibreit_GalleryPrevious);\r\n    addCssClass(previousButton, animationStyles.mibreit_GalleryFade);\r\n    prependChildElement(previousButton, container);\r\n    const nextButton = createElement('div');\r\n    setInnerHtml(nextButton, nextImageSvg);\r\n    addCssClass(nextButton, styles.mibreit_GalleryNext);\r\n    addCssClass(nextButton, animationStyles.mibreit_GalleryFade);\r\n    appendChildElement(nextButton, container);\r\n    return { previousButton, nextButton };\r\n  }\r\n\r\n  private _setupSwipeHandler(container: HTMLElement, imageViewer: IImageViewer) {\r\n    addCssStyle(container, 'touch-action', 'pinch-zoom pan-y');\r\n\r\n    new SwipeHander(container, (direction: ESwipeDirection, position: TPosition) => {\r\n      const containerWidth: number = getElementDimension(container).width;\r\n      const containerPosX: number = getElementPosition(container).x;\r\n      if (direction === ESwipeDirection.LEFT) {\r\n        imageViewer.showPreviousImage(direction);\r\n      } else if (direction === ESwipeDirection.RIGHT) {\r\n        imageViewer.showNextImage(direction);\r\n      } else {\r\n        if (position.x - containerPosX > containerWidth / 2) {\r\n          imageViewer.showNextImage();\r\n        } else {\r\n          imageViewer.showPreviousImage();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private _setupResizeHandler(imageViewer: IImageViewer, thumbScroller: IThumbScroller | null) {\r\n    if (thumbScroller) {\r\n      const debouncedThumbResizer = debounce(\r\n        () => {\r\n          thumbScroller.reinitSize();\r\n        },\r\n        RESIZE_DEBOUNCE_TIMER,\r\n        false\r\n      );\r\n      addResizeEventListener(() => {\r\n        imageViewer.reinitSize();\r\n        debouncedThumbResizer();\r\n      });\r\n    } else {\r\n      addResizeEventListener(() => {\r\n        imageViewer.reinitSize();\r\n      });\r\n    }\r\n  }\r\n\r\n  private _createFullscreenButton(container: HTMLElement): HTMLElement {\r\n    const fullscreenButton = createElement('div');\r\n    setInnerHtml(fullscreenButton, fullscreenSvg);\r\n    addCssClass(fullscreenButton, styles.mibreit_GalleryFullscreenButton);\r\n    addCssClass(fullscreenButton, animationStyles.mibreit_GalleryFade);\r\n    appendChildElement(fullscreenButton, container);\r\n    return fullscreenButton;\r\n  }\r\n\r\n  private _setupHoverEvents(container: HTMLElement, buttons: Array<HTMLElement>) {\r\n    addEventListener(container, 'mouseenter', () => {\r\n      buttons.forEach((button: HTMLElement) => {\r\n        addCssStyle(button, 'opacity', `${GALLERY_BUTTONS_SHOW_OPACITY}`);\r\n      });\r\n    });\r\n    addEventListener(container, 'mouseleave', () => {\r\n      buttons.forEach((button: HTMLElement) => {\r\n        addCssStyle(button, 'opacity', '0');\r\n      });\r\n    });\r\n  }\r\n\r\n  private _setupKeyEvents(imageViewer: IImageViewer, fullScreen: IFullscreen) {\r\n    addKeyEventListener((event: KeyboardEvent) => {\r\n      const key: string = getKeyFromEvent(event);\r\n      switch (key) {\r\n        case 'ArrowRight':\r\n          imageViewer.showNextImage();\r\n          break;\r\n        case 'ArrowLeft':\r\n          imageViewer.showPreviousImage();\r\n          break;\r\n        case 'Escape':\r\n          fullScreen.deActivate();\r\n          break;\r\n        case 'f':\r\n          if (fullScreen.isFullscreenActive()) {\r\n            fullScreen.deActivate();\r\n          } else {\r\n            fullScreen.activate();\r\n          }\r\n          break;\r\n        default:\r\n          if (fullScreen.isFullscreenActive()) {\r\n            fullScreen.deActivate();\r\n          }\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  private _setupFullscreenClickEvent(\r\n    fullscreenButton: HTMLElement,\r\n    fullScreen: IFullscreen,\r\n    imageViewer: IImageViewer\r\n  ) {\r\n    addEventListener(fullscreenButton, 'pointerdown', (event: PointerEvent) => {\r\n      event.stopPropagation();\r\n    });\r\n    addEventListener(fullscreenButton, 'pointerup', (event: PointerEvent) => {\r\n      event.stopPropagation();\r\n      if (!fullScreen.isFullscreenActive()) {\r\n        fullScreen.activate();\r\n        imageViewer.reinitSize();\r\n        addCssStyle(fullscreenButton, 'display', 'none');\r\n      }\r\n    });\r\n  }\r\n\r\n  private _setupFullscreenChangedHandler(\r\n    FullscreenContainer: IFullscreen,\r\n    fullscreenButton: HTMLElement,\r\n    imageViewer: IImageViewer,\r\n    thumbScroller: IThumbScroller | null\r\n  ) {\r\n    FullscreenContainer.addFullscreenChangedCallback((active: boolean) => {\r\n      if (thumbScroller) {\r\n        thumbScroller.reinitSize();\r\n      }\r\n      imageViewer.reinitSize();\r\n      if (active) {\r\n        addCssStyle(fullscreenButton, 'display', 'none');\r\n      } else {\r\n        removeCssStyle(fullscreenButton, 'display');\r\n      }\r\n    });\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { addCssStyle, getElement, getElements } from 'mibreit-dom-tools';\r\nimport checkSlideshowConfig from '../tools/checkSlideshowConfig';\r\n\r\nimport GalleryContainerBuilder from '../builders/GalleryContainerBuilder';\r\n\r\n// Interfaces and types\r\nimport IGalleryContainer from '../interfaces/IGalleryContainer';\r\nimport { SlideshowConfig } from '../containers/SlideshowContainer';\r\nimport { ThumbScrollerConfig } from '../containers/ThumbScrollerContainer';\r\nimport checkThumbScrollerConfig from '../tools/checkThumbScrollerConfig';\r\n\r\nexport type GalleryConfig = SlideshowConfig &\r\n  ThumbScrollerConfig & {\r\n    thumbContainerSelector?: string;\r\n    thumbSelector?: string;\r\n  };\r\n\r\nexport default function (containerSelector: string, imageSelector: string, config?: GalleryConfig): IGalleryContainer {\r\n  if (typeof containerSelector !== 'string') {\r\n    throw new Error('createGallery - first parameter must be containerSelector string');\r\n  }\r\n  if (typeof imageSelector !== 'string') {\r\n    throw new Error('createGallery - second parameter must be imageSelector string');\r\n  }\r\n  if (config) {\r\n    checkSlideshowConfig(config);\r\n  }\r\n  const elements = getElements(imageSelector);\r\n  const container = getElement(containerSelector);\r\n  if (container && elements?.length > 0) {\r\n    const builder = new GalleryContainerBuilder(container, elements, config);\r\n\r\n    if (typeof config?.thumbSelector === 'string' && typeof config?.thumbContainerSelector === 'string') {\r\n      checkThumbScrollerConfig(config);\r\n      const thumbContainer = getElement(config.thumbContainerSelector);\r\n      const thumbs = getElements(config.thumbSelector);\r\n      if (thumbContainer && thumbs) {\r\n        if (thumbs.length > 1) {\r\n          builder.addThumbScroller(thumbContainer, thumbs, config);\r\n        } else {\r\n          addCssStyle(thumbContainer, 'display', 'none');\r\n        }\r\n      }\r\n    }\r\n\r\n    return builder.build();\r\n  } else {\r\n    throw new Error('createGallery - no images selected');\r\n  }\r\n}\r\n","/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport {\r\n  addCssClass,\r\n  addCssStyle,\r\n  appendChildElement,\r\n  cloneElement,\r\n  createElement,\r\n  getElement,\r\n  getElements,\r\n  removeCssStyle,\r\n} from 'mibreit-dom-tools';\r\n\r\nimport checkSlideshowConfig from '../tools/checkSlideshowConfig';\r\n\r\nimport GalleryContainerBuilder from '../builders/GalleryContainerBuilder';\r\n\r\n// Interfaces\r\nimport IGalleryContainer from '../interfaces/IGalleryContainer';\r\nimport { SlideshowConfig } from '../containers/SlideshowContainer';\r\n\r\nconst IMAGES_CONTAINER_CLASS = 'mibreit_gallery_fullscreen_only_container';\r\n\r\nfunction createImagesContainer(): HTMLElement {\r\n  const container = createElement('div');\r\n  addCssStyle(container, 'display', 'none');\r\n  addCssClass(container, IMAGES_CONTAINER_CLASS);\r\n  const body = getElement('body');\r\n  appendChildElement(container, body!);\r\n  return container;\r\n}\r\n\r\nexport default function (imageSelector: string, config: SlideshowConfig): IGalleryContainer {\r\n  if (typeof imageSelector !== 'string') {\r\n    throw new Error('createFullscreenOnlyGallery - first parameter must be imageSelector string');\r\n  }\r\n  checkSlideshowConfig(config);\r\n\r\n  const elements = getElements(imageSelector);\r\n  if (elements?.length > 0) {\r\n    const container = createImagesContainer();\r\n    elements.forEach((image: HTMLElement) => {\r\n      appendChildElement(cloneElement(image), container);\r\n    });\r\n    const clonedElements: NodeListOf<HTMLElement> = getElements(`.${IMAGES_CONTAINER_CLASS} > img`);\r\n    const builder = new GalleryContainerBuilder(container, clonedElements, config);\r\n    const galleryContainer = builder.build();\r\n\r\n    const fullscreen = galleryContainer.getFullscreen();\r\n    const viewer = galleryContainer.getViewer();\r\n    if (fullscreen && viewer) {\r\n      fullscreen.addFullscreenChangedCallback((active: boolean) => {\r\n        if (active) {\r\n          removeCssStyle(container, 'display');\r\n          viewer.reinitSize();\r\n        } else {\r\n          addCssStyle(container, 'display', 'none');\r\n        }\r\n      });\r\n    }\r\n    return galleryContainer;\r\n  } else {\r\n    throw new Error('createFullscreenOnlyGallery - no images selected');\r\n  }\r\n}\r\n"],"names":["documentReady","callback","getRootFontSize","createElement","tagName","createInputElement","type","input","cloneElement","element","removeElement","prependChildElement","parent","appendChildElement","prependBeforeChild","child","appendAfterChild","getChildNodes","nodes","nodesArray","setInnerHtml","inner","wrapElements","elements","wrapper","unwrapElements","getParentElement","getElementDimension","elementRect","isElementWithinWindow","windowHeight","windowWidth","getElementPosition","rect","scrollLeft","scrollTop","getCssClasses","getAttribute","addCssClass","cssClass","removeCssClass","removeAllCssClasses","overwriteCssClasses","cssClasses","getCssStyle","styleName","getCssStyles","getComputedCssStyle","addCssStyle","styleProperty","removeCssStyle","removeAllCssStyles","overwriteCssStyles","styles","hasAttribute","attribute","setAttribute","value","removeAttribute","addClickEventListener","addKeyEventListener","addScrollEventListener","addResizeEventListener","addEventListener","event","disableContextMenu","disableDragging","getElement","selector","getElements","getKeyFromEvent","DomTools","TRESHHOLD","MAXTIME","ESwipeDirection","ESwipeDirection2","SwipeHander","target","__publicField","touchEndPosition","direction","start","end","diff","sleepTillNextRenderFinished","resolve","reject","ANIMATIONS_RESET_TIMEOUT","ImageStage","imageHandle","imageWidth","imageHeight","activate","stageDimension","widthCss","heightCss","marginCss","swipeDirection","animationStyles","stageWidth","stageHeight","width","height","x","y","ImageStageFitAspect","aspect","newWidth","newHeight","ImageStageExpand","stageAspect","ImageStageStretch","_stageWidth","_stageHeight","ImageStageNoScale","EImageScaleMode","EImageScaleMode2","createImageStage","scaleMode","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","e","rejected","result","__generator","body","_","t","f","g","verb","n","v","op","PRELOADER_WINDOW_SIZE","LazyLoader","elementLoaders","preloaderBeforeSize","preloaderAfterSize","newIndex","index","loaded","location_1","wasLoaded_1","_a","i","DATA_SRC_ATTRIBUTE","SRC_ATTRIBUTE","EImageState","ElementLoader","_this","dataSrc","ElementInfo","originalStyle","__extends","extendStatics","d","b","p","__","Element","_super","ElementSurrogate","horizontal","elementHandle","surrogate","debounce$1","wait","timeout","later","SCROLL_EVENT_TIMEOUT","ScrollLoader","lazyLoader","elementLocations","debouncedLoadEvent","debounce","_event","unloadedElementIndices","RESIZE_EVENT_TIMEOUT","ELazyMode","checkConfig","config","startLoader","loader","mode","scrollLoader","createLazyLoaderFromElements","surrogates","_loop_1","debouncedResizeEvent_1","IMAGE_TITLE_ATTRIBUTE","IMAGE_DATA_TITLE_ATTRIBUTE","PRELOADER_RIGHT_SIZE","PRELOADER_LEFT_SIZE","NUMBER_OF_VISIBLE_THUMBS","GALLERY_BUTTONS_SHOW_OPACITY","Image","maxWidth","maxHeight","title","ImageViewer","images","active","stage","image","imageStage","SlideshowContainer","imagesSelector","createLazyLoader","zoom","imageViewer","_imageInfo","checkSlideshowConfig","createSlideshow","imageSelector","ThumbStage","ThumbScrollerLayout","container","thumbStages","numberOfVisibleThumbs","willThumbsFitContainer","previousButton","nextButton","centerThumbs","childNodes","scrollerContainer","oneRemSize","hidden","nextThumbs","size","innerSize","margin","thumbStage","prepareThumbStages","thumbs","thumbClickedCallback","thumb","createThumbScrollerLayout","HorizontalScroller","position","useRem","positionCss","scroller","ThumbScroller","layout","useCenterIndex","normalizedIndex","currentScrollPosition","maxPos","DEFAULT_NUMBER_VISIBLE_THUMBS","ThumbScrollerContainer","thumbContainer","thumbElements","numberVisibleThumbs","thumbSelector","initialIndex","thumbScroller","thumbScrollerLayout","createThumbScroller","containerSelector","GalleryContainer","viewer","fullscreenContainer","GALLERY_PLACEHOLDER_ID","THUMBS_PLACEHOLDER_ID","FullscreenContainer","slideshowContainer","usePlaceholder","color","fullScreenContainer","fullScreenCloseButton","fullscreenClose","slideshowContainerPlaceholder","thumbContainerPlaceholder","smooth","waiting","RESIZE_DEBOUNCE_TIMER","GalleryContainerBuilder","nextImageSvg","containerWidth","containerPosX","debouncedThumbResizer","fullscreenButton","fullscreenSvg","buttons","button","fullScreen","createGallery","builder","checkThumbScrollerConfig","IMAGES_CONTAINER_CLASS","createImagesContainer","createFullscreenOnlyGallery","clonedElements","galleryContainer","fullscreen"],"mappings":"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","x_google_ignoreList":[0,9,10,11,12,13,14,15,16]}