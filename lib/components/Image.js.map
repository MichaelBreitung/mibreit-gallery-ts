{"version":3,"file":"Image.js","sources":["../../src/components/Image.ts"],"sourcesContent":["/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport { disableContextMenu, disableDragging, overwriteCssStyles } from 'mibreit-dom-tools';\r\nimport { Element } from 'mibreit-lazy-loader';\r\n\r\n// interfaces\r\nimport IImageInfo from '../interfaces/IImageInfo';\r\n\r\n// constants\r\nimport { IMAGE_TITLE_ATTRIBUTE, IMAGE_DATA_TITLE_ATTRIBUTE } from '../constants';\r\n\r\nexport default class Image extends Element implements IImageInfo {\r\n  private _title: string = '';\r\n\r\n  constructor(imageHandle: HTMLElement) {\r\n    super(imageHandle);\r\n    this._prepareTitle(imageHandle);\r\n    this._limitMaxSizeTo(imageHandle, this.getWidth(), this.getHeight());\r\n    disableContextMenu(imageHandle);\r\n    disableDragging(imageHandle);\r\n  }\r\n\r\n  getTitle(): string {\r\n    return this._title;\r\n  }\r\n\r\n  getUrl() {\r\n    return this._element.hasAttribute('data-src')\r\n      ? this._element.getAttribute('data-src')\r\n      : this._element.getAttribute('src');\r\n  }\r\n\r\n  private _limitMaxSizeTo(imageHandle: HTMLElement, maxWidth: number, maxHeight: number): void {\r\n    overwriteCssStyles(imageHandle, `max-width: ${maxWidth}px; max-height: ${maxHeight}px`);\r\n  }\r\n\r\n  private _prepareTitle(imageHandle: HTMLElement) {\r\n    let title = imageHandle.getAttribute(IMAGE_TITLE_ATTRIBUTE);\r\n    if (title) {\r\n      imageHandle.setAttribute(IMAGE_DATA_TITLE_ATTRIBUTE, title);\r\n      imageHandle.removeAttribute(IMAGE_TITLE_ATTRIBUTE);\r\n    } else {\r\n      title = imageHandle.getAttribute(IMAGE_DATA_TITLE_ATTRIBUTE);\r\n    }\r\n    this._title = title ? title : '';\r\n  }\r\n}\r\n"],"names":["Image","Element","imageHandle","__publicField","disableContextMenu","disableDragging","maxWidth","maxHeight","overwriteCssStyles","title","IMAGE_TITLE_ATTRIBUTE","IMAGE_DATA_TITLE_ATTRIBUTE"],"mappings":"ohBAcA,MAAqBA,UAAcC,CAA8B,CAG/D,YAAYC,EAA0B,CACpC,MAAMA,CAAW,EAHXC,EAAA,cAAiB,IAIvB,KAAK,cAAcD,CAAW,EAC9B,KAAK,gBAAgBA,EAAa,KAAK,WAAY,KAAK,WAAW,EACnEE,EAAmBF,CAAW,EAC9BG,EAAgBH,CAAW,CAC7B,CAEA,UAAmB,CACjB,OAAO,KAAK,MACd,CAEA,QAAS,CACP,OAAO,KAAK,SAAS,aAAa,UAAU,EACxC,KAAK,SAAS,aAAa,UAAU,EACrC,KAAK,SAAS,aAAa,KAAK,CACtC,CAEQ,gBAAgBA,EAA0BI,EAAkBC,EAAyB,CAC3FC,EAAmBN,EAAa,cAAcI,CAAQ,mBAAmBC,CAAS,IAAI,CACxF,CAEQ,cAAcL,EAA0B,CAC1C,IAAAO,EAAQP,EAAY,aAAaQ,CAAqB,EACtDD,GACUP,EAAA,aAAaS,EAA4BF,CAAK,EAC1DP,EAAY,gBAAgBQ,CAAqB,GAEzCD,EAAAP,EAAY,aAAaS,CAA0B,EAExD,KAAA,OAASF,GAAgB,EAChC,CACF"}