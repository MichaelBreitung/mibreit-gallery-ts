var _=Object.defineProperty;var C=(n,e,t)=>e in n?_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>C(n,typeof e!="symbol"?e+"":e,t);import{addCssStyle as s,addCssClass as i,createElement as r,setInnerHtml as u,appendChildElement as o,getElement as m,removeElement as a,prependBeforeChild as c,removeCssStyle as d,addClickEventListener as E}from"../node_modules/mibreit-dom-tools/lib/index.js";import h from"./Fullscreen.module.css.js";import f from"../images/close.svg.js";class p{constructor(e){l(this,"_changedCallbacks",[]);l(this,"_active");l(this,"_slideshowContainerElement");l(this,"_fullScreenContainerElement");l(this,"_slideshowContainerPlaceholderElement");l(this,"_closeButtonElement");this._active=!1,this._slideshowContainerElement=e,this._fullScreenContainerElement=this._createFullscreenContainer(),this._closeButtonElement=this._createFullscreenCloseButton(this._fullScreenContainerElement),this._slideshowContainerPlaceholderElement=this._createSlideshowContainerPlaceholder()}activate(){this._active||(this._moveGalleryToFullscreen(),this._addFullscreen(),this._setupCloseButtonHandler(),this._active=!0,this._changedCallbacks.forEach(e=>{e(!0)}))}deActivate(){this._active&&(this._removeGalleryFromFullscreen(),this._removeFullscreen(),this._active=!1,this._changedCallbacks.forEach(e=>{e(!1)}))}addChangedCallback(e){this._changedCallbacks.includes(e)||this._changedCallbacks.push(e)}isActive(){return this._active}setBackgroundColor(e){s(this._fullScreenContainerElement,"background-color",e)}setAverageBackgroundColor(){i(this._fullScreenContainerElement,h.average_background)}_createFullscreenContainer(){const e=r("div");return i(e,h.fullscreen),e}_createFullscreenCloseButton(e){const t=r("div");return u(t,f),i(t,h.fullscreen__exit_btn),o(t,e),t}_createSlideshowContainerPlaceholder(){return r("div")}_addFullscreen(){const e=m("body");e!=null&&o(this._fullScreenContainerElement,e)}_removeFullscreen(){a(this._fullScreenContainerElement)}_moveGalleryToFullscreen(){c(this._slideshowContainerPlaceholderElement,this._slideshowContainerElement),o(this._slideshowContainerElement,this._fullScreenContainerElement),s(this._slideshowContainerElement,"width","100%"),s(this._slideshowContainerElement,"flex-grow","1")}_removeGalleryFromFullscreen(){a(this._slideshowContainerElement),c(this._slideshowContainerElement,this._slideshowContainerPlaceholderElement),a(this._slideshowContainerPlaceholderElement),d(this._slideshowContainerElement,"width"),d(this._slideshowContainerElement,"flex-grow")}_setupCloseButtonHandler(){E(this._closeButtonElement,e=>{e==null||e.stopPropagation(),this._active&&this.deActivate()})}}export{p as default};
