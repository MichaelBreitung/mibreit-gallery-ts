var _=Object.defineProperty;var d=(n,e,t)=>e in n?_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>d(n,typeof e!="symbol"?e+"":e,t);import{addCssStyle as i,createElement as r,addCssClass as c,setInnerHtml as C,appendChildElement as o,getElement as E,removeElement as s,prependBeforeChild as a,removeCssStyle as h,addClickEventListener as f}from"../node_modules/mibreit-dom-tools/lib/index.js";import m from"./Fullscreen.module.css.js";import b from"../images/close.svg.js";class g{constructor(e,t=null,u=!0){l(this,"_changedCallbacks",[]);l(this,"_active");l(this,"_slideshowContainerElement");l(this,"_thumbsContainerElement",null);l(this,"_fullScreenContainerElement");l(this,"_slideshowContainerPlaceholderElement");l(this,"_thumbsContainerPlaceholderElement",null);l(this,"_closeButtonElement");l(this,"_usePlaceholder");this._active=!1,this._slideshowContainerElement=e,this._thumbsContainerElement=t,this._usePlaceholder=u,this._fullScreenContainerElement=this._createFullscreenContainer(),this._closeButtonElement=this._createFullscreenCloseButton(this._fullScreenContainerElement),this._slideshowContainerPlaceholderElement=this._createSlideshowContainerPlaceholder(),t&&(this._thumbsContainerPlaceholderElement=this._createThumbsContainerPlaceholder())}activate(){this._active||(this._moveGalleryToFullscreen(),this._moveThumbsToFullscreen(),this._addFullscreen(),this._setupCloseButtonHandler(),this._active=!0,this._changedCallbacks.forEach(e=>{e(!0)}))}deActivate(){this._active&&(this._removeGalleryFromFullscreen(),this._removeThumbsFromFullscreen(),this._removeFullscreen(),this._active=!1,this._changedCallbacks.forEach(e=>{e(!1)}))}addChangedCallback(e){this._changedCallbacks.includes(e)||this._changedCallbacks.push(e)}isActive(){return this._active}setBackgroundColor(e){i(this._fullScreenContainerElement,"background-color",e)}_createFullscreenContainer(){const e=r("div");return c(e,m.fullscreen),e}_createFullscreenCloseButton(e){const t=r("div");return C(t,b),c(t,m.fullscreen__exit_btn),o(t,e),t}_createSlideshowContainerPlaceholder(){return r("div")}_createThumbsContainerPlaceholder(){return r("div")}_addFullscreen(){const e=E("body");e!=null&&o(this._fullScreenContainerElement,e)}_removeFullscreen(){s(this._fullScreenContainerElement)}_moveGalleryToFullscreen(){this._usePlaceholder&&a(this._slideshowContainerPlaceholderElement,this._slideshowContainerElement),o(this._slideshowContainerElement,this._fullScreenContainerElement),i(this._slideshowContainerElement,"width","100%"),i(this._slideshowContainerElement,"flex-grow","1")}_removeGalleryFromFullscreen(){s(this._slideshowContainerElement),this._usePlaceholder&&(a(this._slideshowContainerElement,this._slideshowContainerPlaceholderElement),s(this._slideshowContainerPlaceholderElement)),h(this._slideshowContainerElement,"width"),h(this._slideshowContainerElement,"flex-grow")}_moveThumbsToFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(this._usePlaceholder&&a(this._thumbsContainerPlaceholderElement,this._thumbsContainerElement),o(this._thumbsContainerElement,this._fullScreenContainerElement),i(this._thumbsContainerElement,"flex-grow","0"))}_removeThumbsFromFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(s(this._thumbsContainerElement),this._usePlaceholder&&(a(this._thumbsContainerElement,this._thumbsContainerPlaceholderElement),s(this._thumbsContainerPlaceholderElement)),h(this._thumbsContainerElement,"flex-grow"))}_setupCloseButtonHandler(){f(this._closeButtonElement,e=>{e==null||e.stopPropagation(),this._active&&this.deActivate()})}}export{g as default};
