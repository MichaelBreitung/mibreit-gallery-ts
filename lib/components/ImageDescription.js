var _=Object.defineProperty;var C=(s,e,t)=>e in s?_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var n=(s,e,t)=>C(s,typeof e!="symbol"?e+"":e,t);import{createElement as a,appendChildElement as d,addCssClass as l,removeCssClass as u,setInnerHtml as c,addEventListener as p}from"../node_modules/mibreit-dom-tools/lib/index.js";import H from"../images/close.svg.js";import o from"./ImageDescription.module.css.js";class b{constructor(e){n(this,"_changedCallbacks",[]);n(this,"_descriptionHandle");n(this,"_descriptionTextHandle");var r;if(e){this._descriptionHandle=e;let i=e.querySelector("p");if(!i){const h=((r=e.textContent)==null?void 0:r.trim())??"";i=a("p"),i.textContent=h,e.innerHTML="",d(i,this._descriptionHandle)}this._descriptionTextHandle=i}else this._descriptionHandle=a("div"),this._descriptionTextHandle=a("p"),d(this._descriptionTextHandle,this._descriptionHandle);l(this._descriptionHandle,o.img_description);const t=this._createCloseButton(this._descriptionHandle);this._setupCloseButtonHandler(t)}show(){l(this._descriptionHandle,o.visible),this._changedCallbacks.forEach(e=>{e(!0)})}hide(){u(this._descriptionHandle,o.visible),this._changedCallbacks.forEach(e=>{e(!1)})}getDescriptionHandle(){return this._descriptionHandle}updateDescription(e){c(this._descriptionTextHandle,e)}addChangedCallback(e){this._changedCallbacks.includes(e)||this._changedCallbacks.push(e)}_createCloseButton(e){const t=a("div");return c(t,H),l(t,o.img_description__exit_btn),d(t,e),t}_setupCloseButtonHandler(e){p(e,"pointerdown",t=>{t.stopPropagation()}),p(e,"pointerup",t=>{t.stopPropagation(),this.hide()})}}export{b as default};
