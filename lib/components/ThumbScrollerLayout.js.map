{"version":3,"file":"ThumbScrollerLayout.js","sources":["../../src/components/ThumbScrollerLayout.ts"],"sourcesContent":["/**\r\n * @author Michael Breitung\r\n * @copyright Michael Breitung Photography (www.mibreit-photo.com)\r\n */\r\n\r\nimport {\r\n  addCssClass,\r\n  addCssStyle,\r\n  appendChildElement,\r\n  createElement,\r\n  getChildNodes,\r\n  getElementDimension,\r\n  getRootFontSize,\r\n  prependChildElement,\r\n  setInnerHtml,\r\n  wrapElements,\r\n} from 'mibreit-dom-tools';\r\nimport styles from './ThumbScrollerLayout.module.css';\r\nimport nextThumbs from '../images/nextThumbs.svg';\r\nimport IImageStage from '../interfaces/IImageStage';\r\nimport IThumbScrollerLayout from '../interfaces/IThumbScrollerLayout';\r\n\r\nexport default class ThumbScrollerLayout implements IThumbScrollerLayout {\r\n  private _scrollerContainer: HTMLElement;\r\n  private _previousButton: HTMLElement;\r\n  private _nextButton: HTMLElement;\r\n  private _thumbSizeRem: number;\r\n  private _thumbStages: Array<IImageStage>;\r\n  private _numberOfVisibleThumbs: number;\r\n\r\n  constructor(container: HTMLElement, thumbStages: Array<IImageStage>, numberOfVisibleThumbs: number) {\r\n    addCssClass(container, styles.mibreit_ThumbScrollerParentContainer);\r\n    this._numberOfVisibleThumbs = numberOfVisibleThumbs;\r\n    this._thumbStages = thumbStages;\r\n    const willThumbsFitContainer = numberOfVisibleThumbs >= thumbStages.length;\r\n    this._scrollerContainer = this._createScrollerContainer(container, willThumbsFitContainer);\r\n    const [previousButton, nextButton] = this._createScrollerButtons(container, willThumbsFitContainer);\r\n    this._previousButton = previousButton;\r\n    this._nextButton = nextButton;\r\n    this._thumbSizeRem = this._calculateThumbsize(this._scrollerContainer, numberOfVisibleThumbs);\r\n    this._resizeThumbStages(this._thumbSizeRem);\r\n  }\r\n\r\n  reinitSize() {\r\n    this._thumbSizeRem = this._calculateThumbsize(this._scrollerContainer, this._numberOfVisibleThumbs);\r\n    this._resizeThumbStages(this._thumbSizeRem);\r\n  }\r\n\r\n  getThumbSizeRem(): number {\r\n    return this._thumbSizeRem;\r\n  }\r\n\r\n  getNumberOfVisibleThumbs(): number {\r\n    return this._numberOfVisibleThumbs;\r\n  }\r\n\r\n  getNumberOfThumbs(): number {\r\n    return this._thumbStages.length;\r\n  }\r\n\r\n  getThumbScrollerButtons(): { previousButton: HTMLElement; nextButton: HTMLElement } {\r\n    return { previousButton: this._previousButton, nextButton: this._nextButton };\r\n  }\r\n\r\n  getScrollerContainer(): HTMLElement {\r\n    return this._scrollerContainer;\r\n  }\r\n\r\n  private _createScrollerContainer(container: HTMLElement, centerThumbs: boolean): HTMLElement {\r\n    const childNodes: Array<Node> = getChildNodes(container);\r\n    const scrollerContainer = createElement('div');\r\n    if (centerThumbs) {\r\n      addCssClass(scrollerContainer, styles.mibreit_ThumbScrollerContainerCentered);\r\n    } else {\r\n      addCssClass(scrollerContainer, styles.mibreit_ThumbScrollerContainer);\r\n    }\r\n    wrapElements(childNodes, scrollerContainer);\r\n    return scrollerContainer;\r\n  }\r\n\r\n  private _calculateThumbsize(container: HTMLElement, numberOfVisibleThumbs: number): number {\r\n    const oneRemSize = getRootFontSize();\r\n    const containerWidthRem = getElementDimension(container).width / oneRemSize;\r\n    const thumbsize = containerWidthRem / numberOfVisibleThumbs;\r\n    return thumbsize;\r\n  }\r\n\r\n  private _createScrollerButtons(container: HTMLElement, hidden: boolean): [HTMLElement, HTMLElement] {\r\n    const previousButton = createElement('div');\r\n    setInnerHtml(previousButton, nextThumbs);\r\n    addCssClass(previousButton, styles.mibreit_ThumbScrollerPrevious);\r\n    prependChildElement(previousButton, container);\r\n\r\n    const nextButton = createElement('div');\r\n    setInnerHtml(nextButton, nextThumbs);\r\n    addCssClass(nextButton, styles.mibreit_ThumbScrollerNext);\r\n    appendChildElement(nextButton, container);\r\n\r\n    if (hidden) {\r\n      addCssStyle(previousButton, 'opacity', '0');\r\n      addCssStyle(nextButton, 'opacity', '0');\r\n    }\r\n\r\n    return [previousButton, nextButton];\r\n  }\r\n\r\n  private _resizeThumbStages(size: number) {\r\n    const innerSize: number = size * 0.9;\r\n    const margin: number = size * 0.05;\r\n    this._thumbStages.forEach((thumbStage: IImageStage) => {\r\n      thumbStage.setSize(`${innerSize}rem`, `${innerSize}rem`);\r\n      thumbStage.setMargin(`${margin}rem`);\r\n    });\r\n  }\r\n}\r\n"],"names":["ThumbScrollerLayout","container","thumbStages","numberOfVisibleThumbs","__publicField","addCssClass","styles","willThumbsFitContainer","previousButton","nextButton","centerThumbs","childNodes","getChildNodes","scrollerContainer","createElement","wrapElements","oneRemSize","getRootFontSize","getElementDimension","hidden","setInnerHtml","nextThumbs","prependChildElement","appendChildElement","addCssStyle","size","innerSize","margin","thumbStage"],"mappings":"ygBAsBA,MAAqBA,CAAoD,CAQvE,YAAYC,EAAwBC,EAAiCC,EAA+B,CAP5FC,EAAA,2BACAA,EAAA,wBACAA,EAAA,oBACAA,EAAA,sBACAA,EAAA,qBACAA,EAAA,+BAGMC,EAAAJ,EAAWK,EAAO,oCAAoC,EAClE,KAAK,uBAAyBH,EAC9B,KAAK,aAAeD,EACd,MAAAK,EAAyBJ,GAAyBD,EAAY,OACpE,KAAK,mBAAqB,KAAK,yBAAyBD,EAAWM,CAAsB,EACzF,KAAM,CAACC,EAAgBC,CAAU,EAAI,KAAK,uBAAuBR,EAAWM,CAAsB,EAClG,KAAK,gBAAkBC,EACvB,KAAK,YAAcC,EACnB,KAAK,cAAgB,KAAK,oBAAoB,KAAK,mBAAoBN,CAAqB,EACvF,KAAA,mBAAmB,KAAK,aAAa,CAC5C,CAEA,YAAa,CACX,KAAK,cAAgB,KAAK,oBAAoB,KAAK,mBAAoB,KAAK,sBAAsB,EAC7F,KAAA,mBAAmB,KAAK,aAAa,CAC5C,CAEA,iBAA0B,CACxB,OAAO,KAAK,aACd,CAEA,0BAAmC,CACjC,OAAO,KAAK,sBACd,CAEA,mBAA4B,CAC1B,OAAO,KAAK,aAAa,MAC3B,CAEA,yBAAoF,CAClF,MAAO,CAAE,eAAgB,KAAK,gBAAiB,WAAY,KAAK,YAClE,CAEA,sBAAoC,CAClC,OAAO,KAAK,kBACd,CAEQ,yBAAyBF,EAAwBS,EAAoC,CACrF,MAAAC,EAA0BC,EAAcX,CAAS,EACjDY,EAAoBC,EAAc,KAAK,EAC7C,OAAIJ,EACUL,EAAAQ,EAAmBP,EAAO,sCAAsC,EAEhED,EAAAQ,EAAmBP,EAAO,8BAA8B,EAEtES,EAAaJ,EAAYE,CAAiB,EACnCA,CACT,CAEQ,oBAAoBZ,EAAwBE,EAAuC,CACzF,MAAMa,EAAaC,IAGZ,OAFmBC,EAAoBjB,CAAS,EAAE,MAAQe,EAC3Bb,CAExC,CAEQ,uBAAuBF,EAAwBkB,EAA6C,CAC5F,MAAAX,EAAiBM,EAAc,KAAK,EAC1CM,EAAaZ,EAAgBa,CAAU,EAC3BhB,EAAAG,EAAgBF,EAAO,6BAA6B,EAChEgB,EAAoBd,EAAgBP,CAAS,EAEvC,MAAAQ,EAAaK,EAAc,KAAK,EACtC,OAAAM,EAAaX,EAAYY,CAAU,EACvBhB,EAAAI,EAAYH,EAAO,yBAAyB,EACxDiB,EAAmBd,EAAYR,CAAS,EAEpCkB,IACUK,EAAAhB,EAAgB,UAAW,GAAG,EAC9BgB,EAAAf,EAAY,UAAW,GAAG,GAGjC,CAACD,EAAgBC,CAAU,CACpC,CAEQ,mBAAmBgB,EAAc,CACvC,MAAMC,EAAoBD,EAAO,GAC3BE,EAAiBF,EAAO,IACzB,KAAA,aAAa,QAASG,GAA4B,CACrDA,EAAW,QAAQ,GAAGF,CAAS,MAAO,GAAGA,CAAS,KAAK,EAC5CE,EAAA,UAAU,GAAGD,CAAM,KAAK,CAAA,CACpC,CACH,CACF"}