var h=Object.defineProperty;var n=(a,e,t)=>e in a?h(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var i=(a,e,t)=>n(a,typeof e!="symbol"?e+"":e,t);import m from"../factories/createImageStage.js";import{ESwipeDirection as r}from"./SwipeHandler.js";import{EImageScaleMode as _}from"../types/index.js";class o{constructor(e,t=_.FIT_ASPECT){i(this,"_currentIndex",-1);i(this,"_imageStages",[]);i(this,"_images");i(this,"_imageChangedCallbacks",new Array);this._images=e,this._prepareImageStages(e,t)}showImage(e){return this._showImage(e)}showNextImage(e){const t=this._currentIndex<this._imageStages.length-1?this._currentIndex+1:0;return this._showImage(t,e)}showPreviousImage(e){const t=this._currentIndex>0?this._currentIndex-1:this._imageStages.length-1;return this._showImage(t,e)}getNumberOfImages(){return this._imageStages.length}setZoomAnimation(e){this._imageStages.forEach(t=>{t.setZoomAnimation(e)})}addImageChangedCallback(e){this._imageChangedCallbacks.includes(e)||this._imageChangedCallbacks.push(e)}getImageIndex(){return this._currentIndex}getImageInfo(e){return this._isValidIndex(e)?this._images[e]:null}getImageElement(e){return this._isValidIndex(e)?this._images[e].getHtmlElement():null}_showImage(e,t=r.NONE){return this._isValidIndex(e)?(e!=this._currentIndex&&(this._images[e].wasLoaded()?(this._hideImage(this._currentIndex,t),this._changeCurrentImage(e,t)):this._images[e].addWasLoadedCallback(()=>{this._hideImage(this._currentIndex,t),this._changeCurrentImage(e,t)})),!0):!1}_hideImage(e,t=r.NONE){this._isValidIndex(e)&&this._imageStages[this._currentIndex].hideImage(t)}_prepareImageStages(e,t){e.forEach(s=>{const g=m(s.getHtmlElement(),s.getWidth(),s.getHeight(),t);s.addWasLoadedCallback(()=>{g.reinitSize()}),this._imageStages.push(g)})}_isValidIndex(e){return e>=0&&e<this._imageStages.length}_changeCurrentImage(e,t=r.NONE){this._currentIndex=e,this._imageStages[this._currentIndex].showImage(t),this._imageChangedCallbacks.forEach(s=>{s(this._currentIndex,this._images[this._currentIndex])})}}export{o as default};
