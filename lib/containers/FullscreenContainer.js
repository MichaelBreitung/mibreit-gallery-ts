var d=Object.defineProperty;var C=(t,e,l)=>e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var s=(t,e,l)=>C(t,typeof e!="symbol"?e+"":e,l);import{addCssStyle as r,createElement as i,addCssClass as c,setInnerHtml as f,appendChildElement as o,getElement as m,removeElement as n,prependBeforeChild as h,removeCssStyle as a,addClickEventListener as b}from"../node_modules/mibreit-dom-tools/lib/index.js";import u from"./FullscreenContainer.module.css.js";import P from"../images/close.svg.js";class g{constructor(e,l=null,_=!0){s(this,"_fullscreenChangedCallbacks",[]);s(this,"_fullscreenActive");s(this,"_slideshowContainer");s(this,"_thumbsContainer",null);s(this,"_fullScreenContainer");s(this,"_slideshowContainerPlaceholder");s(this,"_thumbsContainerPlaceholder",null);s(this,"_fullScreenCloseButton");s(this,"_usePlaceholder");this._fullscreenActive=!1,this._slideshowContainer=e,this._thumbsContainer=l,this._usePlaceholder=_,this._fullScreenContainer=this._createFullscreenContainer(),this._fullScreenCloseButton=this._createFullscreenCloseButton(this._fullScreenContainer),this._slideshowContainerPlaceholder=this._createSlideshowContainerPlaceholder(),l&&(this._thumbsContainerPlaceholder=this._createThumbsContainerPlaceholder())}activate(){this._fullscreenActive||(this._moveGalleryToFullscreen(),this._moveThumbsToFullscreen(),this._addFullscreen(),this._setupCloseButtonHandler(),this._fullscreenActive=!0,this._fullscreenChangedCallbacks.forEach(e=>{e(!0)}))}deActivate(){this._fullscreenActive&&(this._removeGalleryFromFullscreen(),this._removeThumbsFromFullscreen(),this._removeFullscreen(),this._fullscreenActive=!1,this._fullscreenChangedCallbacks.forEach(e=>{e(!1)}))}addFullscreenChangedCallback(e){this._fullscreenChangedCallbacks.includes(e)||this._fullscreenChangedCallbacks.push(e)}isFullscreenActive(){return this._fullscreenActive}setBackgroundColor(e){r(this._fullScreenContainer,"background-color",e)}_createFullscreenContainer(){const e=i("div");return c(e,u.fullscreen),e}_createFullscreenCloseButton(e){const l=i("div");return f(l,P),c(l,u.fullscreen__exit_btn),o(l,e),l}_createSlideshowContainerPlaceholder(){return i("div")}_createThumbsContainerPlaceholder(){return i("div")}_addFullscreen(){const e=m("body");e!=null&&o(this._fullScreenContainer,e)}_removeFullscreen(){n(this._fullScreenContainer)}_moveGalleryToFullscreen(){this._usePlaceholder&&h(this._slideshowContainerPlaceholder,this._slideshowContainer),o(this._slideshowContainer,this._fullScreenContainer),r(this._slideshowContainer,"width","100%"),r(this._slideshowContainer,"flex-grow","1")}_removeGalleryFromFullscreen(){n(this._slideshowContainer),this._usePlaceholder&&(h(this._slideshowContainer,this._slideshowContainerPlaceholder),n(this._slideshowContainerPlaceholder)),a(this._slideshowContainer,"width"),a(this._slideshowContainer,"flex-grow")}_moveThumbsToFullscreen(){this._thumbsContainer&&this._thumbsContainerPlaceholder&&(this._usePlaceholder&&h(this._thumbsContainerPlaceholder,this._thumbsContainer),o(this._thumbsContainer,this._fullScreenContainer),r(this._thumbsContainer,"flex-grow","0"))}_removeThumbsFromFullscreen(){this._thumbsContainer&&this._thumbsContainerPlaceholder&&(n(this._thumbsContainer),this._usePlaceholder&&(h(this._thumbsContainer,this._thumbsContainerPlaceholder),n(this._thumbsContainerPlaceholder)),a(this._thumbsContainer,"flex-grow"))}_setupCloseButtonHandler(){b(this._fullScreenCloseButton,e=>{e==null||e.stopPropagation(),this._fullscreenActive&&this.deActivate()})}}export{g as default};
