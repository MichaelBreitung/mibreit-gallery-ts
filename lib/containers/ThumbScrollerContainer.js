var b=Object.defineProperty;var c=(o,r,t)=>r in o?b(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t;var a=(o,r,t)=>c(o,typeof r!="symbol"?r+"":r,t);import{createLazyLoaderFromElements as i}from"../node_modules/mibreit-lazy-loader/lib/tools/createLazyLoader.js";import"../node_modules/mibreit-lazy-loader/lib/components/Element.js";import{addClickEventListener as h}from"../node_modules/mibreit-dom-tools/lib/index.js";import d from"../components/Image.js";import p from"../factories/createThumbScrollerLayout.js";import S from"../components/ThumbScroller.js";const T=7;class y{constructor(r,t,e,l){a(this,"_thumbScroller",null);const s=e!=null&&e.numberOfVisibleThumbs?e.numberOfVisibleThumbs:T,m=this._prepareThumbs(t),u=i(m,{preloaderBeforeSize:s,preloaderAfterSize:s}),n=p(r,m,s,l);s<m.length?(this._thumbScroller=this._prepareThumbScroller(n,u,e==null?void 0:e.initialIndex),this._addThumbScrollerInteraction(this._thumbScroller,n)):setTimeout(()=>{u.loadElement(0),u.setCurrentIndex(0)},0)}getScroller(){return this._thumbScroller}_prepareThumbs(r){const t=new Array;for(let e=0;e<r.length;e++){const l=new d(r[e]);t.push(l)}return t}_prepareThumbScroller(r,t,e=0){const l=new S(r);return l.addScrollIndexChangedCallback(s=>{t.setCurrentIndex(s)}),l.scrollTo(e),l}_addThumbScrollerInteraction(r,t){const{previousButton:e,nextButton:l}=t.getThumbScrollerButtons();h(l,()=>{r.scrollNext()}),h(e,()=>{r.scrollPrevious()})}}export{y as default};
