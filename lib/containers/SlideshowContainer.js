var d=Object.defineProperty;var _=(m,r,e)=>r in m?d(m,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):m[r]=e;var i=(m,r,e)=>_(m,typeof r!="symbol"?r+"":r,e);import"../node_modules/mibreit-lazy-loader/lib/tools/createLazyLoader.js";import I from"../node_modules/mibreit-lazy-loader/lib/components/LazyLoader.js";import"../node_modules/mibreit-lazy-loader/lib/components/Element.js";import l from"../components/Image.js";import{PRELOADER_LEFT_SIZE as w,PRELOADER_RIGHT_SIZE as h}from"../constants.js";import o from"../components/ImageViewer.js";class R{constructor(r,e){i(this,"_imageViewer");i(this,"_loader");const a=this._prepareImages(r);this._loader=this._prepareLoader(a,e==null?void 0:e.preloaderBeforeSize,e==null?void 0:e.preloaderAfterSize),this._imageViewer=this._prepareImageViewer(a,this._loader,e==null?void 0:e.scaleMode,e==null?void 0:e.zoom),e!=null&&e.interval&&setInterval(()=>{this._imageViewer.showNextImage()},e.interval),this._imageViewer.showImage(0)}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}_prepareImages(r){const e=new Array;for(let a=0;a<r.length;a++){const t=new l(r[a]);e.push(t)}return e}_prepareLoader(r,e=w,a=h){const t=new I(r,e,a);return setTimeout(()=>{t.loadElement(0),t.setCurrentIndex(0)},0),t}_prepareImageViewer(r,e,a,t){const s=new o(r,a);return t!==void 0&&s.setZoomAnimation(t),e&&(s.addImageChangedCallback((p,u)=>{e.setCurrentIndex(p)}),e.setCurrentIndex(0)),s}}export{R as default};
