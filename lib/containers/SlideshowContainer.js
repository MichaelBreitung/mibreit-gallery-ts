var d=Object.defineProperty;var _=(s,r,e)=>r in s?d(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e;var i=(s,r,e)=>_(s,typeof r!="symbol"?r+"":r,e);import{createLazyLoaderFromElements as l}from"../node_modules/mibreit-lazy-loader/lib/tools/createLazyLoader.js";import"../node_modules/mibreit-lazy-loader/lib/components/Element.js";import I from"../components/Image.js";import{PRELOADER_LEFT_SIZE as h,PRELOADER_RIGHT_SIZE as w}from"../constants.js";import o from"../components/ImageViewer.js";class A{constructor(r,e){i(this,"_imageViewer");i(this,"_loader");const t=this._prepareImages(r);this._loader=this._prepareLoader(t,e==null?void 0:e.preloaderBeforeSize,e==null?void 0:e.preloaderAfterSize),this._imageViewer=this._prepareImageViewer(t,this._loader,e==null?void 0:e.scaleMode,e==null?void 0:e.zoom),e!=null&&e.interval&&setInterval(()=>{this._imageViewer.showNextImage()},e.interval),this._imageViewer.showImage(0)}getViewer(){return this._imageViewer}getLoader(){return this._loader}_prepareImages(r){const e=new Array;for(let t=0;t<r.length;t++){const a=new I(r[t]);e.push(a)}return e}_prepareLoader(r,e=h,t=w){const a=l(r,{preloaderBeforeSize:e,preloaderAfterSize:t});return setTimeout(()=>{a.loadElement(0),a.setCurrentIndex(0)},0),a}_prepareImageViewer(r,e,t,a){const m=new o(r,t);return a!==void 0&&m.setZoomAnimation(a),e&&(m.addImageChangedCallback((p,u)=>{e.setCurrentIndex(p)}),e.setCurrentIndex(0)),m}}export{A as default};
